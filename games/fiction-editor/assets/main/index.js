System.register("chunks:///_virtual/AbstractCondition.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"d0c1bWe/05PD6SVOlh9oA6U","AbstractCondition",void 0);t("AbstractCondition",(function(t,n){this.context=void 0,this.ownerId=void 0,this.context=t,this.ownerId=n}));n._RF.pop()}}}));

System.register("chunks:///_virtual/AbstractEventCondition.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractCondition.ts"],(function(t){var e,n,i,o;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy},function(t){o=t.AbstractCondition}],execute:function(){i._RF.push({},"8722frARONNAIGOGmA8LGNX","AbstractEventCondition",void 0);t("AbstractEventCondition",function(t){function i(e,n){var i;return(i=t.call(this,e,n)||this).interested=void 0,i}return e(i,t),i.prototype.subscribe=function(t){if("string"==typeof t)this.interested.add(t);else for(var e,i=n(t);!(e=i()).done;){var o=e.value;this.interested.add(o)}},i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/AbstractImpact.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"f3778+d5TNJ46IeI4TIzXyR","AbstractImpact",void 0);t("AbstractImpact",function(){function t(t,n,i,o,e,s){this.actionEnum=void 0,this.context=void 0,this.generatorId=void 0,this.skillId=void 0,this.templateImpact=void 0,this.targetIds=void 0,this.actionEnum=i,this.context=t,this.generatorId=n,this.skillId=o,this.templateImpact=e,this.targetIds=s}var n=t.prototype;return n.init=function(){this.onInit()},n.onInit=function(){},n.destroy=function(){this.onDestroy()},n.onDestroy=function(){},n.paramCheck=function(){return!0},n.postEvent=function(t){return this.context.eventBus.postEvent(t)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/AbstractOngoingCondition.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractCondition.ts"],(function(n){var t,i,o;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy},function(n){o=n.AbstractCondition}],execute:function(){i._RF.push({},"c72c1MW+6hJCIdXhRWXYWgy","AbstractOngoingCondition",void 0);n("AbstractOngoingCondition",function(n){function i(t,i){return n.call(this,t,i)||this}return t(i,n),i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/AbstractProjectile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enums6.ts","./MathUtils.ts","./utils2.ts","./index32.ts","./index26.ts","./UuidUtils.ts","./TemplateManager.ts","./Helpers.ts","./Log.ts"],(function(t){var e,i,o,s,n,r,c,a,h,l,u;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,i=t.createClass},function(t){o=t.cclegacy,s=t.Vec2},function(t){n=t.ProjectileState},function(t){r=t.MathUtils},function(t){c=t.ImpactFactory},null,null,function(t){a=t.UuIdUtils},function(t){h=t.TemplateManager},function(t){l=t.ImpactHelper},function(t){u=t.Log}],execute:function(){o._RF.push({},"12ff1H0AAZAYZtRsD3jFYlV","AbstractProjectile",void 0);t("AbstractProjectile",function(){function t(t,e,i){this.context=void 0,this.id=void 0,this.templateProjectile=void 0,this.generatorId=void 0,this.startPos=void 0,this._ownerId=void 0,this.lastUpdateTime=void 0,this.remainingTime=void 0,this._projectileState=void 0,this._pos=void 0,this.direction=void 0,this.velocity=void 0,this.traveledDistance=void 0,this.hitCount=void 0,this.context=t,this.id=a.getNextId(),this.templateProjectile=e,this.generatorId=i,this._ownerId=i}var o=t.prototype;return o.update=function(t){if(this.shouldDestroy())this.onDestroy();else{switch(this.lastUpdateTime=this.context.currentTime,this.remainingTime-=t,this._projectileState){case n.CREATED:this.onStart(),this._projectileState=n.FLYING;break;case n.FLYING:this.updatePosition(t),this.detectionHit(t)}this.onUpdate(t)}},o.init=function(){this._pos=this.startPos.clone(),this.velocity=new s(this.direction.x*this.templateProjectile.speed,this.direction.y*this.templateProjectile.speed),this.traveledDistance=0,this.remainingTime=this.templateProjectile.lifeTime,this._projectileState=n.CREATED,this.onInit()},o.destroy=function(){this.onDestroy()},o.onDestroy=function(){},o.onStart=function(){},o.updatePosition=function(t){this._pos.x+=this.velocity.x*t,this._pos.y+=this.velocity.y*t;var e=r.vectorLength(this.velocity)*t;this.traveledDistance+=e,this.traveledDistance>=this.templateProjectile.range&&this.onReachMaxRange()},o.detectionHit=function(t){for(var i,o=this.context.unitsMod.getEnemyMap(this.ownerId),r=e(o.values());!(i=r()).done;){var c=i.value;if(s.distance(this._pos,c.movementMod.pos)<this.templateProjectile.hitRadius){this.doHit(c),this.projectileState=n.HITTING;break}}},o.shouldDestroy=function(){return this.remainingTime<=0||(this.projectileState===n.DESTROYED||this.traveledDistance>=this.templateProjectile.range)},o.doHit=function(t){for(var i,o=this.templateProjectile.hitImpacts,s=e(o);!(i=s()).done;){var r=i.value,a=h.inst().helper(l).getTemplate(r);if(null!=a)c.createAction(this.context,this.ownerId,0,a,[t.id]).onTrigger();else u.error("templateAction is null, ",r)}this.hitCount++,this.hitCount>=this.templateProjectile.hitCount&&(this.projectileState=n.DESTROYED),this.onHit(t)},o.onReachMaxRange=function(){this._projectileState=n.DESTROYED},i(t,[{key:"ownerId",get:function(){return this._ownerId},set:function(t){this._ownerId=t}},{key:"projectileState",get:function(){return this._projectileState},set:function(t){this._projectileState=t}},{key:"pos",get:function(){return this._pos}}]),t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/AnimMod.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,i;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy,i=n.sp}],execute:function(){e._RF.push({},"79842pNCcxOF5DryQCDswja","AnimMod",void 0);n("AnimMod",function(){function n(n){this.owner=void 0,this._curAnim="none",this.owner=n}var e=n.prototype;return e.update=function(n){},e.playAnim=function(n,t,e){null!=this.owner.node&&(this._curAnim===n&&t||(this._curAnim=n,this.curSkeleton().setCompleteListener(null),this.curSkeleton().setAnimation(0,n,t),!t&&e&&this.curSkeleton().setCompleteListener((function(t){t.animation.name===n&&e()}))))},e.curSkeleton=function(){return this.owner.node.getComponent(i.Skeleton)},t(n,[{key:"curAnim",get:function(){return this._curAnim}}]),n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/AttrMod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants3.ts","./index30.ts","./index26.ts","./index22.ts","./Log.ts","./event.ts","./constants.ts"],(function(t){var e,i,n,r,s,a,o;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy},function(t){n=t.AttrKey},null,null,null,function(t){r=t.Log},function(t){s=t.OnAttributeUpdateEvent},function(t){a=t.SEMICOLON,o=t.ASTERISK}],execute:function(){i._RF.push({},"8c38eDzq7BC4pjyBKknWftO","AttrMod",void 0);t("AttrMod",function(){function t(t){this.owner=void 0,this.effectAttrMap=new Map,this.finalAttrMap=new Map,this.die=!1,this.owner=t}var i=t.prototype;return i.update=function(t){},i.init=function(){var t=this.owner.templateUnit,i=this.owner.unitData.level;this.effectAttrMap.set(n.AD_V,t.ad+t.adUp*i),this.effectAttrMap.set(n.AP_V,t.ap+t.apUp*i),this.effectAttrMap.set(n.ARMOR_V,t.armor+t.armorUp*i),this.effectAttrMap.set(n.RESIST_V,t.resist+t.resistUp*i),this.effectAttrMap.set(n.HP_LIMIT_V,t.hp+t.hpUp*i),this.effectAttrMap.set(n.HP_RECOVER_V,t.hpRecover+t.hpRecoverUp*i),this.effectAttrMap.set(n.ATK_SPEED_V,t.atkSpeed),this.effectAttrMap.set(n.MOVE_SPEED_V,t.moveSpeed);for(var r,s=this.owner.unitData.equipMap,a=e(s.values());!(r=a()).done;)r.value;this.calcFinalAttr(),this.setCurHp(this.getFinalAttr(n.HP_LIMIT))},i.destroy=function(){this.effectAttrMap.clear(),this.finalAttrMap.clear()},i.calcFinalAttr=function(){for(var t=1;t<32;t++){var e,i=10*t,n=this.effectAttrMap.get(i);if(void 0!==n){var r=i+1,s=null!=(e=this.effectAttrMap.get(r))?e:0;this.finalAttrMap.set(i,n*(1+s/100))}}},i.getFinalAttr=function(t,e){var i;return void 0===e&&(e=!1),e&&this.calcFinalAttr(),null!=(i=this.finalAttrMap.get(t))?i:0},i.subHp=function(t){this.modifyHp(t,!1)},i.addHp=function(t){this.modifyHp(t,!0)},i.modifyHp=function(t,e){var i=this.getFinalAttr(n.HP);this.setCurHp(e?i+t:i-t)},i.setCurHp=function(t){this.finalAttrMap.set(n.HP,t)},i.isAlive=function(){return!this.die&&this.getFinalAttr(n.HP)>0},i.isVerge2Death=function(){return!this.die&&this.getFinalAttr(n.HP)<=0},i.dead=function(){this.die=!0},i.respawn=function(){this.die=!1},i.modifyAttr=function(t,e,i){var a;if(t!==n.HP){var o=null!=(a=this.effectAttrMap.get(t))?a:0,f=o+(i?e:-e);this.effectAttrMap.set(t,f),this.owner.context.eventBus.postEvent(new s(this.owner.id,this.owner.id,t,o,-o,i))}else r.error("禁止直接修改当前血量")},i.modifyAttrByString=function(t,i){for(var n,r=t.split(a),s=e(r);!(n=s()).done;){var f=n.value.split(o),p=parseInt(f[0]),c=parseInt(f[1]),u=parseInt(f[2]),h=0===c?p+1:p+2;this.modifyAttr(h,u,i)}},i.getAttrMap=function(){for(var t,i=new Map,n=e(this.finalAttrMap.entries());!(t=n()).done;){var r=t.value,s=r[0],a=r[1];i.set(s,a)}return i},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/BattleContext.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index19.ts","./index18.ts","./index27.ts","./index32.ts","./RandomUtils.ts","./UuidUtils.ts","./EventBus.ts","./UnitsMod.ts","./ProjectileMod.ts","./CalcMod.ts"],(function(t){var i,n,e,s,o,d,u,c;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy},null,null,null,null,function(t){e=t.RandomUtils},function(t){s=t.UuIdUtils},function(t){o=t.EventBus},function(t){d=t.UnitsMod},function(t){u=t.ProjectileMod},function(t){c=t.CalcMod}],execute:function(){n._RF.push({},"7d96fgOpC9ArqwIEOIzOX0Z","BattleContext",void 0);t("BattleContext",function(){function t(t,i,n){this.templateBattle=void 0,this.id=void 0,this.unitsMod=void 0,this.projectileMod=void 0,this.calcMod=void 0,this.eventBus=void 0,this.random=void 0,this.isStarting=!1,this.isPaused=!1,this.battleEnded=!1,this._currentTime=0,this.id=s.getNextId(),this.templateBattle=t,this.eventBus=new o,this.random=new e(i),this.unitsMod=new d(this,n),this.projectileMod=new u(this),this.calcMod=new c(this),this.onInit()}var n=t.prototype;return n.onInit=function(){this.unitsMod.init(),this.projectileMod.init()},n.onDestroy=function(){this.unitsMod.destroy(),this.projectileMod.destroy()},n.start=function(){this.isStarting||(this.isStarting=!0)},n.update=function(t){this.isActive()&&(this.unitsMod.update(t),this.projectileMod.update(t))},n.destroy=function(){this.onDestroy()},n.isActive=function(){return this.isStarting&&!this.battleEnded},i(t,[{key:"currentTime",get:function(){return this._currentTime}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index30.ts","./index26.ts","./Log.ts","./BattleContext.ts"],(function(t){var n,i,e,a,o;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy,e=t.Component},null,null,function(t){a=t.Log},function(t){o=t.BattleContext}],execute:function(){i._RF.push({},"dbf40yXTF1JMaienZ+QR5bc","BattleManager",void 0),t("BattleManager",function(t){function i(){for(var n,i=arguments.length,e=new Array(i),a=0;a<i;a++)e[a]=arguments[a];return(n=t.call.apply(t,[this].concat(e))||this).battleMap=new Map,n.isInitialized=!1,n}n(i,t),i.inst=function(){return this._instance||(this._instance=new i,this._instance.init()),this._instance};var e=i.prototype;return e.init=function(){this.isInitialized?console.warn("战斗系统已初始化"):(a.info("战斗系统初始化..."),this.isInitialized=!0,a.info("战斗系统初始化完成!!!"))},e.onLoad=function(){a.info("战斗系统组件加载")},e.update=function(t){this.isInitialized&&this.battleMap.forEach((function(n){n.update(t)}))},e.onDestroy=function(){a.info("战斗系统组件销毁"),this.isInitialized=!1},e.createBattle=function(t,n,i){var e=new o(t,n,i);return this.battleMap.set(e.id,e),e},i}(e))._instance=void 0,i._RF.pop()}}}));

System.register("chunks:///_virtual/BattleScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index10.ts","./BattleManager.ts","./enums3.ts"],(function(t){var e,n,o,i,r,a,c,u,s,l,p,f,d,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,c=t._decorator,u=t.Node,s=t.Prefab,l=t.instantiate,p=t.Vec3,f=t.Component},null,function(t){d=t.BattleManager},function(t){h=t.CampEnum}],execute:function(){var y,v,x,m,b,g,P;a._RF.push({},"48c743uqWpFM7bINFySsREv","BattleScene",void 0);var M=c.ccclass,B=c.property;t("BattleScene",(y=M("BattleScene"),v=B(u),x=B(s),y((g=e((b=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,o(e,"content",g,i(e)),o(e,"unitPrefab",P,i(e)),e.context=void 0,e}n(e,t);var a=e.prototype;return a.onLoad=function(){},a.start=function(){d.inst()},a.update=function(t){d.inst().update(t)},a.onDestroy=function(){d.inst().onDestroy()},a.switchContext=function(t){this.clear(),this.context=t;for(var e,n=this.context.unitsMod.unitsMap,o=r(n.values());!(e=o()).done;){var i=e.value;i.node=this.createUnitNode(i),i.movementMod.pos=i.node.position}t.start()},a.createUnitNode=function(t){var e=l(this.unitPrefab);return e.setPosition(this.getPos(t.campEnum,t.index)),t.campEnum===h.ENEMY&&e.setScale(-1,1),this.content.addChild(e),e},a.getPos=function(t,e){var n=150,o=t===h.PLAYER,i=o?-600:600,r=[{x:150,y:75},{x:150,y:-75},{x:0,y:n},{x:0,y:0},{x:0,y:-150}][e];if(!r)return new p(0,0,0);var a=o?i+r.x:i-r.x,c=r.y;return new p(a,c,0)},a.clear=function(){this.content.removeAllChildren(),this.context=null},e}(f)).prototype,"content",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(b.prototype,"unitPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=b))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/BattleUnit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index9.ts","./index4.ts","./index2.ts","./index17.ts","./index11.ts","./index23.ts","./AnimMod.ts","./index14.ts","./UuidUtils.ts","./constants3.ts","./AttrMod.ts","./BuffMod.ts","./StateMachineMod.ts","./SkillMod.ts","./MovementMod.ts","./LifecycleMod.ts","./StatsMod.ts"],(function(t){var i,n,s,e,o,d,h,a,u,M,c,l;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy},null,null,null,null,null,null,function(t){s=t.AnimMod},null,function(t){e=t.UuIdUtils},function(t){o=t.AttrKey},function(t){d=t.AttrMod},function(t){h=t.BuffMod},function(t){a=t.StateMachineMod},function(t){u=t.SkillMod},function(t){M=t.MovementMod},function(t){c=t.LifecycleMod},function(t){l=t.StatsMod}],execute:function(){n._RF.push({},"6ce86IyEOxAHbSL44Iwmsng","BattleUnit",void 0);t("BattleUnit",function(){function t(t,i,n,o,r){this.context=void 0,this.id=void 0,this.templateUnit=void 0,this.index=void 0,this.unitData=void 0,this.campEnum=void 0,this.attrMod=void 0,this.buffMod=void 0,this.animMod=void 0,this.stateMachineMod=void 0,this.skillMod=void 0,this.movementMod=void 0,this.statsMod=void 0,this.lifecycleMod=void 0,this._node=void 0,this._target=void 0,this.context=t,this.id=e.getNextId(),this.templateUnit=i,this.index=o,this.campEnum=n,this.unitData=r,this.attrMod=new d(this),this.buffMod=new h(this),this.animMod=new s(this),this.stateMachineMod=new a(this),this.skillMod=new u(this),this.movementMod=new M(this),this.lifecycleMod=new c(this),this.statsMod=new l(this)}t.createBattleUnit=function(i,n,s,e,o){var d=new t(i,n,s,e,o);return d.onInit(),d};var n=t.prototype;return n.update=function(t){this.isDead()||(this.attrMod.update(t),this.buffMod.update(t),this.animMod.update(t),this.stateMachineMod.update(t),this.skillMod.update(t),this.movementMod.update(t),this.statsMod.update(t))},n.onInit=function(){this.attrMod.init(),this.buffMod.init(),this.stateMachineMod.init(),this.skillMod.init(),this.statsMod.init()},n.onDestroy=function(){this.attrMod.destroy(),this.buffMod.destroy(),this.stateMachineMod.destroy(),this.skillMod.destroy(),this.statsMod.destroy()},n.isDead=function(){return this.attrMod.isAlive()},n.getHpPercent=function(){return this.attrMod.getFinalAttr(o.HP)/this.attrMod.getFinalAttr(o.HP_LIMIT)},n.checkEnemyInRange=function(){return Math.random()>.99},i(t,[{key:"target",get:function(){return this._target},set:function(t){this._target=t}},{key:"node",get:function(){return this._node},set:function(t){this._node=t}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BehaviorTreeMod.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"520ab3/RwRBzrXlY5auWbfN","BehaviorTreeMod",void 0);e("BehaviorTreeMod",function(){function e(e){this.owner=void 0,this.owner=e}var t=e.prototype;return t.update=function(e){},t.init=function(){},t.destroy=function(){},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BuffBox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index32.ts","./index26.ts","./enums7.ts","./EventListener.ts","./utils3.ts","./index22.ts","./TemplateManager.ts","./Helpers.ts","./Log.ts","./event.ts"],(function(t){var e,f,u,n,s,i,o,r,a,c,d,h;return{setters:[function(t){e=t.inheritsLoose,f=t.createForOfIteratorHelperLoose},function(t){u=t.cclegacy},null,null,function(t){n=t.BuffStatus,s=t.DisposedRule},function(t){i=t.AbstractEventListener},function(t){o=t.BuffFactory},null,function(t){r=t.TemplateManager},function(t){a=t.BuffEffectHelper},function(t){c=t.Log},function(t){d=t.OnBuffActiveEvent,h=t.OnBubbleTipsEvent}],execute:function(){u._RF.push({},"f3c18f/XkZBdqLfjYvxDv0T","BuffBox",void 0);t("BuffBox",function(t){function u(e,f,u,s,i){var o;return(o=t.call(this)||this).context=void 0,o.id=void 0,o.ownerId=void 0,o.generatorId=void 0,o.templateBuff=void 0,o.disposedRule=void 0,o.buffPurpose=void 0,o.buffEffects=new Set,o.layer=0,o.buffStatus=n.ATTACHED,o.context=e,o.id=f,o.ownerId=u,o.generatorId=s,o.templateBuff=i,o.disposedRule=i.disposedRule,o.buffPurpose=i.purpose,o}e(u,t),u.createBuffBox=function(t,e,f,n,s){var i=new u(t,e,f,n,s);return i.onInit(),i};var i=u.prototype;return i.update=function(t){this.buffEffects.forEach((function(e){e.update(t)}))},i.onInit=function(){for(var t,e=this.templateBuff.effects,u=r.inst().helper(a),n=f(e);!(t=n()).done;){var s=t.value,i=u.getTemplate(s);if(i){var d=o.createBuffEffect(this.context,this,i);d&&this.buffEffects.add(d)}else c.error("效果不存在 buff="+this.templateBuff.id+", effect="+s)}this.buffEffects.forEach((function(t){return t.init}))},i.destroy=function(t){this.context.unitsMod.getBattleUnit(this.ownerId).buffMod.disposedBuff(this.id,t),this.buffEffects.forEach((function(e){return e.destroy(t)})),this.context.eventBus.unregister(this)},i.onEvent=function(t){switch(t.name){case"TryActiveBuffEvent":if(t.buffBox!==this)break;this.buffStatus===n.ATTACHED&&[].concat(this.buffEffects).some((function(t){return t.getBuffStatus()===n.ACTIVE}))&&this.switchBuffStatus(n.ACTIVE,null);break;case"TryDisposedBuffEvent":var e=t;if(e.buffBox!==this)break;if(this.buffStatus===n.ACTIVE){var f=!1;this.disposedRule===s.ANY?f=[].concat(this.buffEffects).some((function(t){return t.getBuffStatus()===n.REMOVED})):this.disposedRule===s.ALL&&(f=[].concat(this.buffEffects).every((function(t){return t.getBuffStatus()===n.REMOVED}))),f&&this.switchBuffStatus(n.REMOVED,e.destroyReason)}}},i.onHook2Host=function(){this.context.eventBus.register(this),this.buffEffects.forEach((function(t){return t.onHook2Host()}))},i.switchBuffStatus=function(t,e){var f=this.buffStatus;switch(this.buffStatus=t,c.debug("switchBuffStatus pre="+f+" now="+t),t){case n.ACTIVE:this.context.eventBus.postEvent(new d(this)),this.sendBubbleTips();break;case n.REMOVED:this.destroy(e)}},i.sendBubbleTips=function(){this.templateBuff.bubbleTipsId<=0||this.context.eventBus.postEvent(new h(this.ownerId,this.templateBuff.bubbleTipsId))},i.getBuffId=function(){return this.templateBuff.id},i.canBreak=function(){return 1===this.templateBuff.canBreak},i.maxStack=function(){return this.templateBuff.maxStack},i.visible=function(){return 1===this.templateBuff.visible},i.priority=function(){return this.templateBuff.priority},i.getMuteList=function(){return this.templateBuff.mutes},i.getReplaceRule=function(){return this.templateBuff.replaceRule},i.migrateTo=function(t){for(var e,u=f(this.buffEffects);!(e=u()).done;)for(var n,s=e.value,i=f(t.buffEffects);!(n=i()).done;){var o=n.value;s.migrateTo(o)}},i.addon=function(t){if(this.buffStatus==n.ACTIVE&&this.templateBuff.id==t.getBuffId())for(var e,u=f(this.buffEffects);!(e=u()).done;)for(var s,i=e.value,o=f(t.buffEffects);!(s=o()).done;){var r=s.value;i.addon(r)}},u}(i));u._RF.pop()}}}));

System.register("chunks:///_virtual/BuffEffect_0_Default.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuffEffect.ts"],(function(t){var f,e,n;return{setters:[function(t){f=t.inheritsLoose},function(t){e=t.cclegacy},function(t){n=t.AbstractEffect}],execute:function(){e._RF.push({},"1292dnZkN5P07EbnPHYSOUh","BuffEffect_0_Default",void 0);t("BuffEffect_0_Default",function(t){function e(f,e,n){return t.call(this,f,e,n)||this}return f(e,t),e.prototype.onInit=function(){},e}(n));e._RF.pop()}}}));

System.register("chunks:///_virtual/BuffEffect_10_Resist.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuffEffect.ts"],(function(t){var e,f,n;return{setters:[function(t){e=t.inheritsLoose},function(t){f=t.cclegacy},function(t){n=t.AbstractEffect}],execute:function(){f._RF.push({},"1e819eE6dFCx79PC5uI25YF","BuffEffect_10_Resist",void 0);t("BuffEffect_10_Resist",function(t){function f(e,f,n){return t.call(this,e,f,n)||this}return e(f,t),f.prototype.canResist=function(t){return!1},f}(n));f._RF.pop()}}}));

System.register("chunks:///_virtual/BuffEffect_11_Shield.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuffEffect.ts","./Ongoing_2_Value.ts"],(function(t){var e,n,f,o,i;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){f=t.cclegacy},function(t){o=t.AbstractEffect},function(t){i=t.Ongoing2Value}],execute:function(){f._RF.push({},"4576atmU7tFla7JxceQi8ZK","BuffEffect_11_Shield",void 0);t("BuffEffect_11_Shield",function(t){function f(e,n,f){return t.call(this,e,n,f)||this}return e(f,t),f.prototype.getOngoing2Value=function(){for(var t,e=n(this.disposedConditions);!(t=e()).done;){var f=t.value;if(f instanceof i)return f}return null},f}(o));f._RF.pop()}}}));

System.register("chunks:///_virtual/BuffEffect_13_SharedDamage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuffEffect.ts"],(function(t){var e,f,r;return{setters:[function(t){e=t.inheritsLoose},function(t){f=t.cclegacy},function(t){r=t.AbstractEffect}],execute:function(){f._RF.push({},"58d36cBfFNB2qt7V4+J8qpK","BuffEffect_13_SharedDamage",void 0);t("BuffEffect_13_SharedDamage",function(t){function f(e,f,r){var c;return(c=t.call(this,e,f,r)||this).rate=void 0,c}return e(f,t),f.prototype.getRate=function(){return this.rate},f}(r));f._RF.pop()}}}));

System.register("chunks:///_virtual/BuffEffect_7_CannotCure.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuffEffect.ts"],(function(t){var n,e,f;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){f=t.AbstractEffect}],execute:function(){e._RF.push({},"b2648855qRCDZndWLJXzI7C","BuffEffect_7_CannotCure",void 0);t("BuffEffect_7_CannotCure",function(t){function e(n,e,f){return t.call(this,n,e,f)||this}return n(e,t),e}(f));e._RF.pop()}}}));

System.register("chunks:///_virtual/BuffEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./enums7.ts","./utils3.ts","./index22.ts","./Ongoing_1_Time.ts","./event.ts"],(function(t){var n,i,e,o,s,f,u,c,r,a;return{setters:[function(t){n=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy},function(t){o=t.AbstractEventListener},function(t){s=t.BuffStatus,f=t.DestroyReason},function(t){u=t.ConditionFactory},null,function(t){c=t.Ongoing_1_Time},function(t){r=t.TryActiveBuffEvent,a=t.TryDisposedBuffEvent}],execute:function(){e._RF.push({},"dab1c8JvP1H0p6HscHMOFR8","BuffEffect",void 0);t("AbstractEffect",function(t){function e(n,i,e){var o;return(o=t.call(this)||this).buffBox=void 0,o.templateBuffEffect=void 0,o.context=void 0,o.buffAffectTypes=new Set,o.activeConditions=void 0,o.disposedConditions=void 0,o.buffStatus=s.ATTACHED,o.buffBox=e,o.templateBuffEffect=i,o.context=n,o.activeConditions=u.createEventConditionList(n,o.buffBox.ownerId,i.activeCondition),o.disposedConditions=u.createEventConditionList(n,o.buffBox.ownerId,i.disposedCondition),o}n(e,t);var o=e.prototype;return o.update=function(t){this.activeConditions.forEach((function(n){n.update(t)})),this.disposedConditions.forEach((function(n){n.update(t)})),this.onEvent()},o.init=function(){var t=this;this.buffStatus=s.ATTACHED,this.activeConditions.forEach((function(n){"interested"in n&&t.subscribe(n.interested)})),this.disposedConditions.forEach((function(n){"interested"in n&&t.subscribe(n.interested)})),this.onInit()},o.onInit=function(){},o.destroy=function(t){this.onDestroy(t)},o.onDestroy=function(t){this.activeConditions.length=0,this.disposedConditions.length=0,this.buffBox.context.eventBus.unregister(this)},o.onEvent=function(t){if(this.buffStatus!==s.REMOVED){var n=this.buffBox.ownerId;if(this.context.unitsMod.getBattleUnit(n)){if(this.buffStatus===s.ATTACHED)this.checkAnyConditionMatched(this.activeConditions,t)&&(this.buffStatus=s.ACTIVE,this.context.eventBus.postEvent(new r(this.buffBox)),this.onActive());if(this.buffStatus===s.INACTIVE)this.checkAnyConditionMatched(this.activeConditions,t)||(this.buffStatus=s.INACTIVE,this.onInactive());if(this.buffStatus===s.ACTIVE||this.buffStatus===s.INACTIVE)this.doOnEvent(t),this.checkAnyConditionMatched(this.disposedConditions,t)&&this.disposed(f.REMOVE)}}},o.doOnEvent=function(t){},o.onActive=function(){},o.onInactive=function(){},o.onHook2Host=function(){this.buffBox.context.eventBus.register(this)},o.checkAnyConditionMatched=function(t,n){for(var e,o=i(t);!(e=o()).done;){if(e.value.isMatch(n))return!0}return!1},o.getEffectId=function(){return this.templateBuffEffect.effectId},o.reduceDuration=function(t){this.changeDuration(-t)},o.increaseDuration=function(t){this.changeDuration(t)},o.changeDuration=function(t){var n=this.getOngoingTime();n&&n.changeDuration(t)},o.getOngoingTime=function(){for(var t,n=i(this.disposedConditions);!(t=n()).done;){var e=t.value;if(e instanceof c)return e}return null},o.addon=function(t){this.getEffectId()===t.getEffectId()&&this.onAddon(t)},o.getDuration=function(){var t=this.getOngoingTime();return t?t.getDuration():0},o.migrateTo=function(t){if(t instanceof e&&this.templateBuffEffect.id===t.templateBuffEffect.id){for(var n,o=i(this.disposedConditions);!(n=o()).done;){var s=n.value;if(s instanceof c)for(var f,u=i(t.disposedConditions);!(f=u()).done;){var r=f.value;if(r instanceof c){s.migrateTo(r);break}}}this.onMigrate(t)}},o.onMigrate=function(t){},o.onAddon=function(t){},o.disposed=function(t){this.buffStatus=s.REMOVED,this.buffBox.context.eventBus.postEvent(new a(this.buffBox,t))},o.addDisposedCondition=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var e=0,o=n;e<o.length;e++){var s=o[e];this.disposedConditions.push(s),this.subscribe(s.interested)}},o.addActiveCondition=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var e=0,o=n;e<o.length;e++){var s=o[e];this.activeConditions.push(s),this.subscribe(s.interested)}},o.addBuffAffect=function(){for(var t=this,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];i.forEach((function(n){return t.buffAffectTypes.add(n)}))},o.removeBuffAffect=function(){for(var t=this,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];i.forEach((function(n){return t.buffAffectTypes.delete(n)}))},o.containsAffect=function(t){return this.buffAffectTypes.has(t)},o.postEvent=function(t){this.buffBox.context.eventBus.postEvent(t)},o.getBuffStatus=function(){return this.buffStatus},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/BuffMod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enums7.ts","./index22.ts","./BuffEffect_10_Resist.ts","./event.ts"],(function(e){var t,f,u,n,o,s,a,r,i,c;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){f=e.cclegacy},function(e){u=e.HookResult,n=e.ReplaceRule,o=e.DestroyReason,s=e.BuffStatus},null,function(e){a=e.BuffEffect_10_Resist},function(e){r=e.OnBuffResistEvent,i=e.OnBuffHookEvent,c=e.OnDisposedBuffEvent}],execute:function(){f._RF.push({},"cb8d0gDynxFY5muHiP8UNBS","BuffMod",void 0);e("BuffMod",function(){function e(e){this.owner=void 0,this.buffMap=new Map,this.owner=e}var f=e.prototype;return f.update=function(e){this.buffMap.forEach((function(t){t.update(e)}))},f.init=function(){for(var e,f=this.owner.unitData.equipMap,u=t(f.values());!(e=u()).done;)e.value},f.destroy=function(){},f.addBuff=function(e){for(var f,n=e.getMuteList(),o=t(this.buffMap.values());!(f=o()).done;)for(var s,i=f.value,c=t(n);!(s=c()).done;){if(s.value===i.getBuffId())return!1}for(var v,d=this.owner.context.eventBus,p=this.getBuffEffectList(a),l=t(p);!(v=l()).done;){if(v.value.canResist(e))return d.postEvent(new r(e.ownerId,e.buffPurpose)),!1}return this.tryHook(e)===u.SUCCESS},f.tryHook=function(e){var f=e.getReplaceRule(),s=this.owner.context.eventBus;switch(f){case n.COEXIST:this.buffMap.set(e.id,e),e.onHook2Host(),s.postEvent(new i(e));break;case n.IGNORE_NEW:return u.IGNORE;case n.REPLACE:for(var a,r=t(this.buffMap.values());!(a=r()).done;){var c=a.value;c.getBuffId()===e.getBuffId()&&c.destroy(o.REPLACE)}this.buffMap.set(e.id,e),e.onHook2Host(),s.postEvent(new i(e));break;case n.UPDATE:for(var v,d=t(this.buffMap.values());!(v=d()).done;){v.value.addon(e)}break;case n.ADDON:for(var p,l=t(this.buffMap.values());!(p=l()).done;){p.value.addon(e)}return u.IGNORE}return u.SUCCESS},f.disposedBuff=function(e,t){var f=this.buffMap.get(e);f&&(this.buffMap.delete(e),this.owner.context.eventBus.postEvent(new c(f,t)))},f.getBuffEffectList=function(e){for(var f,u=[],n=t(this.buffMap.values());!(f=n()).done;)for(var o,a=f.value,r=t(a.buffEffects);!(o=r()).done;){var i=o.value;i.getBuffStatus()===s.ACTIVE&&((!e||i instanceof e)&&u.push(i))}return u},f.checkBuffAffect=function(e){for(var f,u=t(this.buffMap.values());!(f=u()).done;)for(var n,o=f.value,a=t(o.buffEffects);!(n=a()).done;){var r=n.value;if(r.getBuffStatus()===s.ACTIVE&&r.containsAffect(e))return!0}return!1},f.getBuffMap=function(){return this.buffMap},e}());f._RF.pop()}}}));

System.register("chunks:///_virtual/CalcMod.ts",["cc","./index30.ts","./DamageResult.ts","./index23.ts","./index9.ts","./constants3.ts","./constants.ts","./enums7.ts"],(function(t){var n,c,e,a,i,u,r;return{setters:[function(t){n=t.cclegacy},null,function(t){c=t.DamageResult},null,null,function(t){e=t.AttrKey},function(t){a=t.MAX_RATE,i=t.DEF_CHANGE_POINT,u=t.DEF_INVERSE},function(t){r=t.BuffAffectType}],execute:function(){n._RF.push({},"f5ba7djw7xAD7XhT68MqJc3","CalcMod",void 0);t("CalcMod",function(){function t(t){this.context=void 0,this.context=t}var n=t.prototype;return n.calcDamage=function(t,n,i){var u=this.context.random,r=t.attrMod,o=n.attrMod,f=o.getFinalAttr(e.CRITICAL_D),s=o.getFinalAttr(e.CRITICAL_P),l=this.checkCritical(t,n,s,u),d=i.param1,A=r.getFinalAttr(d),R=i.param2,h=this.calcDef(t,n),C=A*R/a*(l?1+(f+50)/a:1)*this.calcReductionRate(h);return new c(Math.max(1,C),l)},n.checkCritical=function(t,n,c,e){var i=!1;return(t.buffMod.checkBuffAffect(r.CRITICAL_MUST_BE)||c>0&&e.nextInt(0,a)<c)&&(i=!0),n.buffMod.checkBuffAffect(r.CRITICAL_MUST_NOT_BE)&&(i=!1),i},n.calcDef=function(t,n){return n.attrMod.getFinalAttr(e.ARMOR)},n.calcReductionRate=function(t){var n=1-t/a;return t>=i&&(n=u/t),n},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CollectionUtils.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("singleMap",(function(t,e){return new Map([[t,e]])})),e._RF.push({},"50c80MRqTxPyIuemxq29GuT","CollectionUtils",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Condition_10_UnitDead.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractEventCondition.ts","./index26.ts","./Log.ts"],(function(t){var n,i,e,o;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy},function(t){e=t.AbstractEventCondition},null,function(t){o=t.Log}],execute:function(){i._RF.push({},"d080fvFIxVPz4s+G/MB/5Dw","Condition_10_UnitDead",void 0);t("Condition_10_UnitDead",function(t){function i(n,i,e){var r,s;return(s=t.call(this,n,i)||this).targetId=void 0,s.targetId=null!=(r=e.targetId)?r:0,void 0===s.targetId&&o.error("targetId is missing!!, ownerId, ",s.ownerId),s.subscribe("OnUnitDead"),s}return n(i,t),i.prototype.isMatch=function(t){switch(t.name){case"OnUnitDead":if(t.targetId===this.targetId)return!0}return!1},i}(e));i._RF.pop()}}}));

System.register("chunks:///_virtual/constants.ts",["cc"],(function(E){var A;return{setters:[function(E){A=E.cclegacy}],execute:function(){A._RF.push({},"3a680O/SOpBUKoFvj17QnxW","constants",void 0);E("SEMICOLON",";"),E("COMMA",","),E("ASTERISK","\\*"),E("COLON",":");var _=E("MAX_RATE",100),T=(E("RECOVER_INTERNAL",1),E("DEF_CHANGE_POINT",60));E("DEF_INVERSE",T*T/_),E("ATTACK_RANGE",2),E("CHASE_RANGE",8),E("RETREAT_RANGE",1),E("DECISION_INTERVAL",500),E("BATTLE_MAP_WIDTH",1920),E("BATTLE_MAP_HEIGHT",600),E("BATTLE_MAP_MARGIN",50);A._RF.pop()}}}));

System.register("chunks:///_virtual/constants2.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"8a44ar33QdAi7pPE+JiPhra","constants",void 0);t("FPS",60);c._RF.pop()}}}));

System.register("chunks:///_virtual/constants3.ts",["cc"],(function(_){var E;return{setters:[function(_){E=_.cclegacy}],execute:function(){E._RF.push({},"e3845Mjpc9GWbSxqS21QwOf","constants",void 0);_("AttrKey",{HP:10,HP_V:11,HP_P:12,MP:20,MP_V:21,MP_P:22,HP_LIMIT:30,HP_LIMIT_V:31,HP_LIMIT_P:32,AD:40,AD_V:41,AD_P:42,AP:50,AP_V:51,AP_P:52,ATK_SPEED:60,ATK_SPEED_V:61,ATK_SPEED_P:62,MOVE_SPEED:70,MOVE_SPEED_V:71,MOVE_SPEED_P:72,ARMOR:80,ARMOR_V:81,ARMOR_P:82,RESIST:90,RESIST_V:91,RESIST_P:92,CRITICAL_D:100,CRITICAL_D_V:101,CRITICAL_P:110,CRITICAL_P_V:111,HIT_RATE:120,HIT_RATE_V:121,MISS:130,MISS_V:131,EFFECT_RATE:140,EFFECT_RATE_V:141,EFFECT_MISS:150,EFFECT_MISS_V:151,HP_RECOVER:160,HP_RECOVER_V:161,HP_P_RECOVER:170,HP_P_RECOVER_V:171,ARMOR_PIERCE:200,ARMOR_PIERCE_V:201,ARMOR_P_PIERCE:200,ARMOR_P_PIERCE_V:201,RESIST_PIERCE:210,RESIST_PIERCE_V:211,RESIST_P_PIERCE:210,RESIST_P_PIERCE_V:211,AD_LIFE_STEAL:220,AD_LIFE_STEAL_V:221,AP_LIFE_STEAL:230,AP_LIFE_STEAL_V:231,ALL_LIFE_STEAL:240,ALL_LIFE_STEAL_V:241,HEAL_UP:250,HEAL_UP_V:251,BE_HEAL_UP:260,BE_HEAL_UP_V:261,MP_RECOVER:270,MP_RECOVER_V:271,CDR:280,CDR_V:281});E._RF.pop()}}}));

System.register("chunks:///_virtual/DamageResult.ts",["cc","./index30.ts","./constants.ts"],(function(t){var i,e;return{setters:[function(t){i=t.cclegacy},null,function(t){e=t.MAX_RATE}],execute:function(){i._RF.push({},"a3fe5Lb3w5EbqP0iXGgcRAG","DamageResult",void 0);t("DamageResult",function(){function t(t,i){this.damage=void 0,this.critical=void 0,this.sharedRate=void 0,this.shield=void 0,this.critical=i,this.damage=t}var i=t.prototype;return i.isValid=function(){return this.damage*Math.min(0,e-this.sharedRate)/100-this.shield>0},i.sharedDamage=function(t){return this.sharedRate+=t,this.damage*t/e},i.getFinalDamage=function(){return this.damage*Math.min(0,e-this.sharedRate)/100-this.shield},i.shieldDamage=function(t){var i=t-this.getFinalDamage();return i<=0&&(i=0),this.shield+=t-i,i},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/datas.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"8279d7kgyVBqpMfAnDa54XW","datas",void 0);t("UnitData",(function(){this.id=void 0,this.templateId=1001,this.level=1,this.quality=1,this.equipMap=new Map})),t("EquipData",(function(){this.id=void 0,this.templateId=1001,this.heroId=void 0})),t("TeamData",(function(){this.id=void 0,this.unitMap=new Map})),t("ProductData",(function(){this.index=void 0,this.templateId=void 0,this.count=void 0,this.lock=void 0})),t("ShopData",(function(){this.refreshCount=void 0,this.productMap=new Map})),t("SettingsData",(function(){this.seed=void 0,this.unlimited=void 0,this.endless=void 0,this.chargeMoney=void 0})),t("StageData",(function(){this.group=void 0,this.level=void 0,this.type=void 0,this.templateId=void 0,this.nextLeft=void 0,this.nextRight=void 0,this.pass=void 0})),t("SaveLiteData",(function(){this.name=void 0,this.updateAt=void 0,this.createAt=void 0})),t("ItemData",(function(){this.id=void 0,this.count=void 0})),t("RewardData",(function(){this.itemInfo=void 0,this.heroInfo=void 0,this.equipInfo=void 0}));i._RF.pop()}}}));

System.register("chunks:///_virtual/DrawDebugBorder.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,o,n,a,l,s,c,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,l=t.Color,s=t.Node,c=t.Graphics,u=t.UITransform,h=t.Component}],execute:function(){var g,p,d,f,b,w,D;n._RF.push({},"a5bceLbpAREMaJw8aDT1nbV","DrawDebugBorder",void 0);var v=a.ccclass,y=a.property;t("DrawDebugBorder",(g=v("DrawDebugBorder"),p=y(l),d=y(s),g((w=e((b=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,i(e,"lineColor",w,o(e)),i(e,"target",D,o(e)),e.g=null,e}r(e,t);var n=e.prototype;return n.start=function(){this.g=this.addComponent(c),this.g.lineWidth=2,this.drawRect()},n.update=function(){this.g.clear(),this.drawRect()},n.drawRect=function(){if(this.target){var t=this.target.getComponent(u);if(t){var e=t.width/2,r=t.height/2;this.g.strokeColor=this.lineColor,this.g.moveTo(-e,-r),this.g.lineTo(e,-r),this.g.lineTo(e,r),this.g.lineTo(-e,r),this.g.close(),this.g.stroke()}}},e}(h)).prototype,"lineColor",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(255,0,0,255)}}),D=e(b.prototype,"target",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/enums.ts",["cc"],(function(E){var R;return{setters:[function(E){R=E.cclegacy}],execute:function(){R._RF.push({},"05594XrsYZIPaz3t98AV0U4","enums",void 0);E("AttrUpdateReason",function(E){return E[E.DEF_ATTR_UPDATE_REASON=0]="DEF_ATTR_UPDATE_REASON",E[E.COUNTER_WOUND=1]="COUNTER_WOUND",E[E.SELF_CURE=2]="SELF_CURE",E[E.SHARED_DAMAGE=3]="SHARED_DAMAGE",E}({})),E("DamageSource",function(E){return E[E.ACTION_SOURCE=0]="ACTION_SOURCE",E[E.SPLASH_SOURCE=1]="SPLASH_SOURCE",E[E.SHARED_SOURCE=2]="SHARED_SOURCE",E[E.POISON_SOURCE=3]="POISON_SOURCE",E[E.IGNITE_SOURCE=4]="IGNITE_SOURCE",E[E.COUNTER_WOUND_SOURCE=5]="COUNTER_WOUND_SOURCE",E}({}));R._RF.pop()}}}));

System.register("chunks:///_virtual/enums2.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"062e3134ZpK5o4/OzRjIikf","enums",void 0);e("SkillType",function(e){return e[e.COMMON=1]="COMMON",e[e.ULTIMATE=2]="ULTIMATE",e[e.PASSIVE=3]="PASSIVE",e}({})),e("SkillState",function(e){return e[e.READY=0]="READY",e[e.CASTING=1]="CASTING",e[e.COOLDOWN=2]="COOLDOWN",e[e.INTERRUPTED=3]="INTERRUPTED",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/enums3.ts",["cc"],(function(_){var I;return{setters:[function(_){I=_.cclegacy}],execute:function(){I._RF.push({},"2456dWqJ6BGJIqy18sC4vBU","enums",void 0);_("CampEnum",function(_){return _[_.PLAYER=1]="PLAYER",_[_.ENEMY=2]="ENEMY",_[_.SCENE=3]="SCENE",_}({})),_("TipsType",function(_){return _[_.DEF_TIPS=0]="DEF_TIPS",_[_.MOVE_BAR_UP_TIPS=1]="MOVE_BAR_UP_TIPS",_[_.COOPERATION_TIPS=2]="COOPERATION_TIPS",_[_.INVITE_COOPERATION_TIPS=3]="INVITE_COOPERATION_TIPS",_[_.STRIKE_BACK_TIPS=4]="STRIKE_BACK_TIPS",_[_.VAMPIRE_TIPS=5]="VAMPIRE_TIPS",_[_.CAROM_TIPS=6]="CAROM_TIPS",_[_.SHARED_DAMAGE_TIPS=7]="SHARED_DAMAGE_TIPS",_[_.XXX_TIPS=8]="XXX_TIPS",_[_.COLD_DOWN_UP_TIPS=9]="COLD_DOWN_UP_TIPS",_[_.COLD_DOWN_DOWN_TIPS=10]="COLD_DOWN_DOWN_TIPS",_[_.SHIELD_BREAK_TIPS=11]="SHIELD_BREAK_TIPS",_[_.SHIELD_BLOCK_TIPS=12]="SHIELD_BLOCK_TIPS",_[_.BUFF_RESIST_BAD_TIPS=13]="BUFF_RESIST_BAD_TIPS",_[_.BUFF_RESIST_GOOD_TIPS=14]="BUFF_RESIST_GOOD_TIPS",_[_.IGNORE_ALL_DAMAGE_TIPS=15]="IGNORE_ALL_DAMAGE_TIPS",_[_.IMMORTAL_TIPS=16]="IMMORTAL_TIPS",_[_.DAMAGE_CEILING_TIPS=17]="DAMAGE_CEILING_TIPS",_[_.UNIT_RESPAWN_TIPS=18]="UNIT_RESPAWN_TIPS",_[_.UNIT_FORCE_DEAD_TIPS=19]="UNIT_FORCE_DEAD_TIPS",_[_.UNIT_DEAD_TIPS=20]="UNIT_DEAD_TIPS",_[_.BUFF_MIGRATE_TIPS=21]="BUFF_MIGRATE_TIPS",_[_.BUFF_ADD_TIPS=22]="BUFF_ADD_TIPS",_[_.BUFF_LIFE_UP_TIPS=23]="BUFF_LIFE_UP_TIPS",_[_.BUFF_LIFE_DOWN_TIPS=24]="BUFF_LIFE_DOWN_TIPS",_[_.FORCE_ACTION_TIPS=25]="FORCE_ACTION_TIPS",_[_.BACKLASH_TIPS=26]="BACKLASH_TIPS",_[_.POISON_TIPS=27]="POISON_TIPS",_[_.MOVE_BAR_DOWN_TIPS=28]="MOVE_BAR_DOWN_TIPS",_[_.FORGET_TIPS=29]="FORGET_TIPS",_[_.CANNOT_CURE=30]="CANNOT_CURE",_}({}));I._RF.pop()}}}));

System.register("chunks:///_virtual/enums4.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"515a5Y01NJHLptvxLz6A47I","enums",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/enums5.ts",["cc"],(function(F){var O;return{setters:[function(F){O=F.cclegacy}],execute:function(){O._RF.push({},"60226XMT99A54AT51R6H5w9","enums",void 0);F("ActionEnum",function(F){return F[F.ATTACK=1]="ATTACK",F[F.BUFF=2]="BUFF",F[F.BREAKUP=3]="BREAKUP",F[F.MOVE_BAR=4]="MOVE_BAR",F[F.CALLING=5]="CALLING",F[F.COOLDOWN=6]="COOLDOWN",F[F.CURE=7]="CURE",F[F.DIFFUSION=8]="DIFFUSION",F[F.RESPAWN=9]="RESPAWN",F[F.FORCE_ACTION=10]="FORCE_ACTION",F[F.MIGRATE_BUFF=11]="MIGRATE_BUFF",F[F.XXX12=12]="XXX12",F[F.MOD_BUFF_LIFE=13]="MOD_BUFF_LIFE",F[F.FORCE_DEAD=14]="FORCE_DEAD",F[F.XXX15=15]="XXX15",F[F.POISON_IGNITE=16]="POISON_IGNITE",F}({}));O._RF.pop()}}}));

System.register("chunks:///_virtual/enums6.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"6d3572dfxlCbaOBfRA/C0yk","enums",void 0);var n=t("default",function(t){return t[t.TRACK=1]="TRACK",t[t.LINEAR=2]="LINEAR",t}(n||{}));t("ProjectileState",function(t){return t[t.CREATED=0]="CREATED",t[t.FLYING=1]="FLYING",t[t.HITTING=2]="HITTING",t[t.DESTROYED=3]="DESTROYED",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/enums7.ts",["cc"],(function(E){var A;return{setters:[function(E){A=E.cclegacy}],execute:function(){A._RF.push({},"93ee2Z03oJABatmQiuZ6z2F","enums",void 0);E("DisposedRule",function(E){return E[E.ALL=0]="ALL",E[E.ANY=1]="ANY",E}({})),E("BuffPurpose",function(E){return E[E.NEUTRAL=0]="NEUTRAL",E[E.GOOD=1]="GOOD",E[E.BAD=2]="BAD",E}({})),E("BuffStatus",function(E){return E[E.ATTACHED=0]="ATTACHED",E[E.ACTIVE=1]="ACTIVE",E[E.INACTIVE=2]="INACTIVE",E[E.REMOVED=3]="REMOVED",E}({})),E("BuffAffectType",function(E){return E[E.SKIP_ACTION=0]="SKIP_ACTION",E[E.ONLY_COMMON_ATTACK=1]="ONLY_COMMON_ATTACK",E[E.IGNORE_ALL_DAMAGE=2]="IGNORE_ALL_DAMAGE",E[E.CONFUSE=3]="CONFUSE",E[E.SPOOF=4]="SPOOF",E[E.ENFORCE_REAL_DAMAGE=5]="ENFORCE_REAL_DAMAGE",E[E.CRITICAL_MUST_BE=6]="CRITICAL_MUST_BE",E[E.CRITICAL_MUST_NOT_BE=7]="CRITICAL_MUST_NOT_BE",E[E.IMMORTAL=8]="IMMORTAL",E[E.IGNORE_MOVE_BAR_FORWARD=9]="IGNORE_MOVE_BAR_FORWARD",E[E.IGNORE_MOVE_BAR_BACKWARD=10]="IGNORE_MOVE_BAR_BACKWARD",E[E.FORGET=11]="FORGET",E}({})),E("DestroyReason",function(E){return E[E.REMOVE=0]="REMOVE",E[E.BREAKUP=1]="BREAKUP",E[E.REPLACE=2]="REPLACE",E[E.TRANSFER=3]="TRANSFER",E[E.HOST_DEAD=4]="HOST_DEAD",E}({})),E("HookResult",function(E){return E[E.SUCCESS=0]="SUCCESS",E[E.FAILED=1]="FAILED",E[E.IGNORE=2]="IGNORE",E}({})),E("ReplaceRule",function(E){return E[E.COEXIST=0]="COEXIST",E[E.IGNORE_NEW=1]="IGNORE_NEW",E[E.REPLACE=2]="REPLACE",E[E.UPDATE=3]="UPDATE",E[E.ADDON=4]="ADDON",E}({}));A._RF.pop()}}}));

System.register("chunks:///_virtual/enums8.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"a6a0f7SiwJFdKyMszeu8eW7","enums",void 0);e("UnitStateEnum",function(e){return e[e.BORN=1]="BORN",e[e.IDLE=2]="IDLE",e[e.CHASE=3]="CHASE",e[e.ACTION=4]="ACTION",e[e.FLEE=5]="FLEE",e[e.WANDER=6]="WANDER",e[e.RANDOM_MOVE=7]="RANDOM_MOVE",e[e.DEAD=8]="DEAD",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Event_0_Direct.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractEventCondition.ts"],(function(t){var n,e,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){o=t.AbstractEventCondition}],execute:function(){e._RF.push({},"e0abd3I+CVHqYhxzN1HKUGs","Event_0_Direct",void 0);t("Event_0_Direct",function(t){function e(n,e){var o;return(o=t.call(this,n,e)||this).subscribe("OnBuffHookEvent"),o}return n(e,t),e.prototype.isMatch=function(t){if("OnBuffHookEvent"===t.name&&t.buffBox.ownerId===this.ownerId)return!0;return!1},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/event.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Event2.ts","./enums.ts"],(function(t){var e,n,r,o,i,a,u;return{setters:[function(t){e=t.inheritsLoose,n=t.createClass,r=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy},function(t){i=t.AbstractOnEvent,a=t.AbstractTryEvent},function(t){u=t.AttrUpdateReason}],execute:function(){o._RF.push({},"9a553tYBaBAMK/4/CWWNV4X","event",void 0);t("OnAttributeUpdateEvent",function(t){function r(e,n,r,o,i,a){var d;return(d=t.call(this,"OnAttributeUpdateEvent")||this).generateHeroId=void 0,d.targetHeroId=void 0,d.attrKey=void 0,d.oldValue=void 0,d.delta=void 0,d.add=void 0,d._attrUpdateReason=u.DEF_ATTR_UPDATE_REASON,d.generateHeroId=e,d.targetHeroId=n,d.attrKey=r,d.oldValue=o,d.delta=i,d.add=a,d}return e(r,t),n(r,[{key:"attrUpdateReason",get:function(){return this._attrUpdateReason},set:function(t){this._attrUpdateReason=t}}]),r}(i)),t("OnReadyToSubHpEvent",function(t){function n(e,n,r){var o;return(o=t.call(this,"OnReadyToSubHpEvent")||this).generatorId=void 0,o.damageMap=void 0,o.damageSource=void 0,o.generatorId=e,o.damageMap=n,o.damageSource=r,o}return e(n,t),n.prototype.isCritical=function(){for(var t,e=r(this.damageMap.values());!(t=e()).done;){if(t.value.critical)return!0}return!1},n}(i)),t("OnActionEvent",function(t){function n(e){var n;return(n=t.call(this,"OnActionEvent")||this).generatorId=void 0,n.generatorId=e,n}return e(n,t),n}(i)),t("OnUnitDeadEvent",function(t){function n(e){var n;return(n=t.call(this,"OnUnitDeadEvent")||this).targetId=void 0,n.targetId=e,n}return e(n,t),n}(i)),t("OnBuffHookEvent",function(t){function n(e){var n;return(n=t.call(this,"OnBuffHookEvent")||this).buffBox=void 0,n.buffBox=e,n}return e(n,t),n}(i)),t("TryDisposedBuffEvent",function(t){function n(e,n){var r;return(r=t.call(this,"TryDisposedBuffEvent")||this).buffBox=void 0,r.destroyReason=void 0,r.buffBox=e,r.destroyReason=n,r}return e(n,t),n}(a)),t("OnDisposedBuffEvent",function(t){function n(e,n){var r;return(r=t.call(this,"OnDisposedBuffEvent")||this).buffBox=void 0,r.destroyReason=void 0,r.buffBox=e,r.destroyReason=n,r}return e(n,t),n}(i)),t("TryActiveBuffEvent",function(t){function n(e){var n;return(n=t.call(this,"TryActiveBuffEvent")||this).buffBox=void 0,n.buffBox=e,n}return e(n,t),n}(a)),t("OnBuffActiveEvent",function(t){function n(e){var n;return(n=t.call(this,"OnBuffActiveEvent")||this).buffBox=void 0,n.buffBox=e,n}return e(n,t),n}(i)),t("OnBuffResistEvent",function(t){function n(e,n){var r;return(r=t.call(this,"OnBuffResistEvent")||this).ownerId=void 0,r.buffPurpose=void 0,r.ownerId=e,r.buffPurpose=n,r}return e(n,t),n}(i)),t("OnForceDeadEvent",function(t){function n(e){var n;return(n=t.call(this,"OnForceDeadEvent")||this).deadList=void 0,n.deadList=e,n}return e(n,t),n}(i)),t("OnDamageEvent",function(t){function n(e,n,r){var o;return(o=t.call(this,"OnDamageEvent")||this).generatorId=void 0,o.damageMap=void 0,o.damageSource=void 0,o.generatorId=e,o.damageMap=n,o.damageSource=r,o}return e(n,t),n}(i)),t("OnReadyToAddHpEvent",function(t){function n(e,n,r){var o;return(o=t.call(this,"OnReadyToAddHpEvent")||this).generatorId=void 0,o.targetId=void 0,o.value=void 0,o.generatorId=e,o.targetId=n,o.value=r,o}return e(n,t),n}(i)),t("OnShieldBreakEvent",function(t){function n(){return t.call(this,"OnShieldBreakEvent")||this}return e(n,t),n}(i)),t("OnBubbleTipsEvent",function(t){function n(e,n){var r;return(r=t.call(this,"OnBubbleTipsEvent")||this).ownerId=void 0,r.bubbleTipsId=void 0,r.ownerId=e,r.bubbleTipsId=n,r}return e(n,t),n}(i)),t("OnBuffBreakupEvent",function(t){function n(e,n,r){var o;return(o=t.call(this,"OnBuffBreakupEvent")||this).generatorId=void 0,o.targetId=void 0,o.breakupList=void 0,o.generatorId=e,o.targetId=n,o.breakupList=r,o}return e(n,t),n}(i));o._RF.pop()}}}));

System.register("chunks:///_virtual/Event2.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"1a0aaW5TJJCuY3/OFyzLycM","Event",void 0);t("AbstractTryEvent",function(){function t(t){this.name=void 0,this.canceled=void 0,this.name=t}var n=t.prototype;return n.cancel=function(){this.canceled=!0},n.isCanceled=function(){return this.canceled},t}()),t("AbstractOnEvent",(function(t){this.name=void 0,this.name=t}));n._RF.pop()}}}));

System.register("chunks:///_virtual/EventBus.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index26.ts","./Log.ts"],(function(e){var n,t,r;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy},null,function(e){r=e.Log}],execute:function(){t._RF.push({},"ffa53St+/ZAsoRT1EBdKnVA","EventBus",void 0);var i=e("EventBus",function(){function e(){this.listenersMap=new Map,this.pendingRemove=new Map}var t=e.prototype;return t.postEvent=function(e){return this.doPostEvent(e)},t.doPostEvent=function(t){if(e.DEPTH>=e.MAX_DEPTH)return r.error("事件异常, 超出最大深度, event=",t),!0;e.DEPTH++;var i=t.name,s=this.listenersMap.get(i);if(!s)return e.DEPTH--,!1;try{if("function"==typeof t.isCanceled&&"function"==typeof t.cancel)for(var o,a=t,u=n(s);!(o=u()).done;){var v=o.value;if(!this.isPendingRemove(i,v)&&(v.onEvent(a),a.isCanceled()))return!0}else for(var f,l=n(s);!(f=l()).done;){var c=f.value;this.isPendingRemove(i,c)||c.onEvent(t)}}catch(e){return r.error("事件异常, event=",t,"listeners=",s,e),!0}finally{e.DEPTH--,0===e.DEPTH&&this.flushPendingRemove()}return!1},t.register=function(e){if(Array.isArray(e))for(var t,r=n(e);!(t=r()).done;){var i=t.value;this.register(i)}else for(var s,o=n(e.interested);!(s=o()).done;){var a,u=s.value,v=null!=(a=this.listenersMap.get(u))?a:[];v.push(e),v.sort((function(e,n){return e.eventPriority-n.eventPriority})),this.listenersMap.set(u,v)}},t.unregister=function(e){for(var t,r=n(e.interested);!(t=r()).done;){var i,s=t.value;if(this.listenersMap.get(s)){var o=null!=(i=this.pendingRemove.get(s))?i:new Set;o.add(e),this.pendingRemove.set(s,o)}}},t.isPendingRemove=function(e,n){var t=this.pendingRemove.get(e);return!!t&&t.has(n)},t.flushPendingRemove=function(){for(var e,t=this,r=function(){var n=e.value,r=n[0],i=n[1],s=t.listenersMap.get(r);s&&t.listenersMap.set(r,s.filter((function(e){return!i.has(e)})))},i=n(this.pendingRemove.entries());!(e=i()).done;)r();this.pendingRemove.clear()},e}());i.MAX_DEPTH=100,i.DEPTH=0,t._RF.pop()}}}));

System.register("chunks:///_virtual/EventListener.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"57f97y4hwBA7Lw3LRfWkJrt","EventListener",void 0);e("AbstractEventListener",function(){function e(e){void 0===e&&(e=0),this.interested=new Set,this.eventPriority=void 0,this.eventPriority=e}return e.prototype.subscribe=function(e){if("string"==typeof e)this.interested.add(e);else for(var r,n=t(e);!(r=n()).done;){var i=r.value;this.interested.add(i)}},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Exceptions.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,r;return{setters:[function(t){n=t.inheritsLoose,e=t.wrapNativeSuper},function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"0a60d6p+KNLlqT9ncNm+M2e","Exceptions",void 0);t("TemplateException",function(t){function e(n){var e;return(e=t.call(this,n)||this).name="TemplateException",e}return n(e,t),e}(e(Error))),t("InitException",function(t){function e(n){var e;return(e=t.call(this,n)||this).name="InitException",e}return n(e,t),e}(e(Error)));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts","./index21.ts","./index26.ts","./index.ts","./index16.ts","./Log.ts","./ResourceManager.ts","./TemplateManager.ts","./Exceptions.ts"],(function(n){var e,t,r,a,i,s,u,o;return{setters:[function(n){e=n.asyncToGenerator,t=n.regeneratorRuntime},function(n){r=n.cclegacy},function(n){a=n.Player},null,null,null,null,function(n){i=n.Log},function(n){s=n.ResourceManager},function(n){u=n.TemplateManager},function(n){o=n.InitException}],execute:function(){r._RF.push({},"68621WIwZpKsYBfdW2JHJhe","GameManager",void 0),n("GameManager",function(){function n(){this.player=void 0}return n.inst=function(){return this._instance||(this._instance=new n),this._instance},n.prototype.init=function(){var n=e(t().mark((function n(){return t().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==this.player){n.next=2;break}throw new o("玩家不为空, 不能重复初始化");case 2:return i.info("GameManager.init start!"),this.player=new a("1"),n.next=6,u.inst().load();case 6:if(n.sent){n.next=10;break}return i.error("静态表加载失败"),n.abrupt("return",!1);case 10:return n.next=12,s.inst().loadAllResources();case 12:if(n.sent){n.next=16;break}return i.error("加载资源失败"),n.abrupt("return",!1);case 16:return i.info("GameManager.init finished!"),n.abrupt("return",!0);case 18:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),n}())._instance=void 0,r._RF.pop()}}}));

System.register("chunks:///_virtual/GmManager.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"a4b6fmRVB9J7oqzlT9kPqro","GmManager",void 0),n("GmManager",function(){function n(){}n.inst=function(){return this._instance||(this._instance=new n,this._instance.init()),this._instance};var t=n.prototype;return t.init=function(){window.gm=this},t.cmd=function(n){n.trim().split(/\s+/).shift()},t.keyCmd=function(n){},n}())._instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/GmPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,o,i,c;return{setters:[function(n){e=n.inheritsLoose},function(n){t=n.cclegacy,o=n._decorator,i=n.KeyCode,c=n.Component}],execute:function(){var r;t._RF.push({},"5fb98IS2QFIAo0FFa2MVNxv","GmPanel",void 0);var u=o.ccclass;o.property,n("GmPanel",u("GmPanel")(r=function(n){function t(){return n.apply(this,arguments)||this}e(t,n);var o=t.prototype;return o.init=function(){},o.onDestroy=function(){},o.onKeyDown=function(n){},o.onKeyUp=function(n){n==i.KEY_G&&this.togglePanel()},o.togglePanel=function(){this.node.active=!this.node.active},t}(c))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/Helpers.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TemplateHelper.ts","./TemplateManager.ts"],(function(t){var e,n,r,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){r=t.TemplateHelper},function(t){c=t.templateHelper}],execute:function(){var i,o,u,l,f,p,s;n._RF.push({},"bf28dhf7MVP3pCmMEAStRQX","Helpers",void 0);t("ConstHelper",c(i=function(t){function n(){return t.call(this,"TemplateConst")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||i),t("BuffEffectHelper",c(o=function(t){function n(){return t.call(this,"TemplateBuffEffect")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||o),t("BuffHelper",c(u=function(t){function n(){return t.call(this,"TemplateBuff")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||u),t("ProjectileHelper",c(l=function(t){function n(){return t.call(this,"TemplateProjectile")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||l),t("UnitHelper",c(f=function(t){function n(){return t.call(this,"TemplateUnit")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||f),t("ImpactHelper",c(p=function(t){function n(){return t.call(this,"TemplateImpact")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||p),t("SkillHelper",c(s=function(t){function n(){return t.call(this,"TemplateSkill")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/HexagonLayout.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,a,n,i,o,s,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,s=t.v3,u=t.tween,c=t.Component}],execute:function(){var l,p,f,h;i._RF.push({},"5e6cfI5tXNFoJjx+P8+0d+5","HexagonLayout",void 0);var g=o.ccclass,y=o.property;t("HexagonLayout",g("HexagonLayout")((f=e((p=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,a(e,"radius",f,n(e)),a(e,"animateDuration",h,n(e)),e}r(e,t);var i=e.prototype;return i.start=function(){this.arrangeIcons()},i.arrangeIcons=function(){var t=this.node.children;if(6===t.length)for(var e=s(0,0,0),r=0;r<6;r++){var a=t[r],n=(60*r-30)*Math.PI/180,i=e.x+this.radius*Math.sin(n),o=e.y+this.radius*Math.cos(n);u(a).to(this.animateDuration,{position:s(i,o,0),scale:s(1,1,1)},{easing:"backOut"}).start()}else Log.error("需要正好6个图标")},e}(c)).prototype,"radius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 150}}),h=e(p.prototype,"animateDuration",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),l=p))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/HoverButton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,n,i,r,a,c,s,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.Vec3,s=e.Node,l=e.Component}],execute:function(){var u,p,h;r._RF.push({},"edca6GWGIVNOJ7i0RlnT+C/","HoverButton",void 0);var v=a.ccclass,d=a.property;e("HoverButton",v("HoverButton")((h=t((p=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"scaleFactor",h,i(t)),t.originalScale=new c,t}o(t,e);var r=t.prototype;return r.onLoad=function(){this.originalScale.set(this.node.scale),this.node.on(s.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.node.on(s.EventType.MOUSE_LEAVE,this.onMouseLeave,this)},r.onMouseEnter=function(e){this.node.setScale(this.originalScale.clone().multiplyScalar(this.scaleFactor))},r.onMouseLeave=function(e){this.node.setScale(this.originalScale)},t}(l)).prototype,"scaleFactor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.1}}),u=p))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/Impact_0_XXX.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractImpact.ts"],(function(t){var c,n,e;return{setters:[function(t){c=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.AbstractImpact}],execute:function(){n._RF.push({},"319ef+ubjVN47Fpe30zyPG9","Impact_0_XXX",void 0);t("Impact_0_XXX",function(t){function n(c,n,e,r,o,u){return t.call(this,c,e,r,n,o,u)||this}return c(n,t),n.prototype.onTrigger=function(){},n}(e));n._RF.pop()}}}));

System.register("chunks:///_virtual/Impact_1_Attack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractImpact.ts","./index22.ts","./enums.ts","./event.ts"],(function(t){var e,n,o,c,s,a,i;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy},function(t){c=t.AbstractImpact},null,function(t){s=t.DamageSource},function(t){a=t.OnReadyToSubHpEvent,i=t.OnActionEvent}],execute:function(){o._RF.push({},"55efeb9MbRNwbfY0GgkbxJl","Impact_1_Attack",void 0);t("Impact_1_Attack",function(t){function o(e,n,o,c,s,a){return t.call(this,e,o,c,n,s,a)||this}return e(o,t),o.prototype.onTrigger=function(){for(var t,e=this.context.unitsMod.getBattleUnit(this.generatorId),o=new Map,c=n(this.targetIds);!(t=c()).done;){var r=t.value,u=this.context.unitsMod.getBattleUnit(r);if(u){var l=this.context.calcMod.calcDamage(e,u,this.templateImpact);o.set(r,l)}}0!==o.size&&(this.postEvent(new a(this.generatorId,o,s.ACTION_SOURCE)),this.postEvent(new i(this.generatorId)))},o}(c));o._RF.pop()}}}));

System.register("chunks:///_virtual/Impact_2_Projectile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractImpact.ts","./index22.ts","./event.ts"],(function(t){var e,n,r,o,c;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){r=t.cclegacy},function(t){o=t.AbstractImpact},null,function(t){c=t.OnActionEvent}],execute:function(){r._RF.push({},"03c9cXTtzlMWbF0lrhNe0dJ","Impact_2_Projectile",void 0);t("Impact_2_Projectile",function(t){function r(e,n,r,o,c,i){return t.call(this,e,r,o,n,c,i)||this}return e(r,t),r.prototype.onTrigger=function(){this.context.unitsMod.getBattleUnit(this.generatorId);for(var t,e=n(this.targetIds);!(t=e()).done;){var r=t.value,o=this.context.unitsMod.getBattleUnit(r);o&&this.context.projectileMod.createProjectile(this.templateImpact.param1,this.generatorId,o)}this.postEvent(new c(this.generatorId))},r}(o));r._RF.pop()}}}));

System.register("chunks:///_virtual/Impact_3_HookBuff.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractImpact.ts","./index32.ts","./EventListener.ts","./utils3.ts","./index26.ts","./TemplateManager.ts","./Helpers.ts","./Log.ts"],(function(t){var e,o,n,r,f,i,s,u,a;return{setters:[function(t){e=t.inheritsLoose,o=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy},function(t){r=t.AbstractImpact},null,function(t){f=t.AbstractEventListener},function(t){i=t.BuffFactory},null,function(t){s=t.TemplateManager},function(t){u=t.BuffHelper},function(t){a=t.Log}],execute:function(){n._RF.push({},"76ddbyIbdJDwKHo6AcS4p62","Impact_3_HookBuff",void 0);t("Impact_3_HookBuff",function(t){function n(e,o,n,r,f,i){return t.call(this,e,n,r,o,f,i)||this}e(n,t);var r=n.prototype;return r.onTrigger=function(){for(var t,e=o(this.targetIds);!(t=e()).done;){var n=t.value,r=this.context.unitsMod.getBattleUnit(n);r&&this.hookBuff(r,this.generatorId,this.templateImpact.param1)}},r.hookBuff=function(t,e,o){var n=this.context.eventBus,r=s.inst().helper(u).getTemplate(o);if(r){var c=i.createBuffBox(this.context,t.id,e,r);if(c)t.buffMod.addBuff(c)&&c instanceof f&&n.register(c)}else a.error("Impact_3_HookBuff hookBuff error: no template buff found for id ",o)},n}(r));n._RF.pop()}}}));

System.register("chunks:///_virtual/Impact_4_Breakup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index23.ts","./AbstractImpact.ts","./index22.ts","./enums7.ts","./event.ts"],(function(t){var e,r,n,a,o,s,p;return{setters:[function(t){e=t.inheritsLoose,r=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy},null,function(t){a=t.AbstractImpact},null,function(t){o=t.DestroyReason,s=t.BuffPurpose},function(t){p=t.OnBuffBreakupEvent}],execute:function(){n._RF.push({},"12879Yl2o1InbO1566+LJuy","Impact_4_Breakup",void 0);var u=t("Impact_4_Breakup",function(t){function n(e,r,n,a,o,p){var u;return(u=t.call(this,e,n,a,r,o,p)||this).breakUpType=0,u.purpose=s.NEUTRAL,u.num=0,u}e(n,t);var a=n.prototype;return a.onInit=function(){this.breakUpType=this.templateImpact.param1,this.purpose=this.templateImpact.param2,this.num=this.templateImpact.param3},a.onTrigger=function(){for(var t,e=r(this.targetIds);!(t=e()).done;){var a=t.value,s=[],u=this.context.unitsMod.getBattleUnit(a).buffMod,i=[].concat(u.buffMap.values());if(this.breakUpType===n.BREAK_UP_BY_CREATE)i.sort((function(t,e){return t.getBuffId()-e.getBuffId()}));else if(this.breakUpType===n.BREAK_UP_BY_RANDOM)for(var c=i.length-1;c>0;c--){var f=Math.floor(Math.random()*(c+1)),l=i[c];i[c]=i[f],i[f]=l}else{if(this.breakUpType!==n.BREAK_UP_BY_PRIORITY)return void console.error("未知驱散类型 breakUpType="+this.breakUpType);i.sort((function(t,e){return t.priority()-e.priority()}))}for(var h,_=r(i);!(h=_()).done;){var B=h.value;if(B.canBreak()&&(B.buffPurpose===this.purpose&&(s.push(B),s.length>=this.num)))break}for(var m=0,v=s;m<v.length;m++){v[m].destroy(o.BREAKUP)}this.postEvent(new p(this.generatorId,a,s))}},n}(a));u.BREAK_UP_BY_PRIORITY=1,u.BREAK_UP_BY_RANDOM=2,u.BREAK_UP_BY_CREATE=3,n._RF.pop()}}}));

System.register("chunks:///_virtual/Impact_5_MP.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractImpact.ts"],(function(t){var c,n,e;return{setters:[function(t){c=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.AbstractImpact}],execute:function(){n._RF.push({},"89ccerv7yJMz5LL0WZGRY14","Impact_5_MP",void 0);t("Impact_5_MP",function(t){function n(c,n,e,r,o,i){return t.call(this,c,e,r,n,o,i)||this}return c(n,t),n.prototype.onTrigger=function(){},n}(e));n._RF.pop()}}}));

System.register("chunks:///_virtual/Impact_7_Cure.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractImpact.ts"],(function(t){var c,n,e;return{setters:[function(t){c=t.inheritsLoose},function(t){n=t.cclegacy},function(t){e=t.AbstractImpact}],execute:function(){n._RF.push({},"daab3+o5b9LhapVXwD4P2l+","Impact_7_Cure",void 0);t("Impact_6_Cure",function(t){function n(c,n,e,r,u,o){return t.call(this,c,e,r,n,u,o)||this}return c(n,t),n.prototype.onTrigger=function(){},n}(e));n._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc","./Helpers.ts","./interfaces9.ts","./TemplateHelper.ts","./TemplateManager.ts","./Templates.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},function(t){var l={};l.BuffEffectHelper=t.BuffEffectHelper,l.BuffHelper=t.BuffHelper,l.ConstHelper=t.ConstHelper,l.ImpactHelper=t.ImpactHelper,l.ProjectileHelper=t.ProjectileHelper,l.SkillHelper=t.SkillHelper,l.UnitHelper=t.UnitHelper,e(l)},null,function(t){e("TemplateHelper",t.TemplateHelper)},function(t){var l={};l.TemplateManager=t.TemplateManager,l.templateHelper=t.templateHelper,e(l)},function(t){var l={};l.TemplateAnimation=t.TemplateAnimation,l.TemplateAward=t.TemplateAward,l.TemplateBattle=t.TemplateBattle,l.TemplateBuff=t.TemplateBuff,l.TemplateBuffEffect=t.TemplateBuffEffect,l.TemplateConst=t.TemplateConst,l.TemplateEquip=t.TemplateEquip,l.TemplateImpact=t.TemplateImpact,l.TemplateItem=t.TemplateItem,l.TemplateLabel=t.TemplateLabel,l.TemplateProduct=t.TemplateProduct,l.TemplateProjectile=t.TemplateProjectile,l.TemplateRoutine=t.TemplateRoutine,l.TemplateSkill=t.TemplateSkill,l.TemplateSuit=t.TemplateSuit,l.TemplateTips=t.TemplateTips,l.TemplateUnit=t.TemplateUnit,e(l)}],execute:function(){t._RF.push({},"0b8bf3HcDlGtLpri7S31v5c","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index10.ts",["cc","./index4.ts","./index29.ts","./index9.ts","./BattleManager.ts","./index23.ts","./index27.ts","./index30.ts","./index22.ts","./index14.ts","./index17.ts","./index19.ts","./index2.ts","./index11.ts","./index18.ts","./BehaviorTreeMod.ts","./enums8.ts","./StateMachineMod.ts","./AnimMod.ts","./AttrMod.ts","./constants3.ts","./BuffBox.ts","./BuffMod.ts","./AbstractCondition.ts","./AbstractEventCondition.ts","./AbstractOngoingCondition.ts","./Condition_10_UnitDead.ts","./Event_0_Direct.ts","./Ongoing_1_Time.ts","./Ongoing_2_Value.ts","./BuffEffect.ts","./BuffEffect_0_Default.ts","./BuffEffect_10_Resist.ts","./BuffEffect_11_Shield.ts","./BuffEffect_13_SharedDamage.ts","./BuffEffect_7_CannotCure.ts","./enums7.ts","./utils3.ts","./CalcMod.ts","./DamageResult.ts","./BattleContext.ts","./constants.ts","./enums3.ts","./event.ts","./LifecycleMod.ts","./MovementMod.ts","./AbstractProjectile.ts","./enums6.ts","./LinearProjectile.ts","./ProjectileMod.ts","./TrackingProjectile.ts","./enums2.ts","./SkillMod.ts","./UnitSkill.ts","./utils.ts","./StatsMod.ts","./BattleUnit.ts","./UnitsMod.ts"],(function(t){var n;return{setters:[function(t){n=t.cclegacy},null,null,null,function(n){t("BattleManager",n.BattleManager)},null,null,null,null,null,null,null,null,null,null,function(n){t("BehaviorTreeMod",n.BehaviorTreeMod)},function(n){t("UnitStateEnum",n.UnitStateEnum)},function(n){var e={};e.ActionState=n.ActionState,e.BasicState=n.BasicState,e.BornState=n.BornState,e.ChaseState=n.ChaseState,e.DeadState=n.DeadState,e.FleeState=n.FleeState,e.IdleState=n.IdleState,e.StateMachineMod=n.StateMachineMod,e.WanderState=n.WanderState,t(e)},function(n){t("AnimMod",n.AnimMod)},function(n){t("AttrMod",n.AttrMod)},function(n){t("AttrKey",n.AttrKey)},function(n){t("BuffBox",n.BuffBox)},function(n){t("BuffMod",n.BuffMod)},function(n){t("AbstractCondition",n.AbstractCondition)},function(n){t("AbstractEventCondition",n.AbstractEventCondition)},function(n){t("AbstractOngoingCondition",n.AbstractOngoingCondition)},function(n){t("Condition_10_UnitDead",n.Condition_10_UnitDead)},function(n){t("Event_0_Direct",n.Event_0_Direct)},function(n){t("Ongoing_1_Time",n.Ongoing_1_Time)},function(n){t("Ongoing2Value",n.Ongoing2Value)},function(n){t("AbstractEffect",n.AbstractEffect)},function(n){t("BuffEffect_0_Default",n.BuffEffect_0_Default)},function(n){t("BuffEffect_10_Resist",n.BuffEffect_10_Resist)},function(n){t("BuffEffect_11_Shield",n.BuffEffect_11_Shield)},function(n){t("BuffEffect_13_SharedDamage",n.BuffEffect_13_SharedDamage)},function(n){t("BuffEffect_7_CannotCure",n.BuffEffect_7_CannotCure)},function(n){var e={};e.BuffAffectType=n.BuffAffectType,e.BuffPurpose=n.BuffPurpose,e.BuffStatus=n.BuffStatus,e.DestroyReason=n.DestroyReason,e.DisposedRule=n.DisposedRule,e.HookResult=n.HookResult,e.ReplaceRule=n.ReplaceRule,t(e)},function(n){var e={};e.BuffFactory=n.BuffFactory,e.ConditionFactory=n.ConditionFactory,t(e)},function(n){t("CalcMod",n.CalcMod)},function(n){t("DamageResult",n.DamageResult)},function(n){t("BattleContext",n.BattleContext)},function(n){var e={};e.ASTERISK=n.ASTERISK,e.ATTACK_RANGE=n.ATTACK_RANGE,e.BATTLE_MAP_HEIGHT=n.BATTLE_MAP_HEIGHT,e.BATTLE_MAP_MARGIN=n.BATTLE_MAP_MARGIN,e.BATTLE_MAP_WIDTH=n.BATTLE_MAP_WIDTH,e.CHASE_RANGE=n.CHASE_RANGE,e.COLON=n.COLON,e.COMMA=n.COMMA,e.DECISION_INTERVAL=n.DECISION_INTERVAL,e.DEF_CHANGE_POINT=n.DEF_CHANGE_POINT,e.DEF_INVERSE=n.DEF_INVERSE,e.MAX_RATE=n.MAX_RATE,e.RECOVER_INTERNAL=n.RECOVER_INTERNAL,e.RETREAT_RANGE=n.RETREAT_RANGE,e.SEMICOLON=n.SEMICOLON,t(e)},function(n){var e={};e.CampEnum=n.CampEnum,e.TipsType=n.TipsType,t(e)},function(n){var e={};e.OnActionEvent=n.OnActionEvent,e.OnAttributeUpdateEvent=n.OnAttributeUpdateEvent,e.OnBubbleTipsEvent=n.OnBubbleTipsEvent,e.OnBuffActiveEvent=n.OnBuffActiveEvent,e.OnBuffBreakupEvent=n.OnBuffBreakupEvent,e.OnBuffHookEvent=n.OnBuffHookEvent,e.OnBuffResistEvent=n.OnBuffResistEvent,e.OnDamageEvent=n.OnDamageEvent,e.OnDisposedBuffEvent=n.OnDisposedBuffEvent,e.OnForceDeadEvent=n.OnForceDeadEvent,e.OnReadyToAddHpEvent=n.OnReadyToAddHpEvent,e.OnReadyToSubHpEvent=n.OnReadyToSubHpEvent,e.OnShieldBreakEvent=n.OnShieldBreakEvent,e.OnUnitDeadEvent=n.OnUnitDeadEvent,e.TryActiveBuffEvent=n.TryActiveBuffEvent,e.TryDisposedBuffEvent=n.TryDisposedBuffEvent,t(e)},function(n){t("LifecycleMod",n.LifecycleMod)},function(n){t("MovementMod",n.MovementMod)},function(n){t("AbstractProjectile",n.AbstractProjectile)},function(n){t("ProjectileState",n.ProjectileState)},function(n){t("LinearProjectile",n.LinearProjectile)},function(n){t("ProjectileMod",n.ProjectileMod)},function(n){t("TrackingProjectile",n.TrackingProjectile)},function(n){var e={};e.SkillState=n.SkillState,e.SkillType=n.SkillType,t(e)},function(n){t("SkillMod",n.SkillMod)},function(n){var e={};e.CastSkill=n.CastSkill,e.CommonSkill=n.CommonSkill,e.PassiveSkill=n.PassiveSkill,e.UltimateSkill=n.UltimateSkill,t(e)},function(n){t("SkillFactory",n.SkillFactory)},function(n){t("StatsMod",n.StatsMod)},function(n){t("BattleUnit",n.BattleUnit)},function(n){t("UnitsMod",n.UnitsMod)}],execute:function(){n._RF.push({},"4c70bO3d0tPlaBnCDyq9j3f","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index11.ts",["cc","./StatsMod.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},function(e){t("StatsMod",e.StatsMod)}],execute:function(){e._RF.push({},"55f1easQ4dKQK+gxV9x6BgR","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index12.ts",["cc","./Event2.ts","./EventBus.ts","./EventListener.ts","./interfaces8.ts"],(function(t){var n;return{setters:[function(t){n=t.cclegacy},function(n){var e={};e.AbstractOnEvent=n.AbstractOnEvent,e.AbstractTryEvent=n.AbstractTryEvent,t(e)},function(n){t("EventBus",n.EventBus)},function(n){t("AbstractEventListener",n.AbstractEventListener)},null],execute:function(){n._RF.push({},"5b0dbVkCIlDa4lBM/c0LJBm","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index13.ts",["cc","./GmManager.ts","./GmPanel.ts"],(function(n){var e;return{setters:[function(n){e=n.cclegacy},function(e){n("GmManager",e.GmManager)},function(e){n("GmPanel",e.GmPanel)}],execute:function(){e._RF.push({},"6082fYPRXNI9pugmkJr4hE6","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index14.ts",["cc","./LifecycleMod.ts"],(function(e){var c;return{setters:[function(e){c=e.cclegacy},function(c){e("LifecycleMod",c.LifecycleMod)}],execute:function(){c._RF.push({},"60baeoenjRJv5GxD+6zU1XV","index",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/index15.ts",["cc","./index5.ts","./index25.ts","./index6.ts","./HoverButton.ts","./DrawDebugBorder.ts","./HexagonLayout.ts","./NineGridLayout.ts"],(function(t){var n;return{setters:[function(t){n=t.cclegacy},null,null,null,function(n){t("HoverButton",n.HoverButton)},function(n){t("DrawDebugBorder",n.DrawDebugBorder)},function(n){t("HexagonLayout",n.HexagonLayout)},function(n){t("NineGridLayout",n.NineGridLayout)}],execute:function(){n._RF.push({},"6ccbf7DPC9IUImX6KleC3US","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index16.ts",["cc","./ResourceManager.ts"],(function(e){var c;return{setters:[function(e){c=e.cclegacy},function(c){e("ResourceManager",c.ResourceManager)}],execute:function(){c._RF.push({},"78c7fyP8hhKT4lBltZkQlqX","index",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/index17.ts",["cc","./MovementMod.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},function(t){e("MovementMod",t.MovementMod)}],execute:function(){t._RF.push({},"7fe6bw5Z6tEN4HG5LIyUgav","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index18.ts",["cc","./BattleUnit.ts","./UnitsMod.ts"],(function(t){var n;return{setters:[function(t){n=t.cclegacy},function(n){t("BattleUnit",n.BattleUnit)},function(n){t("UnitsMod",n.UnitsMod)}],execute:function(){n._RF.push({},"93313i5/SpNrajEsxfSmsqY","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index19.ts",["cc","./AbstractProjectile.ts","./enums6.ts","./interfaces3.ts","./LinearProjectile.ts","./ProjectileMod.ts","./TrackingProjectile.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},function(t){e("AbstractProjectile",t.AbstractProjectile)},function(t){e("ProjectileState",t.ProjectileState)},null,function(t){e("LinearProjectile",t.LinearProjectile)},function(t){e("ProjectileMod",t.ProjectileMod)},function(t){e("TrackingProjectile",t.TrackingProjectile)}],execute:function(){t._RF.push({},"9c550Hprg1Ex5nGSh9eth4q","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index2.ts",["cc","./enums2.ts","./interfaces5.ts","./SkillMod.ts","./UnitSkill.ts","./utils.ts"],(function(l){var i;return{setters:[function(l){i=l.cclegacy},function(i){var t={};t.SkillState=i.SkillState,t.SkillType=i.SkillType,l(t)},null,function(i){l("SkillMod",i.SkillMod)},function(i){var t={};t.CastSkill=i.CastSkill,t.CommonSkill=i.CommonSkill,t.PassiveSkill=i.PassiveSkill,t.UltimateSkill=i.UltimateSkill,l(t)},function(i){l("SkillFactory",i.SkillFactory)}],execute:function(){i._RF.push({},"1bfe5RxtzBOhaBsfXMSASrh","index",void 0),i._RF.pop()}}}));

System.register("chunks:///_virtual/index20.ts",["cc","./index15.ts","./index32.ts","./index28.ts","./index7.ts","./index26.ts","./HoverButton.ts","./DrawDebugBorder.ts","./HexagonLayout.ts","./NineGridLayout.ts","./Event2.ts","./EventBus.ts","./EventListener.ts","./Exceptions.ts","./GameManager.ts","./Player.ts","./ResourceManager.ts","./Helpers.ts","./TemplateHelper.ts","./TemplateManager.ts","./Templates.ts","./constants2.ts","./BehaviorTreeMod.ts","./enums8.ts","./StateMachineMod.ts","./AnimMod.ts","./AttrMod.ts","./constants3.ts","./BattleManager.ts","./BuffBox.ts","./BuffMod.ts","./AbstractCondition.ts","./AbstractEventCondition.ts","./AbstractOngoingCondition.ts","./Condition_10_UnitDead.ts","./Event_0_Direct.ts","./Ongoing_1_Time.ts","./Ongoing_2_Value.ts","./BuffEffect.ts","./BuffEffect_0_Default.ts","./BuffEffect_10_Resist.ts","./BuffEffect_11_Shield.ts","./BuffEffect_13_SharedDamage.ts","./BuffEffect_7_CannotCure.ts","./enums7.ts","./utils3.ts","./CalcMod.ts","./DamageResult.ts","./BattleContext.ts","./constants.ts","./enums3.ts","./event.ts","./LifecycleMod.ts","./MovementMod.ts","./AbstractProjectile.ts","./enums6.ts","./LinearProjectile.ts","./ProjectileMod.ts","./TrackingProjectile.ts","./enums2.ts","./SkillMod.ts","./UnitSkill.ts","./utils.ts","./StatsMod.ts","./BattleUnit.ts","./UnitsMod.ts","./SpineAnimator.ts","./SpineMove.ts","./CollectionUtils.ts","./JsonUtils.ts","./Log.ts","./MathUtils.ts","./RandomUtils.ts","./UuidUtils.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},null,null,null,null,null,function(e){t("HoverButton",e.HoverButton)},function(e){t("DrawDebugBorder",e.DrawDebugBorder)},function(e){t("HexagonLayout",e.HexagonLayout)},function(e){t("NineGridLayout",e.NineGridLayout)},function(e){var n={};n.AbstractOnEvent=e.AbstractOnEvent,n.AbstractTryEvent=e.AbstractTryEvent,t(n)},function(e){t("EventBus",e.EventBus)},function(e){t("AbstractEventListener",e.AbstractEventListener)},function(e){var n={};n.InitException=e.InitException,n.TemplateException=e.TemplateException,t(n)},function(e){t("GameManager",e.GameManager)},function(e){t("Player",e.Player)},function(e){t("ResourceManager",e.ResourceManager)},function(e){var n={};n.BuffEffectHelper=e.BuffEffectHelper,n.BuffHelper=e.BuffHelper,n.ConstHelper=e.ConstHelper,n.ImpactHelper=e.ImpactHelper,n.ProjectileHelper=e.ProjectileHelper,n.SkillHelper=e.SkillHelper,n.UnitHelper=e.UnitHelper,t(n)},function(e){t("TemplateHelper",e.TemplateHelper)},function(e){var n={};n.TemplateManager=e.TemplateManager,n.templateHelper=e.templateHelper,t(n)},function(e){var n={};n.TemplateAnimation=e.TemplateAnimation,n.TemplateAward=e.TemplateAward,n.TemplateBattle=e.TemplateBattle,n.TemplateBuff=e.TemplateBuff,n.TemplateBuffEffect=e.TemplateBuffEffect,n.TemplateConst=e.TemplateConst,n.TemplateEquip=e.TemplateEquip,n.TemplateImpact=e.TemplateImpact,n.TemplateItem=e.TemplateItem,n.TemplateLabel=e.TemplateLabel,n.TemplateProduct=e.TemplateProduct,n.TemplateProjectile=e.TemplateProjectile,n.TemplateRoutine=e.TemplateRoutine,n.TemplateSkill=e.TemplateSkill,n.TemplateSuit=e.TemplateSuit,n.TemplateTips=e.TemplateTips,n.TemplateUnit=e.TemplateUnit,t(n)},function(e){t("FPS",e.FPS)},function(e){t("BehaviorTreeMod",e.BehaviorTreeMod)},function(e){t("UnitStateEnum",e.UnitStateEnum)},function(e){var n={};n.ActionState=e.ActionState,n.BasicState=e.BasicState,n.BornState=e.BornState,n.ChaseState=e.ChaseState,n.DeadState=e.DeadState,n.FleeState=e.FleeState,n.IdleState=e.IdleState,n.StateMachineMod=e.StateMachineMod,n.WanderState=e.WanderState,t(n)},function(e){t("AnimMod",e.AnimMod)},function(e){t("AttrMod",e.AttrMod)},function(e){t("AttrKey",e.AttrKey)},function(e){t("BattleManager",e.BattleManager)},function(e){t("BuffBox",e.BuffBox)},function(e){t("BuffMod",e.BuffMod)},function(e){t("AbstractCondition",e.AbstractCondition)},function(e){t("AbstractEventCondition",e.AbstractEventCondition)},function(e){t("AbstractOngoingCondition",e.AbstractOngoingCondition)},function(e){t("Condition_10_UnitDead",e.Condition_10_UnitDead)},function(e){t("Event_0_Direct",e.Event_0_Direct)},function(e){t("Ongoing_1_Time",e.Ongoing_1_Time)},function(e){t("Ongoing2Value",e.Ongoing2Value)},function(e){t("AbstractEffect",e.AbstractEffect)},function(e){t("BuffEffect_0_Default",e.BuffEffect_0_Default)},function(e){t("BuffEffect_10_Resist",e.BuffEffect_10_Resist)},function(e){t("BuffEffect_11_Shield",e.BuffEffect_11_Shield)},function(e){t("BuffEffect_13_SharedDamage",e.BuffEffect_13_SharedDamage)},function(e){t("BuffEffect_7_CannotCure",e.BuffEffect_7_CannotCure)},function(e){var n={};n.BuffAffectType=e.BuffAffectType,n.BuffPurpose=e.BuffPurpose,n.BuffStatus=e.BuffStatus,n.DestroyReason=e.DestroyReason,n.DisposedRule=e.DisposedRule,n.HookResult=e.HookResult,n.ReplaceRule=e.ReplaceRule,t(n)},function(e){var n={};n.BuffFactory=e.BuffFactory,n.ConditionFactory=e.ConditionFactory,t(n)},function(e){t("CalcMod",e.CalcMod)},function(e){t("DamageResult",e.DamageResult)},function(e){t("BattleContext",e.BattleContext)},function(e){var n={};n.ASTERISK=e.ASTERISK,n.ATTACK_RANGE=e.ATTACK_RANGE,n.BATTLE_MAP_HEIGHT=e.BATTLE_MAP_HEIGHT,n.BATTLE_MAP_MARGIN=e.BATTLE_MAP_MARGIN,n.BATTLE_MAP_WIDTH=e.BATTLE_MAP_WIDTH,n.CHASE_RANGE=e.CHASE_RANGE,n.COLON=e.COLON,n.COMMA=e.COMMA,n.DECISION_INTERVAL=e.DECISION_INTERVAL,n.DEF_CHANGE_POINT=e.DEF_CHANGE_POINT,n.DEF_INVERSE=e.DEF_INVERSE,n.MAX_RATE=e.MAX_RATE,n.RECOVER_INTERNAL=e.RECOVER_INTERNAL,n.RETREAT_RANGE=e.RETREAT_RANGE,n.SEMICOLON=e.SEMICOLON,t(n)},function(e){var n={};n.CampEnum=e.CampEnum,n.TipsType=e.TipsType,t(n)},function(e){var n={};n.OnActionEvent=e.OnActionEvent,n.OnAttributeUpdateEvent=e.OnAttributeUpdateEvent,n.OnBubbleTipsEvent=e.OnBubbleTipsEvent,n.OnBuffActiveEvent=e.OnBuffActiveEvent,n.OnBuffBreakupEvent=e.OnBuffBreakupEvent,n.OnBuffHookEvent=e.OnBuffHookEvent,n.OnBuffResistEvent=e.OnBuffResistEvent,n.OnDamageEvent=e.OnDamageEvent,n.OnDisposedBuffEvent=e.OnDisposedBuffEvent,n.OnForceDeadEvent=e.OnForceDeadEvent,n.OnReadyToAddHpEvent=e.OnReadyToAddHpEvent,n.OnReadyToSubHpEvent=e.OnReadyToSubHpEvent,n.OnShieldBreakEvent=e.OnShieldBreakEvent,n.OnUnitDeadEvent=e.OnUnitDeadEvent,n.TryActiveBuffEvent=e.TryActiveBuffEvent,n.TryDisposedBuffEvent=e.TryDisposedBuffEvent,t(n)},function(e){t("LifecycleMod",e.LifecycleMod)},function(e){t("MovementMod",e.MovementMod)},function(e){t("AbstractProjectile",e.AbstractProjectile)},function(e){t("ProjectileState",e.ProjectileState)},function(e){t("LinearProjectile",e.LinearProjectile)},function(e){t("ProjectileMod",e.ProjectileMod)},function(e){t("TrackingProjectile",e.TrackingProjectile)},function(e){var n={};n.SkillState=e.SkillState,n.SkillType=e.SkillType,t(n)},function(e){t("SkillMod",e.SkillMod)},function(e){var n={};n.CastSkill=e.CastSkill,n.CommonSkill=e.CommonSkill,n.PassiveSkill=e.PassiveSkill,n.UltimateSkill=e.UltimateSkill,t(n)},function(e){t("SkillFactory",e.SkillFactory)},function(e){t("StatsMod",e.StatsMod)},function(e){t("BattleUnit",e.BattleUnit)},function(e){t("UnitsMod",e.UnitsMod)},function(e){t("SpineAnimator",e.SpineAnimator)},function(e){t("SpineMove",e.SpineMove)},function(e){t("singleMap",e.singleMap)},function(e){t("readInJson",e.readInJson)},function(e){t("Log",e.Log)},function(e){t("MathUtils",e.MathUtils)},function(e){var n={};n.RandomCore=e.RandomCore,n.RandomUtils=e.RandomUtils,t(n)},function(e){t("UuIdUtils",e.UuIdUtils)}],execute:function(){e._RF.push({},"9f157HzYxdN6aDUFsNPZwf4","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index21.ts",["cc","./Exceptions.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},function(e){var n={};n.InitException=e.InitException,n.TemplateException=e.TemplateException,t(n)}],execute:function(){e._RF.push({},"a2f88gL4DhJg7GM9/uSXyqf","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index22.ts",["cc","./event.ts"],(function(e){var n;return{setters:[function(e){n=e.cclegacy},function(n){var t={};t.OnActionEvent=n.OnActionEvent,t.OnAttributeUpdateEvent=n.OnAttributeUpdateEvent,t.OnBubbleTipsEvent=n.OnBubbleTipsEvent,t.OnBuffActiveEvent=n.OnBuffActiveEvent,t.OnBuffBreakupEvent=n.OnBuffBreakupEvent,t.OnBuffHookEvent=n.OnBuffHookEvent,t.OnBuffResistEvent=n.OnBuffResistEvent,t.OnDamageEvent=n.OnDamageEvent,t.OnDisposedBuffEvent=n.OnDisposedBuffEvent,t.OnForceDeadEvent=n.OnForceDeadEvent,t.OnReadyToAddHpEvent=n.OnReadyToAddHpEvent,t.OnReadyToSubHpEvent=n.OnReadyToSubHpEvent,t.OnShieldBreakEvent=n.OnShieldBreakEvent,t.OnUnitDeadEvent=n.OnUnitDeadEvent,t.TryActiveBuffEvent=n.TryActiveBuffEvent,t.TryDisposedBuffEvent=n.TryDisposedBuffEvent,e(t)}],execute:function(){n._RF.push({},"a3885Emb3VK+a65O+YqXKox","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index23.ts",["cc","./BuffBox.ts","./BuffMod.ts","./index3.ts","./index31.ts","./enums7.ts","./interfaces6.ts","./utils3.ts","./AbstractCondition.ts","./AbstractEventCondition.ts","./AbstractOngoingCondition.ts","./Condition_10_UnitDead.ts","./Event_0_Direct.ts","./Ongoing_1_Time.ts","./Ongoing_2_Value.ts","./BuffEffect.ts","./BuffEffect_0_Default.ts","./BuffEffect_10_Resist.ts","./BuffEffect_11_Shield.ts","./BuffEffect_13_SharedDamage.ts","./BuffEffect_7_CannotCure.ts"],(function(t){var f;return{setters:[function(t){f=t.cclegacy},function(f){t("BuffBox",f.BuffBox)},function(f){t("BuffMod",f.BuffMod)},null,null,function(f){var n={};n.BuffAffectType=f.BuffAffectType,n.BuffPurpose=f.BuffPurpose,n.BuffStatus=f.BuffStatus,n.DestroyReason=f.DestroyReason,n.DisposedRule=f.DisposedRule,n.HookResult=f.HookResult,n.ReplaceRule=f.ReplaceRule,t(n)},null,function(f){var n={};n.BuffFactory=f.BuffFactory,n.ConditionFactory=f.ConditionFactory,t(n)},function(f){t("AbstractCondition",f.AbstractCondition)},function(f){t("AbstractEventCondition",f.AbstractEventCondition)},function(f){t("AbstractOngoingCondition",f.AbstractOngoingCondition)},function(f){t("Condition_10_UnitDead",f.Condition_10_UnitDead)},function(f){t("Event_0_Direct",f.Event_0_Direct)},function(f){t("Ongoing_1_Time",f.Ongoing_1_Time)},function(f){t("Ongoing2Value",f.Ongoing2Value)},function(f){t("AbstractEffect",f.AbstractEffect)},function(f){t("BuffEffect_0_Default",f.BuffEffect_0_Default)},function(f){t("BuffEffect_10_Resist",f.BuffEffect_10_Resist)},function(f){t("BuffEffect_11_Shield",f.BuffEffect_11_Shield)},function(f){t("BuffEffect_13_SharedDamage",f.BuffEffect_13_SharedDamage)},function(f){t("BuffEffect_7_CannotCure",f.BuffEffect_7_CannotCure)}],execute:function(){f._RF.push({},"b463exQsM5DQ6jx6AXER+9L","index",void 0),f._RF.pop()}}}));

System.register("chunks:///_virtual/index24.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"b7cbfJtg29OPotHbaFtDubo","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index25.ts",["cc","./DrawDebugBorder.ts"],(function(e){var r;return{setters:[function(e){r=e.cclegacy},function(r){e("DrawDebugBorder",r.DrawDebugBorder)}],execute:function(){r._RF.push({},"c1f55lDhxZDhKqcoM078v0C","index",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/index26.ts",["cc","./CollectionUtils.ts","./JsonUtils.ts","./Log.ts","./MathUtils.ts","./RandomUtils.ts","./UuidUtils.ts"],(function(t){var n;return{setters:[function(t){n=t.cclegacy},function(n){t("singleMap",n.singleMap)},function(n){t("readInJson",n.readInJson)},function(n){t("Log",n.Log)},function(n){t("MathUtils",n.MathUtils)},function(n){var s={};s.RandomCore=n.RandomCore,s.RandomUtils=n.RandomUtils,t(s)},function(n){t("UuIdUtils",n.UuIdUtils)}],execute:function(){n._RF.push({},"c53fdVPV0VMv5LQ4wJstVn/","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index27.ts",["cc","./CalcMod.ts","./DamageResult.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},function(t){e("CalcMod",t.CalcMod)},function(t){e("DamageResult",t.DamageResult)}],execute:function(){t._RF.push({},"cd6b2KbmYFJW4a0gHkElAF5","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index28.ts",["cc","./constants2.ts","./enums4.ts","./interfaces.ts"],(function(n){var t;return{setters:[function(n){t=n.cclegacy},function(t){n("FPS",t.FPS)},null,null],execute:function(){t._RF.push({},"e014bwInBtKN6LRwbijnnIM","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index29.ts",["cc","./AnimMod.ts"],(function(n){var t;return{setters:[function(n){t=n.cclegacy},function(t){n("AnimMod",t.AnimMod)}],execute:function(){t._RF.push({},"e307cI+dEtEgrZ6HfY87P6k","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index3.ts",["cc","./AbstractCondition.ts","./AbstractEventCondition.ts","./AbstractOngoingCondition.ts","./Condition_10_UnitDead.ts","./Event_0_Direct.ts","./Ongoing_1_Time.ts","./Ongoing_2_Value.ts"],(function(n){var t;return{setters:[function(n){t=n.cclegacy},function(t){n("AbstractCondition",t.AbstractCondition)},function(t){n("AbstractEventCondition",t.AbstractEventCondition)},function(t){n("AbstractOngoingCondition",t.AbstractOngoingCondition)},function(t){n("Condition_10_UnitDead",t.Condition_10_UnitDead)},function(t){n("Event_0_Direct",t.Event_0_Direct)},function(t){n("Ongoing_1_Time",t.Ongoing_1_Time)},function(t){n("Ongoing2Value",t.Ongoing2Value)}],execute:function(){t._RF.push({},"1d37dxEW/tFIJvdAwnHNx/A","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index30.ts",["cc","./BattleContext.ts","./constants.ts","./enums3.ts","./interfaces2.ts"],(function(E){var A;return{setters:[function(E){A=E.cclegacy},function(A){E("BattleContext",A.BattleContext)},function(A){var T={};T.ASTERISK=A.ASTERISK,T.ATTACK_RANGE=A.ATTACK_RANGE,T.BATTLE_MAP_HEIGHT=A.BATTLE_MAP_HEIGHT,T.BATTLE_MAP_MARGIN=A.BATTLE_MAP_MARGIN,T.BATTLE_MAP_WIDTH=A.BATTLE_MAP_WIDTH,T.CHASE_RANGE=A.CHASE_RANGE,T.COLON=A.COLON,T.COMMA=A.COMMA,T.DECISION_INTERVAL=A.DECISION_INTERVAL,T.DEF_CHANGE_POINT=A.DEF_CHANGE_POINT,T.DEF_INVERSE=A.DEF_INVERSE,T.MAX_RATE=A.MAX_RATE,T.RECOVER_INTERNAL=A.RECOVER_INTERNAL,T.RETREAT_RANGE=A.RETREAT_RANGE,T.SEMICOLON=A.SEMICOLON,E(T)},function(A){var T={};T.CampEnum=A.CampEnum,T.TipsType=A.TipsType,E(T)},null],execute:function(){A._RF.push({},"e9827ywNQtFW6sbftor9fr8","index",void 0),A._RF.pop()}}}));

System.register("chunks:///_virtual/index31.ts",["cc","./BuffEffect.ts","./BuffEffect_0_Default.ts","./BuffEffect_10_Resist.ts","./BuffEffect_11_Shield.ts","./BuffEffect_13_SharedDamage.ts","./BuffEffect_7_CannotCure.ts"],(function(f){var t;return{setters:[function(f){t=f.cclegacy},function(t){f("AbstractEffect",t.AbstractEffect)},function(t){f("BuffEffect_0_Default",t.BuffEffect_0_Default)},function(t){f("BuffEffect_10_Resist",t.BuffEffect_10_Resist)},function(t){f("BuffEffect_11_Shield",t.BuffEffect_11_Shield)},function(t){f("BuffEffect_13_SharedDamage",t.BuffEffect_13_SharedDamage)},function(t){f("BuffEffect_7_CannotCure",t.BuffEffect_7_CannotCure)}],execute:function(){t._RF.push({},"ed63cNx+gpI4oFYfevD8yoU","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index32.ts",["cc","./index12.ts","./index21.ts","./GameManager.ts","./Player.ts","./index16.ts","./index.ts","./Event2.ts","./EventBus.ts","./EventListener.ts","./Exceptions.ts","./ResourceManager.ts","./Helpers.ts","./TemplateHelper.ts","./TemplateManager.ts","./Templates.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},null,null,function(t){e("GameManager",t.GameManager)},function(t){e("Player",t.Player)},null,null,function(t){var a={};a.AbstractOnEvent=t.AbstractOnEvent,a.AbstractTryEvent=t.AbstractTryEvent,e(a)},function(t){e("EventBus",t.EventBus)},function(t){e("AbstractEventListener",t.AbstractEventListener)},function(t){var a={};a.InitException=t.InitException,a.TemplateException=t.TemplateException,e(a)},function(t){e("ResourceManager",t.ResourceManager)},function(t){var a={};a.BuffEffectHelper=t.BuffEffectHelper,a.BuffHelper=t.BuffHelper,a.ConstHelper=t.ConstHelper,a.ImpactHelper=t.ImpactHelper,a.ProjectileHelper=t.ProjectileHelper,a.SkillHelper=t.SkillHelper,a.UnitHelper=t.UnitHelper,e(a)},function(t){e("TemplateHelper",t.TemplateHelper)},function(t){var a={};a.TemplateManager=t.TemplateManager,a.templateHelper=t.templateHelper,e(a)},function(t){var a={};a.TemplateAnimation=t.TemplateAnimation,a.TemplateAward=t.TemplateAward,a.TemplateBattle=t.TemplateBattle,a.TemplateBuff=t.TemplateBuff,a.TemplateBuffEffect=t.TemplateBuffEffect,a.TemplateConst=t.TemplateConst,a.TemplateEquip=t.TemplateEquip,a.TemplateImpact=t.TemplateImpact,a.TemplateItem=t.TemplateItem,a.TemplateLabel=t.TemplateLabel,a.TemplateProduct=t.TemplateProduct,a.TemplateProjectile=t.TemplateProjectile,a.TemplateRoutine=t.TemplateRoutine,a.TemplateSkill=t.TemplateSkill,a.TemplateSuit=t.TemplateSuit,a.TemplateTips=t.TemplateTips,a.TemplateUnit=t.TemplateUnit,e(a)}],execute:function(){t._RF.push({},"fe924Hgs1pJMqIUcEphSmKe","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index4.ts",["cc","./BehaviorTreeMod.ts","./enums8.ts","./interfaces4.ts","./StateMachineMod.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},function(e){t("BehaviorTreeMod",e.BehaviorTreeMod)},function(e){t("UnitStateEnum",e.UnitStateEnum)},null,function(e){var a={};a.ActionState=e.ActionState,a.BasicState=e.BasicState,a.BornState=e.BornState,a.ChaseState=e.ChaseState,a.DeadState=e.DeadState,a.FleeState=e.FleeState,a.IdleState=e.IdleState,a.StateMachineMod=e.StateMachineMod,a.WanderState=e.WanderState,t(a)}],execute:function(){e._RF.push({},"216e9fs23hGVb+dPkSn5wzK","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index5.ts",["cc","./HoverButton.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},function(e){t("HoverButton",e.HoverButton)}],execute:function(){e._RF.push({},"2bef6/fL/dFsIMn+Y+W6fId","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index6.ts",["cc","./HexagonLayout.ts","./NineGridLayout.ts"],(function(t){var n;return{setters:[function(t){n=t.cclegacy},function(n){t("HexagonLayout",n.HexagonLayout)},function(n){t("NineGridLayout",n.NineGridLayout)}],execute:function(){n._RF.push({},"35b27xJUr1CKaV8JL5xg0L1","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index7.ts",["cc","./index10.ts","./index8.ts","./BehaviorTreeMod.ts","./enums8.ts","./StateMachineMod.ts","./AnimMod.ts","./AttrMod.ts","./constants3.ts","./BattleManager.ts","./BuffBox.ts","./BuffMod.ts","./AbstractCondition.ts","./AbstractEventCondition.ts","./AbstractOngoingCondition.ts","./Condition_10_UnitDead.ts","./Event_0_Direct.ts","./Ongoing_1_Time.ts","./Ongoing_2_Value.ts","./BuffEffect.ts","./BuffEffect_0_Default.ts","./BuffEffect_10_Resist.ts","./BuffEffect_11_Shield.ts","./BuffEffect_13_SharedDamage.ts","./BuffEffect_7_CannotCure.ts","./enums7.ts","./utils3.ts","./CalcMod.ts","./DamageResult.ts","./BattleContext.ts","./constants.ts","./enums3.ts","./event.ts","./LifecycleMod.ts","./MovementMod.ts","./AbstractProjectile.ts","./enums6.ts","./LinearProjectile.ts","./ProjectileMod.ts","./TrackingProjectile.ts","./enums2.ts","./SkillMod.ts","./UnitSkill.ts","./utils.ts","./StatsMod.ts","./BattleUnit.ts","./UnitsMod.ts","./SpineAnimator.ts","./SpineMove.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},null,null,function(e){t("BehaviorTreeMod",e.BehaviorTreeMod)},function(e){t("UnitStateEnum",e.UnitStateEnum)},function(e){var n={};n.ActionState=e.ActionState,n.BasicState=e.BasicState,n.BornState=e.BornState,n.ChaseState=e.ChaseState,n.DeadState=e.DeadState,n.FleeState=e.FleeState,n.IdleState=e.IdleState,n.StateMachineMod=e.StateMachineMod,n.WanderState=e.WanderState,t(n)},function(e){t("AnimMod",e.AnimMod)},function(e){t("AttrMod",e.AttrMod)},function(e){t("AttrKey",e.AttrKey)},function(e){t("BattleManager",e.BattleManager)},function(e){t("BuffBox",e.BuffBox)},function(e){t("BuffMod",e.BuffMod)},function(e){t("AbstractCondition",e.AbstractCondition)},function(e){t("AbstractEventCondition",e.AbstractEventCondition)},function(e){t("AbstractOngoingCondition",e.AbstractOngoingCondition)},function(e){t("Condition_10_UnitDead",e.Condition_10_UnitDead)},function(e){t("Event_0_Direct",e.Event_0_Direct)},function(e){t("Ongoing_1_Time",e.Ongoing_1_Time)},function(e){t("Ongoing2Value",e.Ongoing2Value)},function(e){t("AbstractEffect",e.AbstractEffect)},function(e){t("BuffEffect_0_Default",e.BuffEffect_0_Default)},function(e){t("BuffEffect_10_Resist",e.BuffEffect_10_Resist)},function(e){t("BuffEffect_11_Shield",e.BuffEffect_11_Shield)},function(e){t("BuffEffect_13_SharedDamage",e.BuffEffect_13_SharedDamage)},function(e){t("BuffEffect_7_CannotCure",e.BuffEffect_7_CannotCure)},function(e){var n={};n.BuffAffectType=e.BuffAffectType,n.BuffPurpose=e.BuffPurpose,n.BuffStatus=e.BuffStatus,n.DestroyReason=e.DestroyReason,n.DisposedRule=e.DisposedRule,n.HookResult=e.HookResult,n.ReplaceRule=e.ReplaceRule,t(n)},function(e){var n={};n.BuffFactory=e.BuffFactory,n.ConditionFactory=e.ConditionFactory,t(n)},function(e){t("CalcMod",e.CalcMod)},function(e){t("DamageResult",e.DamageResult)},function(e){t("BattleContext",e.BattleContext)},function(e){var n={};n.ASTERISK=e.ASTERISK,n.ATTACK_RANGE=e.ATTACK_RANGE,n.BATTLE_MAP_HEIGHT=e.BATTLE_MAP_HEIGHT,n.BATTLE_MAP_MARGIN=e.BATTLE_MAP_MARGIN,n.BATTLE_MAP_WIDTH=e.BATTLE_MAP_WIDTH,n.CHASE_RANGE=e.CHASE_RANGE,n.COLON=e.COLON,n.COMMA=e.COMMA,n.DECISION_INTERVAL=e.DECISION_INTERVAL,n.DEF_CHANGE_POINT=e.DEF_CHANGE_POINT,n.DEF_INVERSE=e.DEF_INVERSE,n.MAX_RATE=e.MAX_RATE,n.RECOVER_INTERNAL=e.RECOVER_INTERNAL,n.RETREAT_RANGE=e.RETREAT_RANGE,n.SEMICOLON=e.SEMICOLON,t(n)},function(e){var n={};n.CampEnum=e.CampEnum,n.TipsType=e.TipsType,t(n)},function(e){var n={};n.OnActionEvent=e.OnActionEvent,n.OnAttributeUpdateEvent=e.OnAttributeUpdateEvent,n.OnBubbleTipsEvent=e.OnBubbleTipsEvent,n.OnBuffActiveEvent=e.OnBuffActiveEvent,n.OnBuffBreakupEvent=e.OnBuffBreakupEvent,n.OnBuffHookEvent=e.OnBuffHookEvent,n.OnBuffResistEvent=e.OnBuffResistEvent,n.OnDamageEvent=e.OnDamageEvent,n.OnDisposedBuffEvent=e.OnDisposedBuffEvent,n.OnForceDeadEvent=e.OnForceDeadEvent,n.OnReadyToAddHpEvent=e.OnReadyToAddHpEvent,n.OnReadyToSubHpEvent=e.OnReadyToSubHpEvent,n.OnShieldBreakEvent=e.OnShieldBreakEvent,n.OnUnitDeadEvent=e.OnUnitDeadEvent,n.TryActiveBuffEvent=e.TryActiveBuffEvent,n.TryDisposedBuffEvent=e.TryDisposedBuffEvent,t(n)},function(e){t("LifecycleMod",e.LifecycleMod)},function(e){t("MovementMod",e.MovementMod)},function(e){t("AbstractProjectile",e.AbstractProjectile)},function(e){t("ProjectileState",e.ProjectileState)},function(e){t("LinearProjectile",e.LinearProjectile)},function(e){t("ProjectileMod",e.ProjectileMod)},function(e){t("TrackingProjectile",e.TrackingProjectile)},function(e){var n={};n.SkillState=e.SkillState,n.SkillType=e.SkillType,t(n)},function(e){t("SkillMod",e.SkillMod)},function(e){var n={};n.CastSkill=e.CastSkill,n.CommonSkill=e.CommonSkill,n.PassiveSkill=e.PassiveSkill,n.UltimateSkill=e.UltimateSkill,t(n)},function(e){t("SkillFactory",e.SkillFactory)},function(e){t("StatsMod",e.StatsMod)},function(e){t("BattleUnit",e.BattleUnit)},function(e){t("UnitsMod",e.UnitsMod)},function(e){t("SpineAnimator",e.SpineAnimator)},function(e){t("SpineMove",e.SpineMove)}],execute:function(){e._RF.push({},"38382NPWlJCKYVPHbWmzpKf","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index8.ts",["cc","./SpineAnimator.ts","./SpineMove.ts"],(function(n){var e;return{setters:[function(n){e=n.cclegacy},function(e){n("SpineAnimator",e.SpineAnimator)},function(e){n("SpineMove",e.SpineMove)}],execute:function(){e._RF.push({},"491caE9jwBN4o80qgoaPdog","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index9.ts",["cc","./AttrMod.ts","./constants3.ts"],(function(t){var n;return{setters:[function(t){n=t.cclegacy},function(n){t("AttrMod",n.AttrMod)},function(n){t("AttrKey",n.AttrKey)}],execute:function(){n._RF.push({},"4ad9dSUEyxL1JQ3AQ32fQ0a","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/Init.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index26.ts","./GameManager.ts","./Log.ts"],(function(n){var t,i,e,o,r,u,a,s;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy,e=n._decorator,o=n.game,r=n.sys,u=n.Component},null,function(n){a=n.GameManager},function(n){s=n.Log}],execute:function(){var c;i._RF.push({},"7c359ZEP4pH+6VX2++t4Gxk","Init",void 0);var f=e.ccclass;e.property,n("Init",f("Init")(c=function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var e=i.prototype;return e.onLoad=function(){this.initRun(),this.gameRun()},e.start=function(){},e.gameRun=function(){s.info("gameRun!!!"),a.inst().init().then((function(n){n?s.info("GameManager.inst().then()!"):(o.end(),r.isBrowser&&s.error("GameManager.inst().error()!"))}))},e.initRun=function(){s.info("initRun!!!")},i}(u))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"24c31nz8f9OarKNSeolDj/E","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces2.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"587demlm1tMFoAgTMuekSvM","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces3.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"5d609Lo8QRNnKCvw5cJWKwx","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces4.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"73f8d1SablC1L82DC1/+x8U","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces5.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a7f26L2UJJED4hZVWhzdOyq","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces6.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"ae64ecXxK9GroZSY4IJaly5","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces7.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"d5515wdH/BPhaf9lzcCwZBA","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces8.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d6b8dWzz5hB76b/vhxY2SOO","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces9.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"fb00fBb9UtJ1IeYtNUQn9/j","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/JsonUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,r,t,o,s;return{setters:[function(e){n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){t=e.cclegacy,o=e.resources,s=e.JsonAsset}],execute:function(){function u(){return(u=n(r().mark((function e(n){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"==typeof cc){e.next=2;break}return e.abrupt("return",new Promise((function(e,r){o.load(n,s,(function(n,t){if(n)return r(n);e(t.json)}))})));case 2:if("undefined"==typeof window||!window.fetch){e.next=9;break}return e.next=5,fetch(n);case 5:if((t=e.sent).ok){e.next=8;break}throw new Error("HTTP "+t.status);case 8:return e.abrupt("return",t.json());case 9:throw new Error("当前环境不支持读取 JSON 文件");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e("readInJson",(function(e){return u.apply(this,arguments)})),t._RF.push({},"2030dELxlpC4YcVQa5ntLIt","JsonUtils",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/LifecycleMod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index30.ts","./index23.ts","./index9.ts","./index22.ts","./enums.ts","./index32.ts","./index27.ts","./index26.ts","./constants.ts","./constants3.ts","./event.ts","./enums7.ts","./enums3.ts","./BuffEffect_13_SharedDamage.ts","./DamageResult.ts","./BuffEffect_11_Shield.ts","./BuffEffect_7_CannotCure.ts","./CollectionUtils.ts","./EventListener.ts"],(function(e){var t,n,i,r,a,o,s,f,u,d,c,v,l,E,h,w,g,p,A,_,R,S;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy},null,null,null,null,function(e){r=e.DamageSource},null,null,null,function(e){a=e.RECOVER_INTERNAL,o=e.MAX_RATE},function(e){s=e.AttrKey},function(e){f=e.OnReadyToAddHpEvent,u=e.OnBubbleTipsEvent,d=e.OnReadyToSubHpEvent,c=e.OnShieldBreakEvent,v=e.OnAttributeUpdateEvent,l=e.OnDamageEvent,E=e.OnUnitDeadEvent},function(e){h=e.BuffAffectType},function(e){w=e.TipsType},function(e){g=e.BuffEffect_13_SharedDamage},function(e){p=e.DamageResult},function(e){A=e.BuffEffect_11_Shield},function(e){_=e.BuffEffect_7_CannotCure},function(e){R=e.singleMap},function(e){S=e.AbstractEventListener}],execute:function(){i._RF.push({},"efca6XmQZlBzLdTlSIn+MXU","LifecycleMod",void 0);e("LifecycleMod",function(e){function i(t){var n;return(n=e.call(this)||this).owner=void 0,n.recoverTimer=0,n.owner=t,n}t(i,e);var S=i.prototype;return S.update=function(e){this.recoverTimer+=e;var t=this.owner.context.eventBus,n=this.owner.attrMod;this.owner.buffMod;if(this.recoverTimer>a){var i=n.getFinalAttr(s.HP_LIMIT),r=n.getFinalAttr(s.HP);if(r<i){var o=n.getFinalAttr(s.HP_RECOVER),u=Math.min(i-r,o);0!==u&&t.postEvent(new f(this.owner.id,this.owner.id,u))}this.recoverTimer=0}},S.onEvent=function(e){var t=this.owner.context.eventBus,i=this.owner.attrMod,a=this.owner.buffMod,f=i.getFinalAttr(s.HP);switch(e.name){case"OnForceDeadEvent":if(!e.deadList.includes(this.owner.id))return;this.unitDead();break;case"OnDamageEvent":if(!e.damageMap.get(this.owner.id))return;var l=i.getFinalAttr(s.HP);if(!l||l<=0){if(a.checkBuffAffect(h.IMMORTAL))return i.setCurHp(1),void t.postEvent(new u(w.IMMORTAL_TIPS,this.owner.id));i.dead()}break;case"OnAttributeUpdateEvent":if(e.generateHeroId!==this.owner.id)return;i.calcFinalAttr();break;case"OnReadyToAddHpEvent":var E=e;if(E.targetId!==this.owner.id)break;var R=E.value;if(0===R)break;var S=a.getBuffEffectList(_);if(S&&S.length>0)t.postEvent(new u(w.CANNOT_CURE,this.owner.id));else{i.addHp(R);var m=new v(E.generatorId,this.owner.id,s.HP,f,R,!0);t.postEvent(m)}break;case"OnReadyToSubHpEvent":var H=e,M=H.damageMap.get(this.owner.id);if(!M||!M.isValid())return;if(a.checkBuffAffect(h.IGNORE_ALL_DAMAGE))return void t.postEvent(new u(w.IGNORE_ALL_DAMAGE_TIPS,this.owner.id));if(H.damageSource!==r.SHARED_SOURCE){for(var D,L=new Map,O=0,T=a.getBuffEffectList(g),b=n(T);!(D=b()).done;){var B=D.value,I=B.getRate();(O+=I)>o&&(I-=O-o,O=o);var C=M.sharedDamage(I);if(C>0){var P=B.buffBox.generatorId;L.set(P,new p(C,M.critical)),t.postEvent(new u(w.SHARED_DAMAGE_TIPS,P))}if(O>=100)break}t.postEvent(new d(this.owner.id,L,r.SHARED_SOURCE))}if(!M.isValid())return;for(var x,y=a.getBuffEffectList(A),k=n(y);!(x=k()).done;){var F=x.value.getOngoing2Value();if(null!=F){var U=F.costValue;if(!(U<=0)){var N=M.shieldDamage(U);if(!(N<=0)){t.postEvent(new u(w.SHIELD_BLOCK_TIPS,this.owner.id)),F.changeCost(U-N);break}t.postEvent(new c),t.postEvent(new u(w.SHIELD_BREAK_TIPS,this.owner.id))}}}this.handleSubHp(H.generatorId,H.damageSource,M)}},S.handleSubHp=function(e,t,n){var i=this.owner.context.eventBus,r=this.owner.attrMod,a=(this.owner.buffMod,r.getFinalAttr(s.HP)),o=n.getFinalDamage();r.subHp(o);var f=new v(e,this.owner.id,s.HP,a,-o,!1);i.postEvent(f),i.postEvent(new l(e,R(this.owner.id,n),t)),this.owner.isDead()&&this.unitDead()},S.unitDead=function(){this.owner.context.eventBus.postEvent(new E(this.owner.id))},i}(S));i._RF.pop()}}}));

System.register("chunks:///_virtual/LinearProjectile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractProjectile.ts"],(function(t){var n,e,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.AbstractProjectile}],execute:function(){e._RF.push({},"69f7bHK0XlMDJinHU5zVh5V","LinearProjectile",void 0);t("LinearProjectile",function(t){function e(n,e,i){return t.call(this,n,e,i)||this}n(e,t);var i=e.prototype;return i.onInit=function(){},i.onUpdate=function(t){},i.onHit=function(t){},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/Log.ts",["cc"],(function(n){var r;return{setters:[function(n){r=n.cclegacy}],execute:function(){r._RF.push({},"c0ec5cVamRLsbKh2Yc+vRx8","Log",void 0);n("Log",{info:function(){var n;return(n=console).info.apply(n,arguments)},error:function(){var n;return(n=console).error.apply(n,arguments)},debug:function(){var n;return(n=console).debug.apply(n,arguments)},warn:function(){var n;return(n=console).warn.apply(n,arguments)}});r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./HoverButton.ts","./index5.ts","./DrawDebugBorder.ts","./index25.ts","./index15.ts","./HexagonLayout.ts","./NineGridLayout.ts","./index6.ts","./GameManager.ts","./Init.ts","./Player.ts","./Event2.ts","./EventBus.ts","./EventListener.ts","./index12.ts","./interfaces8.ts","./Exceptions.ts","./index21.ts","./index32.ts","./ResourceManager.ts","./index16.ts","./Helpers.ts","./TemplateHelper.ts","./TemplateManager.ts","./Templates.ts","./index.ts","./interfaces9.ts","./constants2.ts","./datas.ts","./enums4.ts","./index28.ts","./interfaces.ts","./index20.ts","./BattleManager.ts","./StartBattleButton.ts","./BehaviorTreeMod.ts","./StateMachineMod.ts","./enums8.ts","./index4.ts","./interfaces4.ts","./AnimMod.ts","./index29.ts","./AttrMod.ts","./constants3.ts","./index9.ts","./BuffBox.ts","./BuffMod.ts","./AbstractCondition.ts","./AbstractEventCondition.ts","./AbstractOngoingCondition.ts","./Condition_10_UnitDead.ts","./Event_0_Direct.ts","./Ongoing_1_Time.ts","./Ongoing_2_Value.ts","./index3.ts","./BuffEffect.ts","./BuffEffect_0_Default.ts","./BuffEffect_10_Resist.ts","./BuffEffect_11_Shield.ts","./BuffEffect_13_SharedDamage.ts","./BuffEffect_7_CannotCure.ts","./index31.ts","./enums7.ts","./index23.ts","./interfaces6.ts","./utils3.ts","./CalcMod.ts","./DamageResult.ts","./index27.ts","./BattleContext.ts","./constants.ts","./enums3.ts","./index30.ts","./interfaces2.ts","./enums.ts","./event.ts","./index22.ts","./AbstractImpact.ts","./Impact_0_XXX.ts","./Impact_1_Attack.ts","./Impact_2_Projectile.ts","./Impact_3_HookBuff.ts","./Impact_4_Breakup.ts","./Impact_5_MP.ts","./Impact_7_Cure.ts","./enums5.ts","./index24.ts","./interfaces7.ts","./utils2.ts","./index10.ts","./LifecycleMod.ts","./index14.ts","./MovementMod.ts","./index17.ts","./AbstractProjectile.ts","./LinearProjectile.ts","./ProjectileMod.ts","./TrackingProjectile.ts","./enums6.ts","./index19.ts","./interfaces3.ts","./SkillMod.ts","./UnitSkill.ts","./enums2.ts","./index2.ts","./interfaces5.ts","./utils.ts","./StatsMod.ts","./index11.ts","./BattleUnit.ts","./UnitsMod.ts","./index18.ts","./GmManager.ts","./GmPanel.ts","./index13.ts","./index7.ts","./BattleScene.ts","./SpineAnimator.ts","./SpineMove.ts","./index8.ts","./CollectionUtils.ts","./JsonUtils.ts","./Log.ts","./MathUtils.ts","./RandomUtils.ts","./UuidUtils.ts","./index26.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MathUtils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"2c237aTMb1PVKFTKquEr6ah","MathUtils",void 0);t("MathUtils",function(){function t(){}return t.vectorLength=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/MovementMod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index30.ts","./constants.ts"],(function(t){var o,s,i,e,n,a;return{setters:[function(t){o=t.createClass},function(t){s=t.cclegacy,i=t.Vec3},null,function(t){e=t.BATTLE_MAP_WIDTH,n=t.BATTLE_MAP_MARGIN,a=t.BATTLE_MAP_HEIGHT}],execute:function(){s._RF.push({},"61593StZtpPibf/tsaHC3Qx","MovementMod",void 0);t("MovementMod",function(){function t(t){this.owner=void 0,this._pos=new i(0,0,0),this._dir=0,this.targetPos=null,this.isAttacking=!1,this.isMoving=!1,this.moveSpeed=200,this.owner=t}var s=t.prototype;return s.update=function(t){if(this.canMove()&&this.targetPos){var o=this.targetPos.clone().subtract(this._pos);if(o.length()<=this.moveSpeed*t)this.pos.set(this.targetPos.x,this.targetPos.y,this.targetPos.z),this.updateNodePos(new i(0,0,0)),this.targetPos=null,this.owner.animMod.playAnim("wait",!0);else{var s=o.normalize().multiplyScalar(this.moveSpeed*t);this.updateNodePos(s),0!==o.x&&(this._dir=o.x>0?1:-1,this.updateNodeDir()),"move"!==this.owner.animMod.curAnim&&this.owner.animMod.playAnim("move",!0)}}},s.distanceTo=function(t){var o=this.pos.x-t.movementMod._pos.x,s=this.pos.y-t.movementMod._pos.y;return Math.sqrt(o*o+s*s)},s.moveTowards=function(t,o){this.targetPos=t.movementMod._pos.clone(),this.update(o)},s.moveAwayFrom=function(t,o){var s=this.pos.x-t.movementMod._pos.x,i=this.pos.y-t.movementMod._pos.y;if(!(Math.sqrt(s*s+i*i)<.01)){var e=Math.atan2(i,s),n=this.moveSpeed*o;this.pos.x+=Math.cos(e)*n,this.pos.y+=Math.sin(e)*n,this._dir=e,this.isMoving=!0}},s.randomMove=function(t){if(!this.targetPos){var o=100*Math.random()+50,s=Math.random()*Math.PI*2,i=this.pos.clone();i.x+=Math.cos(s)*o,i.y+=Math.sin(s)*o;var r=e/2-n,h=a/2-n;i.x=Math.min(Math.max(i.x,-r),r),i.y=Math.min(Math.max(i.y,-h),h),this.targetPos=i}},s.stopMove=function(){this.targetPos=null},s.canMove=function(){return!this.isAttacking},s.updateNodePos=function(t){var o=this.owner.node;if(o){var s=o.position.add(new i(t.x,t.y)),r=e/2-n,h=a/2-n;s.x>r||s.x<-r||s.y>h||s.y<-h?this.targetPos=null:(o.position=s,this.pos=s)}},s.updateNodeDir=function(){var t=this.owner.node;null!=t&&(t.scale=new i(this._dir,t.scale.y,t.scale.z))},o(t,[{key:"pos",get:function(){return this._pos},set:function(t){this._pos=t}},{key:"dir",get:function(){return this._dir},set:function(t){this._dir=t}}]),t}());s._RF.pop()}}}));

System.register("chunks:///_virtual/NineGridLayout.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,o,l,u,a,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,u=t.Node,a=t.UITransform,c=t.Component}],execute:function(){var s,h,p,f,b,g,d,y,m,w,z,L,N,R,T,v,B,C,G,H,_,x,D,P,W;o._RF.push({},"c96bao4bL9ExZjw9xpUMdv+","NineGridLayout",void 0);var j=l.ccclass,F=l.property;t("NineGridLayout",(s=j("NineGridLayout"),h=F(u),p=F(u),f=F(u),b=F(u),g=F(u),d=F(u),y=F(u),m=F(u),w=F(u),s((N=e((L=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,r(e,"TopLeft",N,n(e)),r(e,"TopRight",R,n(e)),r(e,"BottomLeft",T,n(e)),r(e,"BottomRight",v,n(e)),r(e,"Top",B,n(e)),r(e,"Bottom",C,n(e)),r(e,"Left",G,n(e)),r(e,"Right",H,n(e)),r(e,"Center",_,n(e)),r(e,"width",x,n(e)),r(e,"height",D,n(e)),r(e,"cornerWidth",P,n(e)),r(e,"cornerHeight",W,n(e)),e.anchor=.5,e}i(e,t);var o=e.prototype;return o.start=function(){this.layout()},o.layout=function(){var t=this.width,e=this.height,i=this.cornerWidth,r=this.cornerHeight,n=t-2*i,o=e-2*r;this.setNode(this.TopLeft,-t/2+i/2,e/2-r/2,i,r),this.setNode(this.TopRight,t/2-i/2,e/2-r/2,i,r),this.setNode(this.BottomLeft,-t/2+i/2,-e/2+r/2,i,r),this.setNode(this.BottomRight,t/2-i/2,-e/2+r/2,i,r),this.setNode(this.Top,0,e/2-r/2,n,r),this.setNode(this.Bottom,0,-e/2+r/2,n,r),this.setNode(this.Left,-t/2+i/2,0,i,o),this.setNode(this.Right,t/2-i/2,0,i,o),this.setNode(this.Center,0,0,n,o)},o.setNode=function(t,e,i,r,n){t.setPosition(e,i);var o=t.getComponent(a);o&&o.setContentSize(r,n)},e}(c)).prototype,"TopLeft",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(L.prototype,"TopRight",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(L.prototype,"BottomLeft",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(L.prototype,"BottomRight",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(L.prototype,"Top",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(L.prototype,"Bottom",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(L.prototype,"Left",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(L.prototype,"Right",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(L.prototype,"Center",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(L.prototype,"width",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1130}}),D=e(L.prototype,"height",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 760}}),P=e(L.prototype,"cornerWidth",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),W=e(L.prototype,"cornerHeight",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),z=L))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/Ongoing_1_Time.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractOngoingCondition.ts"],(function(t){var i,n,o;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.AbstractOngoingCondition}],execute:function(){n._RF.push({},"fc5f9pgVfJCIYx8quXnNwut","Ongoing_1_Time",void 0);t("Ongoing_1_Time",function(t){function n(i,n,o){var r,u;return(u=t.call(this,i,n)||this).duration=void 0,u.extraDuration=void 0,u.costTime=void 0,u.duration=Number(null!=(r=o.param)?r:0),u}i(n,t);var o=n.prototype;return o.isMatch=function(){return this.costTime>=this.duration},o.update=function(t){this.costTime+=t},o.changeDuration=function(t){this.extraDuration+=t},o.getDuration=function(){return this.duration+this.extraDuration},o.migrateTo=function(t){this.extraDuration=t.extraDuration,this.costTime=t.costTime},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/Ongoing_2_Value.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractOngoingCondition.ts"],(function(t){var n,e,o,i;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){o=t.cclegacy},function(t){i=t.AbstractOngoingCondition}],execute:function(){o._RF.push({},"e12fdbmLpNHSoZHsNFnZ/Ni","Ongoing_2_Value",void 0);t("Ongoing2Value",function(t){function o(n,e,o){var i,u;return(u=t.call(this,n,e)||this).value=void 0,u._costValue=void 0,u.value=Number(null!=(i=o.param)?i:0),u}n(o,t);var i=o.prototype;return i.isMatch=function(){return this._costValue>=this.value},i.update=function(t){},i.changeCost=function(t){this._costValue+=t},e(o,[{key:"costValue",get:function(){return this._costValue}}]),o}(i));o._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["cc"],(function(i){var e;return{setters:[function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"cae93LDfMRNb7vYCMaEQrBM","Player",void 0);i("Player",(function(i){this.uid=void 0,this.saveName=void 0,this.chooseId=void 0,this.seed=void 0,this.poolId=void 0,this.version=void 0,this.templateName=void 0,this.uid=i}));e._RF.pop()}}}));

System.register("chunks:///_virtual/ProjectileMod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enums6.ts","./index26.ts","./EventListener.ts","./index32.ts","./LinearProjectile.ts","./TrackingProjectile.ts","./Log.ts","./TemplateManager.ts","./Helpers.ts"],(function(e){var t,r,o,n,i,c,a,l,s,u,p;return{setters:[function(e){t=e.inheritsLoose,r=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy},function(e){n=e.ProjectileState,i=e.default},null,function(e){c=e.AbstractEventListener},null,function(e){a=e.LinearProjectile},function(e){l=e.TrackingProjectile},function(e){s=e.Log},function(e){u=e.TemplateManager},function(e){p=e.ProjectileHelper}],execute:function(){o._RF.push({},"cb963lrX3dJI7jkpDBO64/N","ProjectileMod",void 0);e("ProjectileMod",function(e){function o(t){var r;return(r=e.call(this)||this).context=void 0,r.projectileMap=new Map,r.context=t,r}t(o,e);var c=o.prototype;return c.update=function(e){this.context.currentTime;for(var t,o=[],i=r(this.projectileMap.values());!(t=i()).done;){var c=t.value;try{c.update(e),c.projectileState===n.DESTROYED&&o.push(c.id)}catch(e){s.error("弹射物更新失败, ",c.id),o.push(c.id)}for(var a,l=r(o);!(a=l()).done;){var u=a.value;this.destroyProjectile(u)}}},c.init=function(){},c.destroy=function(){},c.onEvent=function(e){},c.createProjectile=function(e,t,r){var o,n=u.inst().helper(p).getTemplate(e);if(null!=n)try{switch(n.type){case i.LINEAR:o=new a(this.context,n,t);break;case i.TRACK:o=new l(this.context,n,t,r);break;default:return void s.error("未知类型弹射物, ",n.type)}this.projectileMap.set(o.id,o)}catch(t){s.error("创建射弹失败, ",e,t)}else s.error("templateProjectile is null, ",e)},c.batchCreateProjectile=function(e,t,o){for(var n,i=r(o);!(n=i()).done;){var c=n.value;this.createProjectile(e,t,c)}},c.destroyProjectile=function(e){var t=this.projectileMap.get(e);return!!t&&(t.destroy(),this.projectileMap.delete(e),!0)},c.destroyProjectilesOwner=function(e){for(var t,o=0,n=[],i=r(this.projectileMap.values());!(t=i()).done;){var c=t.value;c.ownerId===e&&n.push(c.id)}for(var a=0,l=n;a<l.length;a++){var s=l[a];this.destroyProjectile(s)&&o++}return o},o}(c));o._RF.pop()}}}));

System.register("chunks:///_virtual/RandomUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e;return{setters:[function(t){n=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"f1848DGwkBE3aoywgQku+hN","RandomUtils",void 0);var r=t("RandomCore",function(){function t(t){this.seed=void 0,this.multiplier=0x5DEECE66Dn,this.addend=0xBn,this.mask=(1n<<48n)-1n,this.initialSeed=void 0,this.seed=void 0!==t?this.hashSeed(BigInt(t)):this.createRandomSeed(),this.initialSeed=this.seed}var n=t.prototype;return n.setSeed=function(t){this.seed=this.hashSeed(BigInt(t))},n.getSeed=function(){return this.seed},n.reset=function(){this.seed=this.initialSeed},n.saveState=function(){return this.seed},n.restoreState=function(t){this.seed=t},n.hashSeed=function(t){return(t^this.multiplier)&this.mask},n.createRandomSeed=function(){return BigInt(Math.floor(4294967295*Math.random()))^BigInt(Date.now())},n.next=function(){return this.seed=this.seed*this.multiplier+this.addend&this.mask,Number(this.seed>>16n)/65536},n.randomInt=function(t,n){if(t>n){var e=[n,t];t=e[0],n=e[1]}return Math.floor(this.next()*(n-t+1))+t},n.randomFloat=function(t,n){if(t>n){var e=[n,t];t=e[0],n=e[1]}return this.next()*(n-t)+t},n.randomBool=function(t){return void 0===t&&(t=.5),this.next()<t},n.randomChoice=function(t){if(0===t.length)throw new Error("Array cannot be empty");return t[this.randomInt(0,t.length-1)]},n.randomChoices=function(t,n){if(n>t.length)throw new Error("Count cannot be greater than array length");var e=[].concat(t);return this.shuffleArray(e),e.slice(0,n)},n.shuffleArray=function(t){for(var n=t.length-1;n>0;n--){var e=this.randomInt(0,n),r=[t[e],t[n]];t[n]=r[0],t[e]=r[1]}},t}());t("RandomUtils",function(){function t(t,n){if(this.randomCore=void 0,this.seed=void 0,this.count=0,this.seed=t,this.randomCore=new r(t),this.count=0,n&&n>0)for(var e=0;e<n;e++)this.randomCore.randomInt(0,1),this.count++}var e=t.prototype;return e.getCount=function(){return this.count},e.getSeed=function(){return this.seed},e.gaiLvTo=function(t){return this.randomCore.randomFloat(0,1)<t},e.nextInt=function(t,n){return this.count++,this.randomCore.randomInt(t,n)},e.nextIntMax=function(t){return this.nextInt(0,t)},e.getRanNumByIntervalDouble=function(t,n){return this.count++,this.randomCore.randomFloat(t,n)},e.getRanListByInterval=function(t,n,e){var r=Array.from({length:n-t+1},(function(n,e){return e+t}));return this.randomCore.shuffleArray(r),new Set(r.slice(0,e))},e.randomIndexByWeight=function(t){for(var n=t.reduce((function(t,n){return t+n}),0),e=this.randomCore.randomFloat(0,n),r=0;r<t.length;r++){if(e<t[r])return r;e-=t[r]}return t.length-1},e.random=function(t,n){if(n){var e=t.map(n);return t[this.randomIndexByWeight(e)]}return this.randomCore.randomChoice(t)},e.randoms=function(t,n,e){if(e){for(var r=[],i=[].concat(t),o=0;o<n;o++){var a=this.random(i,e);r.push(a),i.splice(i.indexOf(a),1)}return r}return this.randomCore.randomChoices(t,n)},e.getRandomByWeight=function(t){if(Array.isArray(t))return this.randomIndexByWeight(t);for(var e,r=Object.entries(t).map((function(t){var n=t[0],e=t[1];return[parseInt(n),e]})),i=r.reduce((function(t,n){return t+n[1]}),0),o=this.randomCore.randomFloat(0,i),a=n(r);!(e=a()).done;){var s=e.value,u=s[0],h=s[1];if(o<h)return u;o-=h}return r[r.length-1][0]},e.getRandomByWeightString=function(t,n){void 0===n&&(n=",");var e=t.split(n).map(Number);return this.randomIndexByWeight(e)},e.getRandomManyByWeight=function(t,n,e){void 0===e&&(e=",");for(var r=t.split(e).map(Number),i=new Set;i.size<n;)i.add(this.randomIndexByWeight(r));return i},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var n,e,t,a,o;return{setters:[function(r){n=r.asyncToGenerator,e=r.regeneratorRuntime},function(r){t=r.cclegacy,a=r.resources,o=r.SpriteFrame}],execute:function(){t._RF.push({},"b45e9g2qeVPDJSrqZaUYOmd","ResourceManager",void 0),r("ResourceManager",function(){function r(){this.headIconMap=new Map,this.heroCardMap=new Map,this.borderMap=new Map,this.skillMap=new Map}r.inst=function(){return this._instance||(this._instance=new r),this._instance};var t=r.prototype;return t.loadAllResources=function(){var r=n(e().mark((function r(){var n;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([this.loadHeadIcon(),this.loadBorder(),this.loadHeroCard(),this.loadSkill()]);case 2:return n=r.sent,r.abrupt("return",n.every((function(r){return!0===r})));case 4:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),t.loadHeadIcon=function(){var r=n(e().mark((function r(){var n=this;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,e){a.loadDir("icon/head",o,(function(e,t){e?r(!1):(t.forEach((function(r){return n.headIconMap.set(r.name,r)})),r(!0))}))})));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),t.loadHeroCard=function(){var r=n(e().mark((function r(){var n=this;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,e){a.loadDir("hero",o,(function(e,t){e?r(!1):(t.forEach((function(r){return n.heroCardMap.set(r.name,r)})),r(!0))}))})));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),t.loadBorder=function(){var r=n(e().mark((function r(){var n=this;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,e){a.loadDir("border",o,(function(e,t){e?r(!1):(t.forEach((function(r){return n.borderMap.set(r.name,r)})),r(!0))}))})));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),t.loadSkill=function(){var r=n(e().mark((function r(){var n=this;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,e){a.loadDir("icon/skill",o,(function(e,t){e?r(!1):(t.forEach((function(r){return n.skillMap.set(r.name,r)})),r(!0))}))})));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),t.getHeadIcon=function(r){return this.headIconMap.get(r)},t.getHeroCard=function(r){return this.heroCardMap.get(r)},t.getBorder=function(r){return this.borderMap.get(r)},t.getSkill=function(r){return this.skillMap.get(r)},r}())._instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/SkillMod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enums2.ts","./index32.ts","./index26.ts","./utils.ts","./TemplateManager.ts","./Helpers.ts","./Log.ts"],(function(t){var i,l,n,s,u,r,e;return{setters:[function(t){i=t.createClass},function(t){l=t.cclegacy},function(t){n=t.SkillState},null,null,function(t){s=t.SkillFactory},function(t){u=t.TemplateManager},function(t){r=t.SkillHelper},function(t){e=t.Log}],execute:function(){l._RF.push({},"12ae0etD2lMu7Vx7m1EWL6W","SkillMod",void 0);t("SkillMod",function(){function t(t){this.owner=void 0,this.skillMap=new Map,this._curCastingSkill=null,this.owner=t}var l=t.prototype;return l.init=function(){var t=this,i=this.owner.templateUnit,l=u.inst().helper(r);i.skills.forEach((function(i){var n=l.getTemplate(i);if(null!=n){var u=s.createSkill(n);t.skillMap.set(n.type,u)}else e.error("Skill "+i+" not found")}))},l.update=function(t){(this.skillMap.forEach((function(i){return i.update(t)})),this._curCastingSkill)&&(0===this._curCastingSkill.curState()&&(this._curCastingSkill=null))},l.destroy=function(){this.skillMap.clear(),this._curCastingSkill=null},l.castSkill=function(t,i,l){if(this.canCastSkill()){var s=this.skillMap.get(t);s&&(this._curCastingSkill&&this._curCastingSkill.curState()===n.CASTING&&this._curCastingSkill.interrupt(),this._curCastingSkill=s,s.cast(i,l))}},l.interrupt=function(){this._curCastingSkill&&(this._curCastingSkill.interrupt(),this._curCastingSkill=null)},l.canCastSkill=function(){return!this._curCastingSkill||this._curCastingSkill.curState()!==n.CASTING},l.isCasting=function(){return null!=this._curCastingSkill},i(t,[{key:"curCastingSkill",get:function(){return this._curCastingSkill}}]),t}());l._RF.pop()}}}));

System.register("chunks:///_virtual/SpineAnimator.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index26.ts","./Log.ts"],(function(n){var t,o,i,e,r,a,s,p,l,u,c,d,m,h,f;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,i=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,s=n.sp,p=n.Node,l=n.Label,u=n.Button,c=n.Sprite,d=n.UITransform,m=n.Color,h=n.Component},null,function(n){f=n.Log}],execute:function(){var A,g,w,y,C,b,S,v,D,k,L,B,z;r._RF.push({},"b1d4fZgKdNMTqIDx0DksM65","SpineAnimator",void 0);var O=a.ccclass,E=a.property;n("SpineAnimator",(A=O("SpineAnimator"),g=E(s.Skeleton),w=E(p),y=E({type:l,tooltip:"显示当前选中动画名称的标签"}),C=E({type:p,tooltip:"下拉选项列表容器"}),b=E({type:u,tooltip:"下拉框按钮"}),A((D=t((v=function(n){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,i(t,"skeleton",D,e(t)),i(t,"dropdownNode",k,e(t)),i(t,"currentAnimLabel",L,e(t)),i(t,"optionsContainer",B,e(t)),i(t,"dropdownButton",z,e(t)),t.animations=[],t.isDropdownOpen=!1,t.optionButtons=[],t}o(t,n);var r=t.prototype;return r.start=function(){this.initializeAnimations(),this.setupDropdown()},r.initializeAnimations=function(){if(this.skeleton)if(this.skeleton.skeletonData){var n=this.skeleton.skeletonData;this.animations=Object.keys(n.getAnimsEnum())}else f.error("[SpineAnimator] Skeleton data is not loaded");else f.error("[SpineAnimator] Skeleton component is not assigned")},r.setupDropdown=function(){0!==this.animations.length?(this.dropdownButton&&this.dropdownButton.node.on(u.EventType.CLICK,this.toggleDropdown,this),this.createOptionButtons(),this.optionsContainer&&(this.optionsContainer.active=!1)):console.warn("[SpineAnimator] No animations to setup dropdown")},r.createOptionButtons=function(){var n=this;this.optionsContainer?(this.optionsContainer.removeAllChildren(),this.optionButtons=[],this.animations.forEach((function(t,o){var i=new p("Option_"+o),e=i.addComponent(u),r=(i.addComponent(c),new p("Label")),a=r.addComponent(l);i.addComponent(d).setContentSize(200,30),a.string=t,a.fontSize=20,a.color=new m(0,0,0,255),r.parent=i,e.node.on(u.EventType.CLICK,(function(){n.onAnimationSelected(t)}),n),i.parent=n.optionsContainer,n.optionButtons.push(e)}))):f.error("[SpineAnimator] Options container is not assigned")},r.toggleDropdown=function(){this.optionsContainer&&(this.isDropdownOpen=!this.isDropdownOpen,this.optionsContainer.active=this.isDropdownOpen)},r.onAnimationSelected=function(n){this.playAnimation(n),this.updateCurrentAnimLabel(n),this.toggleDropdown()},r.playAnimation=function(n,t){if(void 0===t&&(t=!0),this.skeleton)if(n)try{this.skeleton.setAnimation(0,n,t),f.info("[SpineAnimator] Playing animation: "+n)}catch(t){f.error("[SpineAnimator] Failed to play animation: "+n,t)}else f.error("[SpineAnimator] Animation name is empty");else f.error("[SpineAnimator] Skeleton is not assigned")},r.updateCurrentAnimLabel=function(n){this.currentAnimLabel&&(this.currentAnimLabel.string=n)},r.getAnimations=function(){return[].concat(this.animations)},r.onDestroy=function(){this.dropdownButton&&this.dropdownButton.node.off(u.EventType.CLICK,this.toggleDropdown,this),this.optionButtons.forEach((function(n){n.node.off(u.EventType.CLICK)}))},t}(h)).prototype,"skeleton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(v.prototype,"dropdownNode",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(v.prototype,"currentAnimLabel",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(v.prototype,"optionsContainer",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(v.prototype,"dropdownButton",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=v))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/SpineMove.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,s,o,a,r,c,l,h,p,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,r=e.sp,c=e.Vec3,l=e.input,h=e.Input,p=e.KeyCode,m=e.Component}],execute:function(){var u,y,v,k,A,D;o._RF.push({},"c90943E8yNNkrQsqFTB/hmS","SpineMove",void 0);var f=a.ccclass,_=a.property;e("SpineMove",(u=f("SpineMove"),y=_(r.Skeleton),u((A=t((k=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"skeleton",A,s(t)),n(t,"moveSpeed",D,s(t)),t.moveDir=new c,t.currentAnim="wait",t.isAttacking=!1,t.attackHold=!1,t.lastScaleX=1,t}i(t,e);var o=t.prototype;return o.start=function(){l.on(h.EventType.KEY_DOWN,this.onKeyDown,this),l.on(h.EventType.KEY_UP,this.onKeyUp,this),this.lastScaleX=this.node.scale.x,this.playAnim("wait",!0)},o.update=function(e){if(!this.isAttacking){if(this.moveDir.length()>0){var t=this.moveDir.clone().normalize().multiplyScalar(this.moveSpeed*e);this.node.position=this.node.position.add(t),0!==this.moveDir.x&&(this.lastScaleX=this.moveDir.x>0?1:-1,this.node.scale=new c(this.lastScaleX,1,1)),"move"!==this.currentAnim&&this.playAnim("move",!0)}else this.isAttacking||"wait"===this.currentAnim||this.playAnim("wait",!0);this.attackHold&&!this.isAttacking&&this.playAttack()}},o.onKeyDown=function(e){switch(e.keyCode){case p.ARROW_UP:case p.KEY_W:this.moveDir.y=1;break;case p.ARROW_DOWN:case p.KEY_S:this.moveDir.y=-1;break;case p.ARROW_LEFT:case p.KEY_A:this.moveDir.x=-1;break;case p.ARROW_RIGHT:case p.KEY_D:this.moveDir.x=1;break;case p.SPACE:this.attackHold=!0}},o.onKeyUp=function(e){switch(e.keyCode){case p.ARROW_UP:case p.KEY_W:1===this.moveDir.y&&(this.moveDir.y=0);break;case p.ARROW_DOWN:case p.KEY_S:-1===this.moveDir.y&&(this.moveDir.y=0);break;case p.ARROW_LEFT:case p.KEY_A:-1===this.moveDir.x&&(this.moveDir.x=0);break;case p.ARROW_RIGHT:case p.KEY_D:1===this.moveDir.x&&(this.moveDir.x=0);break;case p.SPACE:this.attackHold=!1}},o.playAttack=function(){var e=this;this.skeleton&&!this.isAttacking&&(this.isAttacking=!0,this.playAnim("attack",!1,(function(){e.isAttacking=!1,e.attackHold?e.playAttack():e.moveDir.length()>0?e.playAnim("move",!0):e.playAnim("wait",!0)})))},o.playAnim=function(e,t,i){this.skeleton&&(this.currentAnim===e&&t||(this.currentAnim=e,this.skeleton.setCompleteListener(null),this.skeleton.setAnimation(0,e,t),!t&&i&&this.skeleton.setCompleteListener((function(t){t.animation.name===e&&i()}))))},o.onDestroy=function(){l.off(h.EventType.KEY_DOWN,this.onKeyDown,this),l.off(h.EventType.KEY_UP,this.onKeyUp,this),this.skeleton&&this.skeleton.setCompleteListener(null)},t}(m)).prototype,"skeleton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(k.prototype,"moveSpeed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),v=k))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/StartBattleButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleManager.ts","./index30.ts","./datas.ts","./index26.ts","./BattleScene.ts","./enums3.ts","./Log.ts","./UuidUtils.ts"],(function(t){var e,n,a,r,i,o,u,s,c,l,p;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,a=t._decorator,r=t.Component},function(t){i=t.BattleManager},null,function(t){o=t.TeamData,u=t.UnitData},null,function(t){s=t.BattleScene},function(t){c=t.CampEnum},function(t){l=t.Log},function(t){p=t.UuIdUtils}],execute:function(){var d;n._RF.push({},"4259drpmAxP57JKLH0h0sdS","StartBattleButton",void 0);var f=a.ccclass;a.property,t("StartBattleButton",f("StartBattleButton")(d=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var a=n.prototype;return a.start=function(){},a.update=function(t){},a.onClick=function(){var t=new Map;t.set(c.PLAYER,this.createTeamData()),t.set(c.ENEMY,this.createTeamData());var e=i.inst().createBattle({id:1},1,t),n=this.node.parent.getComponent(s);null!=n?n.switchContext(e):l.error("Battle scene does not exist")},a.createTeamData=function(){var t=new o;t.id=p.getNextId();for(var e=0;e<5;e++){var n=this.createUnitData(e<2?1001:1002);t.unitMap.set(e,n)}return t},a.createUnitData=function(t){var e=new u;return e.id=p.getNextId(),e.templateId=t,e.level=1,e.quality=1,e.equipMap=new Map,e},n}(r))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/StateMachineMod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enums8.ts","./index26.ts","./Log.ts"],(function(t){var e,n,i,r;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.UnitStateEnum},null,function(t){r=t.Log}],execute:function(){n._RF.push({},"d6665YGdMJEO7XohiWbmf0k","StateMachineMod",void 0);t("StateMachineMod",function(){function t(t){this.owner=void 0,this.curState=null,this.stateCache=new Map,this.currentTarget=null,this.nextTickTime=0,this.nextActionTime=0,this.owner=t}var e=t.prototype;return e.update=function(t){this.curState&&this.curState.update(this,t)},e.init=function(){this.enterNewState(i.BORN)},e.destroy=function(){},e.getCurTarget=function(){return this.currentTarget},e.enterNewState=function(t){var e=this.stateCache.get(t);if(!e){if(!(e=this.createNewState(t)))return;this.stateCache.set(t,e)}this.curState&&this.curState.exit(this),this.curState=e,this.curState.enter(this)},e.createNewState=function(t){var e=null;switch(t){case i.BORN:e=new o;break;case i.IDLE:e=new u;break;case i.CHASE:e=new c;break;case i.ACTION:e=new s;break;case i.FLEE:e=new h;break;case i.WANDER:e=new f;break;case i.DEAD:e=new m}return e},t}());var a=t("BasicState",function(){function t(t){this.unitStateEnum=void 0,this.unitStateEnum=t}var e=t.prototype;return e.enter=function(t){},e.exit=function(t){},e.update=function(t,e){},t}()),o=t("BornState",function(t){function n(){return t.call(this,i.BORN)||this}e(n,t);var a=n.prototype;return a.enter=function(t){r.info("AI进入出生状态")},a.update=function(t){t.enterNewState(i.IDLE)},n}(a)),u=t("IdleState",function(t){function n(){var e;return(e=t.call(this,i.IDLE)||this).waitTime=0,e.timer=0,e}e(n,t);var a=n.prototype;return a.enter=function(t){r.debug("AI进入等待状态 等待时间:",this.waitTime),t.owner.animMod.playAnim("wait",!0),this.waitTime=2*Math.random()+1,this.timer=0},a.update=function(t,e){this.timer+=e,this.timer>=this.waitTime&&t.enterNewState(i.WANDER)},n}(a)),c=t("ChaseState",function(t){function n(){return t.call(this,i.CHASE)||this}e(n,t);var a=n.prototype;return a.enter=function(t){r.debug("进入追击状态")},a.update=function(t,e){var n=t.owner.stateMachineMod.getCurTarget();n?t.owner.movementMod.distanceTo(n)<1.5?t.enterNewState(i.ACTION):t.owner.movementMod.moveTowards(n,e):t.enterNewState(i.IDLE)},n}(a)),s=t("ActionState",function(t){function n(){var e;return(e=t.call(this,i.ACTION)||this).casting=!1,e.actionTime=0,e}e(n,t);var a=n.prototype;return a.enter=function(t){r.info("AI进入行动状态"),t.owner.animMod.playAnim("attack",!0),this.actionTime=0},a.update=function(t,e){this.actionTime+=e,this.actionTime>2&&t.enterNewState(i.IDLE)},n}(a)),h=t("FleeState",function(t){function n(){var e;return(e=t.call(this,i.FLEE)||this).fleeTime=0,e.timer=0,e}e(n,t);var a=n.prototype;return a.enter=function(t){r.info("AI进入逃离状态"),this.fleeTime=2*Math.random()+2,this.timer=0},a.update=function(t,e){var n=t.owner.target;this.timer+=e,n&&t.owner.movementMod.moveAwayFrom(n,e),this.timer>=this.fleeTime&&t.enterNewState(i.IDLE)},n}(a)),m=t("DeadState",function(t){function n(){return t.call(this,i.DEAD)||this}e(n,t);var r=n.prototype;return r.enter=function(t){},r.update=function(t,e){},n}(a)),f=t("WanderState",function(t){function n(){var e;return(e=t.call(this,i.WANDER)||this).wanderTime=0,e.timer=0,e}e(n,t);var a=n.prototype;return a.enter=function(t){r.debug("AI进入徘徊状态"),this.wanderTime=3*Math.random(),this.timer=0},a.update=function(t,e){if(this.timer+=e,t.owner.movementMod.randomMove(e),t.owner.checkEnemyInRange())return t.owner.movementMod.stopMove(),void t.enterNewState(i.ACTION);this.timer>=this.wanderTime&&(t.owner.movementMod.stopMove(),t.enterNewState(i.IDLE))},n}(a));n._RF.pop()}}}));

System.register("chunks:///_virtual/StatsMod.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"1a347UE0i9Fx5Qtiv2hxa5+","StatsMod",void 0);t("StatsMod",function(){function t(t){this.owner=void 0,this.totalDamageDealt=void 0,this.totalDamageTaken=void 0,this.totalHealing=void 0,this.skillsUsed=void 0,this.criticalHits=void 0,this.dodges=void 0,this.killCount=void 0,this.survivalTime=void 0,this.owner=t}var i=t.prototype;return i.update=function(t){this.survivalTime+=t},i.init=function(){},i.destroy=function(){},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/TemplateHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index26.ts","./Log.ts","./JsonUtils.ts"],(function(e){var t,r,n,a,i,u;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime,n=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy},null,function(e){i=e.Log},function(e){u=e.readInJson}],execute:function(){a._RF.push({},"9f775RXVH1ECYOrm7dPDOb+","TemplateHelper",void 0);e("TemplateHelper",function(){function e(e){this.fileName=void 0,this.dataMap=new Map,this.fileName=e}var a=e.prototype;return a.getTemplate=function(e){return this.dataMap.get(e)},a.getAll=function(){return this.dataMap.values()},a.load=function(){var e=t(r().mark((function e(t){var a,o,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u("template/"+t);case 3:if(a=e.sent,Array.isArray(a)){e.next=7;break}return i.error("配置文件 "+t+" 格式错误"),e.abrupt("return",!1);case 7:for(this.dataMap.clear(),o=n(a);!(s=o()).done;)c=s.value,this.dataMap.has(c.id)&&i.warn("重复的配置 id: "+c.id+" in "+t),this.dataMap.set(c.id,c);if(this.configCheck()){e.next=12;break}return i.error("配置检查失败: "+t),e.abrupt("return",!1);case 12:return e.abrupt("return",!0);case 15:return e.prev=15,e.t0=e.catch(0),i.error("加载配置失败: "+t,e.t0),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),e}());a._RF.pop()}}}));

System.register("chunks:///_virtual/TemplateManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,a;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime,r=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy}],execute:function(){e("templateHelper",(function(e){return i.push(e),e})),a._RF.push({},"14766qHx2FJdLUPfohpP0Sn","TemplateManager",void 0),e("TemplateManager",function(){function e(){this._data=new Map}e.inst=function(){return this._instance||(this._instance=new e,this._instance.init()),this._instance};var a=e.prototype;return a.init=function(){},a.load=function(){var e=t(n().mark((function e(){var t,a,u,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.map((function(e){return new e})),a=r(t);case 2:if((u=a()).done){e.next=11;break}return c=u.value,e.next=6,c.load(c.fileName);case 6:if(e.sent){e.next=8;break}return e.abrupt("return",!1);case 8:this._data.set(c.constructor,c);case 9:e.next=2;break;case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.helper=function(e){return this._data.get(e)},e}())._instance=void 0;var i=[];a._RF.pop()}}}));

System.register("chunks:///_virtual/Templates.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"625d0/UCWdM94whu6I71Nic","Templates",void 0);i("TemplateConst",(function(){this.id=void 0,this.params=void 0,this.desc=void 0})),i("TemplateBattle",(function(){this.id=void 0})),i("TemplateUnit",(function(){this.id=void 0,this.name=void 0,this.quality=void 0,this.ad=void 0,this.ap=void 0,this.armor=void 0,this.resist=void 0,this.hp=void 0,this.hpRecover=void 0,this.atkSpeed=void 0,this.moveSpeed=void 0,this.adUp=void 0,this.apUp=void 0,this.armorUp=void 0,this.resistUp=void 0,this.hpUp=void 0,this.hpRecoverUp=void 0,this.skills=[],this.labels=[],this.desc=void 0})),i("TemplateSkill",(function(){this.id=void 0,this.name=void 0,this.type=void 0,this.castTime=void 0,this.recoveryTime=void 0,this.toSelfImpacts=[],this.toOtherImpacts=[],this.coldDown=void 0,this.targetSelector=void 0,this.selectorParam=void 0,this.desc=void 0})),i("TemplateBuff",(function(){this.id=void 0,this.effects=[],this.purpose=void 0,this.disposedRule=void 0,this.priority=void 0,this.bubbleTipsId=void 0,this.maxStack=void 0,this.visible=void 0,this.canBreak=void 0,this.replaceRule=void 0,this.mutes=[],this.desc=void 0})),i("TemplateBuffEffect",(function(){this.id=void 0,this.effectId=void 0,this.activeCondition=void 0,this.disposedCondition=void 0,this.param1=void 0,this.param2=void 0,this.param3=void 0,this.param4=void 0,this.param5=void 0,this.param11=void 0,this.param12=void 0,this.param13=void 0,this.desc=void 0})),i("TemplateImpact",(function(){this.id=void 0,this.impact=void 0,this.probability=void 0,this.selector=void 0,this.param1=void 0,this.param2=void 0,this.param3=void 0,this.param4=void 0,this.param5=void 0,this.desc=void 0})),i("TemplateProjectile",(function(){this.id=void 0,this.name=void 0,this.type=void 0,this.speed=void 0,this.range=void 0,this.hitRadius=void 0,this.lifeTime=void 0,this.hitCount=void 0,this.hitImpacts=[],this.modelId=void 0,this.hitSoundId=void 0,this.desc=void 0})),i("TemplateAnimation",(function(){this.id=void 0,this.clip=void 0,this.loop=void 0,this.speed=void 0,this.priority=void 0})),i("TemplateEquip",(function(){this.id=void 0,this.attrs=void 0,this.effects=[]})),i("TemplateAward",(function(){this.id=void 0,this.random=[],this.weight=[],this.must=[]})),i("TemplateItem",(function(){this.id=void 0,this.type=void 0,this.quality=void 0,this.name=void 0,this.desc=void 0})),i("TemplateLabel",(function(){this.id=void 0,this.label=void 0,this.desc=void 0})),i("TemplateProduct",(function(){this.id=void 0,this.rewardId=void 0,this.slot=void 0,this.weight=void 0,this.name=void 0,this.desc=void 0})),i("TemplateRoutine",(function(){this.id=void 0,this.desc=void 0})),i("TemplateSuit",(function(){this.id=void 0,this.suitId=void 0,this.name=void 0,this.nameKey=void 0,this.pieces2=[],this.pieces4=[],this.desc=void 0,this.descKey=void 0})),i("TemplateTips",(function(){this.id=void 0,this.type=void 0,this.key=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/TrackingProjectile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractProjectile.ts"],(function(t){var e,i,o,n;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,o=t.Vec2},function(t){n=t.AbstractProjectile}],execute:function(){i._RF.push({},"1207eBRAc9JTJLc4O2ceQ3X","TrackingProjectile",void 0);t("TrackingProjectile",function(t){function i(e,i,o,n){var r;return(r=t.call(this,e,i,o)||this).target=void 0,r.target=n,r}e(i,t);var n=i.prototype;return n.onInit=function(){},n.onUpdate=function(t){if(this.target&&!this.target.isDead()){var e=new o(this.target.movementMod.pos.x-this.pos.x,this.target.movementMod.pos.y-this.pos.y);this.direction=e.normalize(),this.velocity=new o(this.direction.x*this.templateProjectile.speed,this.direction.y*this.templateProjectile.speed)}},n.onHit=function(t){},i}(n));i._RF.pop()}}}));

System.register("chunks:///_virtual/UnitSkill.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enums2.ts"],(function(t){var i,e,s,n;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy},function(t){s=t.SkillState,n=t.SkillType}],execute:function(){e._RF.push({},"ba639iuOhxBRaGRt76A0Qun","UnitSkill",void 0);var l=t("CastSkill",function(){function t(t,i){this.templateSkill=void 0,this.skillType=void 0,this.state=s.READY,this.castTimer=0,this.cooldownTimer=0,this.templateSkill=i,this.skillType=t}var i=t.prototype;return i.curState=function(){return this.state},i.cast=function(t,i){this.state===s.READY&&(this.state=s.CASTING,this.castTimer=this.templateSkill.castTime)},i.interrupt=function(){this.state!==s.READY&&(this.state=s.INTERRUPTED,this.castTimer=0,this.cooldownTimer=0)},i.update=function(t){switch(this.state){case s.CASTING:this.castTimer-=t,this.castTimer<=0&&(this.hit(),this.state=s.COOLDOWN,this.cooldownTimer=this.templateSkill.recoveryTime);break;case s.COOLDOWN:this.cooldownTimer-=t,this.cooldownTimer<=0&&(this.state=s.READY);break;case s.INTERRUPTED:this.state=s.READY}},i.hit=function(){},t}());t("CommonSkill",function(t){function e(i){return t.call(this,n.COMMON,i)||this}return i(e,t),e.prototype.update=function(i){t.prototype.update.call(this,i)},e}(l)),t("UltimateSkill",function(t){function e(i){return t.call(this,n.ULTIMATE,i)||this}return i(e,t),e.prototype.update=function(i){t.prototype.update.call(this,i)},e}(l)),t("PassiveSkill",function(){function t(t){this.skillType=void 0,this.templateSkill=void 0,this.skillType=n.PASSIVE,this.templateSkill=t}return t.prototype.update=function(t){},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UnitsMod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BattleUnit.ts","./index30.ts","./EventListener.ts","./index32.ts","./index26.ts","./TemplateManager.ts","./Helpers.ts","./Log.ts","./enums3.ts"],(function(t){var e,n,i,a,s,o,u,p,r;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy},function(t){a=t.BattleUnit},null,function(t){s=t.AbstractEventListener},null,null,function(t){o=t.TemplateManager},function(t){u=t.UnitHelper},function(t){p=t.Log},function(t){r=t.CampEnum}],execute:function(){i._RF.push({},"a5bddEe/mBGUIhRpDzR16dD","UnitsMod",void 0);t("UnitsMod",function(t){function i(e,n){var i;return(i=t.call(this)||this).context=void 0,i.unitsMap=new Map,i.deathMap=new Map,i.playerUnitsMap=new Map,i.enemyUnitsMap=new Map,i.context=e,i.initTeam(r.PLAYER,n),i.initTeam(r.ENEMY,n),i}e(i,t);var s=i.prototype;return s.initTeam=function(t,e){for(var i,s=o.inst().helper(u),r=e.get(t),c=this.getCampUnitsMap(t),l=n(r.unitMap.entries());!(i=l()).done;){var m=i.value,M=m[0],f=m[1],h=s.getTemplate(f.templateId);if(null!=h){var d=a.createBattleUnit(this.context,h,t,M,f);c.set(d.id,d),this.unitsMap.set(d.id,d)}else p.error("templateUnit is null, ",f.templateId)}},s.update=function(t){this.unitsMap.forEach((function(e){e.update(t)})),this.cleanupDeadUnits()},s.init=function(){},s.destroy=function(){},s.onEvent=function(t){},s.addBattleUnit=function(t){t&&(this.unitsMap.set(t.id,t),t.campEnum===r.PLAYER?this.playerUnitsMap.set(t.id,t):t.campEnum===r.ENEMY&&this.enemyUnitsMap.set(t.id,t))},s.getBattleUnit=function(t){return this.unitsMap.get(t)||null},s.removeBattleUnit=function(t){var e=this.unitsMap.get(t);e&&(this.unitsMap.delete(t),e.campEnum===r.PLAYER?this.playerUnitsMap.delete(t):e.campEnum===r.ENEMY&&this.enemyUnitsMap.delete(t),this.deathMap.set(t,e))},s.getCampUnitsMap=function(t){switch(t){case r.PLAYER:return this.playerUnitsMap;case r.ENEMY:return this.enemyUnitsMap;default:return this.unitsMap}},s.findUnitsInRange=function(t,e,n){var i=this.getCampUnitsMap(n),a=[];if(!i||e<=0)return a;var s=e*e;return i.forEach((function(e){var n=e.movementMod.pos,i=n.x-t.x,o=n.y-t.y;i*i+o*o<=s&&a.push(e)})),a},s.getNearestEnemy=function(t){var e=this.getEnemyCamp(t.campEnum),n=this.getCampUnitsMap(e),i=null,a=Number.MAX_VALUE;return n.forEach((function(e){var n=Number.MAX_VALUE;if(e&&t&&t.movementMod&&"function"==typeof t.movementMod.distanceTo)try{n=t.movementMod.distanceTo(e)}catch(t){n=Number.MAX_VALUE}else{var s=t.position||t.getPosition&&t.getPosition(),o=e.position||e.getPosition&&e.getPosition();if(s&&o){var u=s.x-o.x,p=s.y-o.y;n=Math.sqrt(u*u+p*p)}}n<a&&(a=n,i=e)})),i},s.getEnemyCamp=function(t){return t===r.PLAYER?r.ENEMY:r.PLAYER},s.cleanupDeadUnits=function(){var t=this,e=[];this.unitsMap.forEach((function(t,n){var i=!1;!0===t.isDead?i=!0:"function"==typeof t.isAlive?i=!t.isAlive():"boolean"==typeof t.isAlive?i=!t.isAlive:"number"==typeof t.hp&&(i=t.hp<=0),i&&e.push(n)})),e.forEach((function(e){var n=t.unitsMap.get(e);if(n&&(t.unitsMap.delete(e),t.deathMap.set(e,n),n.campEnum===r.PLAYER?t.playerUnitsMap.delete(e):n.campEnum===r.ENEMY&&t.enemyUnitsMap.delete(e),"function"==typeof n.onDeath))try{n.onDeath()}catch(t){}}))},s.getUnitsMap=function(){return this.unitsMap},s.getEnemyMap=function(t){var e=this.unitsMap.get(t);return null==e?Map.prototype:this.getCampUnitsMap(this.getEnemyCamp(e.campEnum))},i}(s));i._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc","./enums2.ts","./UnitSkill.ts"],(function(t){var n,e,i,c,l;return{setters:[function(t){n=t.cclegacy},function(t){e=t.SkillType},function(t){i=t.UltimateSkill,c=t.PassiveSkill,l=t.CommonSkill}],execute:function(){n._RF.push({},"0977eYYG4xODJKsRD6OcnSJ","utils",void 0);t("SkillFactory",function(){function t(){}return t.createSkill=function(t){var n=t.type;switch(n){case e.COMMON:return new l(t);case e.PASSIVE:return new c(t);case e.ULTIMATE:return new i(t);default:throw new Error("Unknown skill type: "+n)}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/utils2.ts",["cc","./index26.ts","./Impact_1_Attack.ts","./Impact_2_Projectile.ts","./Log.ts"],(function(t){var c,n,e,a;return{setters:[function(t){c=t.cclegacy},null,function(t){n=t.Impact_1_Attack},function(t){e=t.Impact_2_Projectile},function(t){a=t.Log}],execute:function(){c._RF.push({},"29a6e26jiRFP4axNrpXszJm","utils",void 0);t("ImpactFactory",function(){function t(){}return t.createAction=function(t,c,r,i,u){try{var o;switch(i.actionId){case 1:o=new n(t,c,i.actionId,r,i,u);break;case 2:o=new e(t,c,i.actionId,r,i,u);break;default:return null}return o.init(),o.paramCheck()?o:null}catch(t){return a.error("action创建出错 e="+t.message),null}},t}());c._RF.pop()}}}));

System.register("chunks:///_virtual/utils3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index30.ts","./BuffBox.ts","./UuidUtils.ts","./index26.ts","./BuffEffect_0_Default.ts","./Event_0_Direct.ts","./Ongoing_1_Time.ts","./Log.ts","./constants.ts"],(function(t){var e,n,r,o,u,i,c,f,a,s;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy},null,function(t){r=t.BuffBox},function(t){o=t.UuIdUtils},null,function(t){u=t.BuffEffect_0_Default},function(t){i=t.Event_0_Direct},function(t){c=t.Ongoing_1_Time},function(t){f=t.Log},function(t){a=t.SEMICOLON,s=t.ASTERISK}],execute:function(){n._RF.push({},"4a9ccHY7VBEi4PODW1eNJSt","utils",void 0);t("BuffFactory",function(){function t(){}return t.copyBuffBox=function(t){return this.createBuffBox(t.context,t.ownerId,t.generatorId,t.templateBuff)},t.createBuffBox=function(t,e,n,u){try{return r.createBuffBox(t,o.getNextId(),e,n,u)}catch(t){return f.error("createBuffBoxImpl, error",t),null}},t.createBuffEffect=function(t,e,n){var r;switch(n.effectId){case 0:r=new u(t,n,e);break;default:return f.error("BuffEffect未实现, effectId, ",n.effectId),null}return r},t}()),t("ConditionFactory",function(){function t(){}return t.createEventConditionList=function(t,n,r){for(var o,u=[],i=r.split(a),c=e(i);!(o=c()).done;){var f=o.value,s=this.createEventCondition(t,n,f);s&&u.push(s)}return u},t.createEventCondition=function(t,e,n){var r=n.split(s),o=0,u=null;r.length>0&&(o=parseInt(r[0])),r.length>1&&(u=r[1]);var i={param:u};return this.createEventConditionById(t,e,o,i)},t.createEventConditionListFromBinary=function(t,n,r){for(var o,u=[],i=e(r.entries());!(o=i()).done;){var c=o.value,f=c[0],a=c[1],s=this.createEventConditionById(t,n,f,a);s&&u.push(s)}return u},t.createEventConditionById=function(t,e,n,r){try{switch(n){case 0:return new i(t,e);case 1:return new c(t,e,r)}}catch(t){return console.error("ConditionEnum创建失败, error=",t.message),null}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UuidUtils.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"7c485GaLVFMvp8CvhstXU3k","UuidUtils",void 0),t("UuIdUtils",function(){function t(){}return t.getNextId=function(){return this._lastId++,this._lastId>Number.MAX_SAFE_INTEGER&&(this._lastId=1),this._lastId},t.reset=function(){this._lastId=0},t}())._lastId=0,s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});