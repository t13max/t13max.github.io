System.register("chunks:///_virtual/AbstractAction.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"2dbe8av5MRFGJEh1rHsi4wQ","AbstractAction",void 0);t("AbstractAction",function(){function t(t,n,i,o,e,s){this.actionEnum=void 0,this.context=void 0,this.generatorId=void 0,this.skillId=void 0,this.templateAction=void 0,this.targetIds=void 0,this.actionEnum=i,this.context=t,this.generatorId=n,this.skillId=o,this.templateAction=e,this.targetIds=s}var n=t.prototype;return n.init=function(){this.onInit()},n.onInit=function(){},n.destroy=function(){this.onDestroy()},n.onDestroy=function(){},n.paramCheck=function(){return!0},n.postEvent=function(t){return this.context.eventBus.postEvent(t)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/AbstractCondition.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"d0c1bWe/05PD6SVOlh9oA6U","AbstractCondition",void 0);t("AbstractCondition",(function(t,n){this.context=void 0,this.ownerId=void 0,this.context=t,this.ownerId=n}));n._RF.pop()}}}));

System.register("chunks:///_virtual/AbstractEventCondition.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractCondition.ts"],(function(t){var e,n,i,o;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy},function(t){o=t.AbstractCondition}],execute:function(){i._RF.push({},"8722frARONNAIGOGmA8LGNX","AbstractEventCondition",void 0);t("AbstractEventCondition",function(t){function i(e,n){var i;return(i=t.call(this,e,n)||this).interested=void 0,i}return e(i,t),i.prototype.subscribe=function(t){if("string"==typeof t)this.interested.add(t);else for(var e,i=n(t);!(e=i()).done;){var o=e.value;this.interested.add(o)}},i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/AbstractOngoingCondition.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractCondition.ts"],(function(n){var t,i,o;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy},function(n){o=n.AbstractCondition}],execute:function(){i._RF.push({},"c72c1MW+6hJCIdXhRWXYWgy","AbstractOngoingCondition",void 0);n("AbstractOngoingCondition",function(n){function i(t,i){return n.call(this,t,i)||this}return t(i,n),i}(o));i._RF.pop()}}}));

System.register("chunks:///_virtual/AbstractProjectile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enums6.ts","./MathUtils.ts","./utils3.ts","./index27.ts","./index23.ts","./UuidUtils.ts","./TemplateManager.ts","./Helpers.ts","./Log.ts"],(function(t){var e,i,o,s,n,r,c,a,h,l,d;return{setters:[function(t){e=t.createForOfIteratorHelperLoose,i=t.createClass},function(t){o=t.cclegacy,s=t.Vec2},function(t){n=t.ProjectileState},function(t){r=t.MathUtils},function(t){c=t.ActionFactory},null,null,function(t){a=t.UuIdUtils},function(t){h=t.TemplateManager},function(t){l=t.ActionHelper},function(t){d=t.Log}],execute:function(){o._RF.push({},"12ff1H0AAZAYZtRsD3jFYlV","AbstractProjectile",void 0);t("AbstractProjectile",function(){function t(t,e,i){this.context=void 0,this.id=void 0,this.templateProjectile=void 0,this.generatorId=void 0,this.startPos=void 0,this._ownerId=void 0,this.lastUpdateTime=void 0,this.remainingTime=void 0,this._projectileState=void 0,this._pos=void 0,this.direction=void 0,this.velocity=void 0,this.traveledDistance=void 0,this.hitCount=void 0,this.context=t,this.id=a.getNextId(),this.templateProjectile=e,this.generatorId=i,this._ownerId=i}var o=t.prototype;return o.update=function(t){if(this.shouldDestroy())this.onDestroy();else{switch(this.lastUpdateTime=this.context.currentTime,this.remainingTime-=t,this._projectileState){case n.CREATED:this.onStart(),this._projectileState=n.FLYING;break;case n.FLYING:this.updatePosition(t),this.detectionHit(t)}this.onUpdate(t)}},o.init=function(){this._pos=this.startPos.clone(),this.velocity=new s(this.direction.x*this.templateProjectile.speed,this.direction.y*this.templateProjectile.speed),this.traveledDistance=0,this.remainingTime=this.templateProjectile.lifeTime,this._projectileState=n.CREATED,this.onInit()},o.destroy=function(){this.onDestroy()},o.onDestroy=function(){},o.onStart=function(){},o.updatePosition=function(t){this._pos.x+=this.velocity.x*t,this._pos.y+=this.velocity.y*t;var e=r.vectorLength(this.velocity)*t;this.traveledDistance+=e,this.traveledDistance>=this.templateProjectile.range&&this.onReachMaxRange()},o.detectionHit=function(t){for(var i,o=this.context.unitsMod.getEnemyMap(this.ownerId),r=e(o.values());!(i=r()).done;){var c=i.value;if(s.distance(this._pos,c.movementMod.pos)<this.templateProjectile.hitRadius){this.doHit(c),this.projectileState=n.HITTING;break}}},o.shouldDestroy=function(){return this.remainingTime<=0||(this.projectileState===n.DESTROYED||this.traveledDistance>=this.templateProjectile.range)},o.doHit=function(t){for(var i,o=this.templateProjectile.hitActionIds,s=e(o);!(i=s()).done;){var r=i.value,a=h.inst().helper(l.name).getTemplate(r);if(null!=a)c.createAction(this.context,this.ownerId,0,a,[t.id]).onAction();else d.error("templateAction is null, ",r)}this.hitCount++,this.hitCount>=this.templateProjectile.hitCount&&(this.projectileState=n.DESTROYED),this.onHit(t)},o.onReachMaxRange=function(){this._projectileState=n.DESTROYED},i(t,[{key:"ownerId",get:function(){return this._ownerId},set:function(t){this._ownerId=t}},{key:"projectileState",get:function(){return this._projectileState},set:function(t){this._projectileState=t}},{key:"pos",get:function(){return this._pos}}]),t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/Action_1_Attack.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractAction.ts","./index19.ts","./index24.ts","./event.ts","./enums2.ts"],(function(t){var n,e,o,i,c,s,r;return{setters:[function(t){n=t.inheritsLoose,e=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy},function(t){i=t.AbstractAction},null,null,function(t){c=t.OnReadyToSubHpEvent,s=t.OnActionEvent},function(t){r=t.DamageSource}],execute:function(){o._RF.push({},"62b67na5TxMhq4P3NAcrD8y","Action_1_Attack",void 0);t("Action_1_Attack",function(t){function o(n,e,o,i,c,s){return t.call(this,n,o,i,e,c,s)||this}return n(o,t),o.prototype.onAction=function(){for(var t,n=this.context.unitsMod.getBattleUnit(this.generatorId),o=new Map,i=e(this.targetIds);!(t=i()).done;){var a=t.value,u=this.context.unitsMod.getBattleUnit(a);if(u){var l=this.context.calcMod.calcDamage(n,u,this.templateAction);o.set(a,l)}}0!==o.size&&(this.postEvent(new c(this.generatorId,o,r.ACTION_SOURCE)),this.postEvent(new s(this.generatorId)))},o}(i));o._RF.pop()}}}));

System.register("chunks:///_virtual/AnimMod.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,i;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy,i=n.sp}],execute:function(){e._RF.push({},"79842pNCcxOF5DryQCDswja","AnimMod",void 0);n("AnimMod",function(){function n(n){this.owner=void 0,this._curAnim="wait",this.owner=n}var e=n.prototype;return e.update=function(n){},e.init=function(){},e.destroy=function(){},e.playAnim=function(n,t,e){this._curAnim===n&&t||(this._curAnim=n,this.curSkeleton().setCompleteListener(null),this.curSkeleton().setAnimation(0,n,t),!t&&e&&this.curSkeleton().setCompleteListener((function(t){t.animation.name===n&&e()})))},e.curSkeleton=function(){this.owner.node.getComponent(i.Skeleton)},t(n,[{key:"curAnim",get:function(){return this._curAnim}}]),n}());e._RF.pop()}}}));

System.register("chunks:///_virtual/AttrMod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants5.ts","./index26.ts","./index23.ts","./index19.ts","./Log.ts","./event.ts","./constants2.ts"],(function(t){var e,i,n,r,s,a,o;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){i=t.cclegacy},function(t){n=t.AttrKey},null,null,null,function(t){r=t.Log},function(t){s=t.OnAttributeUpdateEvent},function(t){a=t.SEMICOLON,o=t.ASTERISK}],execute:function(){i._RF.push({},"8c38eDzq7BC4pjyBKknWftO","AttrMod",void 0);t("AttrMod",function(){function t(t){this.owner=void 0,this.effectAttrMap=new Map,this.finalAttrMap=new Map,this.die=!1,this.owner=t}var i=t.prototype;return i.update=function(t){},i.init=function(){var t=this.owner.templateUnit,e=this.owner.unitData.level;this.effectAttrMap.set(n.AD_V,t.ad+t.adUp*e),this.effectAttrMap.set(n.AP_V,t.ap+t.apUp*e),this.effectAttrMap.set(n.AD_ARMOR_V,t.adArmor+t.adArmorUp*e),this.effectAttrMap.set(n.AP_ARMOR_V,t.apArmor+t.apArmorUp*e),this.effectAttrMap.set(n.HP_LIMIT_V,t.hp+t.hpUp*e),this.effectAttrMap.set(n.HP_RECOVER_V,t.hpRecover+t.hpRecoverUp*e),this.effectAttrMap.set(n.ATK_SPEED_V,t.atkSpeed),this.effectAttrMap.set(n.MOVE_SPEED_V,t.moveSpeed),this.calcFinalAttr(),this.setCurHp(this.getFinalAttr(n.HP_LIMIT))},i.destroy=function(){this.effectAttrMap.clear(),this.finalAttrMap.clear()},i.calcFinalAttr=function(){for(var t=1;t<32;t++){var e,i=10*t,n=this.effectAttrMap.get(i);if(void 0!==n){var r=i+1,s=null!=(e=this.effectAttrMap.get(r))?e:0;this.finalAttrMap.set(i,n*(1+s/100))}}},i.getFinalAttr=function(t,e){var i;return void 0===e&&(e=!1),e&&this.calcFinalAttr(),null!=(i=this.finalAttrMap.get(t))?i:0},i.subHp=function(t){this.modifyHp(t,!1)},i.addHp=function(t){this.modifyHp(t,!0)},i.modifyHp=function(t,e){var i=this.getFinalAttr(n.HP);this.setCurHp(e?i+t:i-t)},i.setCurHp=function(t){this.finalAttrMap.set(n.HP,t)},i.isAlive=function(){return!this.die&&this.getFinalAttr(n.HP)>0},i.isVerge2Death=function(){return!this.die&&this.getFinalAttr(n.HP)<=0},i.dead=function(){this.die=!0},i.respawn=function(){this.die=!1},i.modifyAttr=function(t,e,i){var a;if(t!==n.HP){var o=null!=(a=this.effectAttrMap.get(t))?a:0,f=o+(i?e:-e);this.effectAttrMap.set(t,f),this.owner.context.eventBus.postEvent(new s(this.owner.id,this.owner.id,t,o,-o,i))}else r.error("禁止直接修改当前血量")},i.modifyAttrByString=function(t,i){for(var n,r=t.split(a),s=e(r);!(n=s()).done;){var f=n.value.split(o),p=parseInt(f[0]),c=parseInt(f[1]),u=parseInt(f[2]),h=0===c?p+1:p+2;this.modifyAttr(h,u,i)}},i.getAttrMap=function(){for(var t,i=new Map,n=e(this.finalAttrMap.entries());!(t=n()).done;){var r=t.value,s=r[0],a=r[1];i.set(s,a)}return i},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/BattleContext.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index16.ts","./index15.ts","./index24.ts","./index27.ts","./index23.ts","./RandomUtils.ts","./EventBus.ts","./UnitsMod.ts","./ProjectileMod.ts","./CalcMod.ts","./Log.ts"],(function(t){var i,n,s,e,o,u,d,c;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy},null,null,null,null,null,function(t){s=t.RandomUtils},function(t){e=t.EventBus},function(t){o=t.UnitsMod},function(t){u=t.ProjectileMod},function(t){d=t.CalcMod},function(t){c=t.Log}],execute:function(){n._RF.push({},"7d96fgOpC9ArqwIEOIzOX0Z","BattleContext",void 0);t("BattleContext",function(){function t(t,i){this.templateBattle=void 0,this.unitsMod=void 0,this.projectileMod=void 0,this.calcMod=void 0,this.eventBus=void 0,this.random=void 0,this.isStarting=!1,this.isPaused=!1,this.battleEnded=!1,this._currentTime=0,this.templateBattle=t,this.eventBus=new e,this.unitsMod=new o(this),this.projectileMod=new u(this),this.calcMod=new d(this),this.random=new s(i),this.onInit(),c.info("战斗管理器初始化完成")}var n=t.prototype;return n.onInit=function(){this.unitsMod.init(),this.projectileMod.init()},n.onDestroy=function(){this.unitsMod.destroy(),this.projectileMod.destroy()},n.update=function(t){this.isActive()&&(this.unitsMod.update(t),this.projectileMod.update(t))},n.destroy=function(){this.onDestroy()},n.pause=function(){this.isPaused||(this.isPaused=!0,this.unitsMod.pause())},n.resume=function(){this.isPaused&&(this.isPaused=!1,this.unitsMod.resume())},n.isActive=function(){return this.isStarting&&!this.battleEnded},i(t,[{key:"currentTime",get:function(){return this._currentTime}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index23.ts","./Log.ts"],(function(i){var t,n,e,o;return{setters:[function(i){t=i.inheritsLoose},function(i){n=i.cclegacy,e=i.Component},null,function(i){o=i.Log}],execute:function(){n._RF.push({},"dbf40yXTF1JMaienZ+QR5bc","BattleManager",void 0);i("BattleManager",function(i){function n(){for(var t,n=arguments.length,e=new Array(n),o=0;o<n;o++)e[o]=arguments[o];return(t=i.call.apply(i,[this].concat(e))||this).battleMap=new Map,t.isInitialized=!1,t}t(n,i);var e=n.prototype;return e.onLoad=function(){o.info("战斗系统组件加载")},e.start=function(){this.initialize()},e.update=function(i){this.isInitialized&&this.battleMap.forEach((function(t){t.update(i)}))},e.onDestroy=function(){o.info("战斗系统组件销毁"),this.isInitialized=!1},e.initialize=function(){this.isInitialized?console.warn("战斗系统已初始化"):(o.info("初始化战斗系统"),this.isInitialized=!0,o.info("战斗系统初始化完成"))},n}(e));n._RF.pop()}}}));

System.register("chunks:///_virtual/BattleUnit.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index8.ts","./index3.ts","./index2.ts","./index14.ts","./index10.ts","./index21.ts","./AnimMod.ts","./index12.ts","./constants5.ts","./AttrMod.ts","./BuffMod.ts","./StateMachineMod.ts","./SkillMod.ts","./MovementMod.ts","./StatsMod.ts","./LifecycleMod.ts"],(function(t){var i,n,s,o,e,d,h,a,M,u,c;return{setters:[function(t){i=t.createClass},function(t){n=t.cclegacy},null,null,null,null,null,null,function(t){s=t.AnimMod},null,function(t){o=t.AttrKey},function(t){e=t.AttrMod},function(t){d=t.BuffMod},function(t){h=t.StateMachineMod},function(t){a=t.SkillMod},function(t){M=t.MovementMod},function(t){u=t.StatsMod},function(t){c=t.LifecycleMod}],execute:function(){n._RF.push({},"6ce86IyEOxAHbSL44Iwmsng","BattleUnit",void 0);t("BattleUnit",function(){function t(t,i,n,o,r){this.context=void 0,this.node=void 0,this.id=void 0,this.templateUnit=void 0,this.unitData=void 0,this.unitCamp=void 0,this.attrMod=void 0,this.buffMod=void 0,this.animMod=void 0,this.stateMachineMod=void 0,this.skillMod=void 0,this.movementMod=void 0,this.statsMod=void 0,this.lifecycleMod=void 0,this._target=void 0,this.context=t,this.id=i,this.templateUnit=n,this.unitCamp=o,this.node=r,this.attrMod=new e(this),this.buffMod=new d(this),this.animMod=new s(this),this.stateMachineMod=new h(this),this.skillMod=new a(this),this.movementMod=new M(this),this.statsMod=new u(this),this.lifecycleMod=new c(this)}t.createBattleUnit=function(i,n,s,o,e){var d=new t(i,n,s,o,e);return d.onInit(),d};var n=t.prototype;return n.update=function(t){this.isDead()||(this.attrMod.update(t),this.buffMod.update(t),this.animMod.update(t),this.stateMachineMod.update(t),this.skillMod.update(t),this.movementMod.update(t),this.statsMod.update(t))},n.onInit=function(){this.attrMod.init(),this.buffMod.init(),this.animMod.init(),this.stateMachineMod.init(),this.skillMod.init(),this.movementMod.init(),this.statsMod.init()},n.onDestroy=function(){this.attrMod.destroy(),this.buffMod.destroy(),this.animMod.destroy(),this.stateMachineMod.destroy(),this.skillMod.destroy(),this.movementMod.destroy(),this.statsMod.destroy()},n.isDead=function(){return this.attrMod.isAlive()},n.getHpPercent=function(){return this.attrMod.getFinalAttr(o.HP)/this.attrMod.getFinalAttr(o.HP_LIMIT)},n.checkEnemyInRange=function(){return Math.random()>.5},i(t,[{key:"target",get:function(){return this._target},set:function(t){this._target=t}}]),t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/BehaviorTreeMod.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"520ab3/RwRBzrXlY5auWbfN","BehaviorTreeMod",void 0);e("BehaviorTreeMod",function(){function e(e){this.owner=void 0,this.owner=e}var t=e.prototype;return t.update=function(e){},t.init=function(){},t.destroy=function(){},e}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BuffBox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index27.ts","./index23.ts","./enums7.ts","./EventListener.ts","./utils2.ts","./index19.ts","./TemplateManager.ts","./Helpers.ts","./Log.ts","./event.ts"],(function(t){var e,f,u,n,s,i,o,r,a,c,d,h;return{setters:[function(t){e=t.inheritsLoose,f=t.createForOfIteratorHelperLoose},function(t){u=t.cclegacy},null,null,function(t){n=t.BuffStatus,s=t.DisposedRule},function(t){i=t.AbstractEventListener},function(t){o=t.BuffFactory},null,function(t){r=t.TemplateManager},function(t){a=t.BuffEffectHelper},function(t){c=t.Log},function(t){d=t.OnBuffActiveEvent,h=t.OnBubbleTipsEvent}],execute:function(){u._RF.push({},"f3c18f/XkZBdqLfjYvxDv0T","BuffBox",void 0);t("BuffBox",function(t){function u(e,f,u,s,i){var o;return(o=t.call(this)||this).context=void 0,o.id=void 0,o.ownerId=void 0,o.generatorId=void 0,o.templateBuff=void 0,o.disposedRule=void 0,o.buffPurpose=void 0,o.buffEffects=new Set,o.layer=0,o.buffStatus=n.ATTACHED,o.context=e,o.id=f,o.ownerId=u,o.generatorId=s,o.templateBuff=i,o.disposedRule=i.disposedRule,o.buffPurpose=i.purpose,o}e(u,t),u.createBuffBox=function(t,e,f,n,s){var i=new u(t,e,f,n,s);return i.onInit(),i};var i=u.prototype;return i.update=function(t){this.buffEffects.forEach((function(e){e.update(t)}))},i.onInit=function(){for(var t,e=this.templateBuff.effect,u=r.inst().helper(a.name),n=f(e);!(t=n()).done;){var s=t.value,i=u.getTemplate(s);if(i){var d=o.createBuffEffect(this.context,this,i);d&&this.buffEffects.add(d)}else c.error("效果不存在 buff="+this.templateBuff.id+", effect="+s)}this.buffEffects.forEach((function(t){return t.init}))},i.destroy=function(t){this.context.unitsMod.getBattleUnit(this.ownerId).buffMod.disposedBuff(this.id,t),this.buffEffects.forEach((function(e){return e.destroy(t)})),this.context.eventBus.unregister(this)},i.onEvent=function(t){switch(t.name){case"TryActiveBuffEvent":if(t.buffBox!==this)break;this.buffStatus===n.ATTACHED&&[].concat(this.buffEffects).some((function(t){return t.getBuffStatus()===n.ACTIVE}))&&this.switchBuffStatus(n.ACTIVE,null);break;case"TryDisposedBuffEvent":var e=t;if(e.buffBox!==this)break;if(this.buffStatus===n.ACTIVE){var f=!1;this.disposedRule===s.ANY?f=[].concat(this.buffEffects).some((function(t){return t.getBuffStatus()===n.REMOVED})):this.disposedRule===s.ALL&&(f=[].concat(this.buffEffects).every((function(t){return t.getBuffStatus()===n.REMOVED}))),f&&this.switchBuffStatus(n.REMOVED,e.destroyReason)}}},i.onHook2Host=function(){this.context.eventBus.register(this),this.buffEffects.forEach((function(t){return t.onHook2Host()}))},i.switchBuffStatus=function(t,e){var f=this.buffStatus;switch(this.buffStatus=t,c.debug("switchBuffStatus pre="+f+" now="+t),t){case n.ACTIVE:this.context.eventBus.postEvent(new d(this)),this.sendBubbleTips();break;case n.REMOVED:this.destroy(e)}},i.sendBubbleTips=function(){this.templateBuff.bubbleTipsId<=0||this.context.eventBus.postEvent(new h(this.ownerId,this.templateBuff.bubbleTipsId))},i.getBuffId=function(){return this.templateBuff.id},i.canBreak=function(){return 1===this.templateBuff.canBreak},i.maxStack=function(){return this.templateBuff.maxStack},i.visible=function(){return 1===this.templateBuff.visible},i.getMuteList=function(){return this.templateBuff.mutes},i.getReplaceRule=function(){return this.templateBuff.replaceRule},i.migrateTo=function(t){for(var e,u=f(this.buffEffects);!(e=u()).done;)for(var n,s=e.value,i=f(t.buffEffects);!(n=i()).done;){var o=n.value;s.migrateTo(o)}},i.addon=function(t){if(this.buffStatus==n.ACTIVE&&this.templateBuff.id==t.getBuffId())for(var e,u=f(this.buffEffects);!(e=u()).done;)for(var s,i=e.value,o=f(t.buffEffects);!(s=o()).done;){var r=s.value;i.addon(r)}},u}(i));u._RF.pop()}}}));

System.register("chunks:///_virtual/BuffEffect_0_Default.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuffEffect.ts"],(function(t){var f,e,n;return{setters:[function(t){f=t.inheritsLoose},function(t){e=t.cclegacy},function(t){n=t.AbstractEffect}],execute:function(){e._RF.push({},"1292dnZkN5P07EbnPHYSOUh","BuffEffect_0_Default",void 0);t("BuffEffect_0_Default",function(t){function e(f,e,n){return t.call(this,f,e,n)||this}return f(e,t),e.prototype.onInit=function(){},e}(n));e._RF.pop()}}}));

System.register("chunks:///_virtual/BuffEffect_10_Resist.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuffEffect.ts"],(function(t){var e,f,n;return{setters:[function(t){e=t.inheritsLoose},function(t){f=t.cclegacy},function(t){n=t.AbstractEffect}],execute:function(){f._RF.push({},"1e819eE6dFCx79PC5uI25YF","BuffEffect_10_Resist",void 0);t("BuffEffect_10_Resist",function(t){function f(e,f,n){return t.call(this,e,f,n)||this}return e(f,t),f.prototype.canResist=function(t){return!1},f}(n));f._RF.pop()}}}));

System.register("chunks:///_virtual/BuffEffect_11_Shield.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuffEffect.ts","./Ongoing_2_Value.ts"],(function(t){var e,n,f,o,i;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){f=t.cclegacy},function(t){o=t.AbstractEffect},function(t){i=t.Ongoing2Value}],execute:function(){f._RF.push({},"4576atmU7tFla7JxceQi8ZK","BuffEffect_11_Shield",void 0);t("BuffEffect_11_Shield",function(t){function f(e,n,f){return t.call(this,e,n,f)||this}return e(f,t),f.prototype.getOngoing2Value=function(){for(var t,e=n(this.disposedConditions);!(t=e()).done;){var f=t.value;if(f instanceof i)return f}return null},f}(o));f._RF.pop()}}}));

System.register("chunks:///_virtual/BuffEffect_13_SharedDamage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuffEffect.ts"],(function(t){var e,f,r;return{setters:[function(t){e=t.inheritsLoose},function(t){f=t.cclegacy},function(t){r=t.AbstractEffect}],execute:function(){f._RF.push({},"58d36cBfFNB2qt7V4+J8qpK","BuffEffect_13_SharedDamage",void 0);t("BuffEffect_13_SharedDamage",function(t){function f(e,f,r){var c;return(c=t.call(this,e,f,r)||this).rate=void 0,c}return e(f,t),f.prototype.getRate=function(){return this.rate},f}(r));f._RF.pop()}}}));

System.register("chunks:///_virtual/BuffEffect_7_CannotCure.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BuffEffect.ts"],(function(t){var n,e,f;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){f=t.AbstractEffect}],execute:function(){e._RF.push({},"b2648855qRCDZndWLJXzI7C","BuffEffect_7_CannotCure",void 0);t("BuffEffect_7_CannotCure",function(t){function e(n,e,f){return t.call(this,n,e,f)||this}return n(e,t),e}(f));e._RF.pop()}}}));

System.register("chunks:///_virtual/BuffEffect.ts",["./rollupPluginModLoBabelHelpers.js","cc","./EventListener.ts","./enums7.ts","./utils2.ts","./index19.ts","./Ongoing_1_Time.ts","./event.ts"],(function(t){var n,i,e,o,s,f,u,c,r,a;return{setters:[function(t){n=t.inheritsLoose,i=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy},function(t){o=t.AbstractEventListener},function(t){s=t.BuffStatus,f=t.DestroyReason},function(t){u=t.ConditionFactory},null,function(t){c=t.Ongoing_1_Time},function(t){r=t.TryActiveBuffEvent,a=t.TryDisposedBuffEvent}],execute:function(){e._RF.push({},"dab1c8JvP1H0p6HscHMOFR8","BuffEffect",void 0);t("AbstractEffect",function(t){function e(n,i,e){var o;return(o=t.call(this)||this).buffBox=void 0,o.templateBuffEffect=void 0,o.context=void 0,o.buffAffectTypes=new Set,o.activeConditions=void 0,o.disposedConditions=void 0,o.buffStatus=s.ATTACHED,o.buffBox=e,o.templateBuffEffect=i,o.context=n,o.activeConditions=u.createEventConditionList(n,o.buffBox.ownerId,i.activeCondition),o.disposedConditions=u.createEventConditionList(n,o.buffBox.ownerId,i.disposedCondition),o}n(e,t);var o=e.prototype;return o.update=function(t){this.activeConditions.forEach((function(n){n.update(t)})),this.disposedConditions.forEach((function(n){n.update(t)})),this.onEvent()},o.init=function(){var t=this;this.buffStatus=s.ATTACHED,this.activeConditions.forEach((function(n){"interested"in n&&t.subscribe(n.interested)})),this.disposedConditions.forEach((function(n){"interested"in n&&t.subscribe(n.interested)})),this.onInit()},o.onInit=function(){},o.destroy=function(t){this.onDestroy(t)},o.onDestroy=function(t){this.activeConditions.length=0,this.disposedConditions.length=0,this.buffBox.context.eventBus.unregister(this)},o.onEvent=function(t){if(this.buffStatus!==s.REMOVED){var n=this.buffBox.ownerId;if(this.context.unitsMod.getBattleUnit(n)){if(this.buffStatus===s.ATTACHED)this.checkAnyConditionMatched(this.activeConditions,t)&&(this.buffStatus=s.ACTIVE,this.context.eventBus.postEvent(new r(this.buffBox)),this.onActive());if(this.buffStatus===s.INACTIVE)this.checkAnyConditionMatched(this.activeConditions,t)||(this.buffStatus=s.INACTIVE,this.onInactive());if(this.buffStatus===s.ACTIVE||this.buffStatus===s.INACTIVE)this.doOnEvent(t),this.checkAnyConditionMatched(this.disposedConditions,t)&&this.disposed(f.REMOVE)}}},o.doOnEvent=function(t){},o.onActive=function(){},o.onInactive=function(){},o.onHook2Host=function(){this.buffBox.context.eventBus.register(this)},o.checkAnyConditionMatched=function(t,n){for(var e,o=i(t);!(e=o()).done;){if(e.value.isMatch(n))return!0}return!1},o.getEffectId=function(){return this.templateBuffEffect.effectId},o.reduceDuration=function(t){this.changeDuration(-t)},o.increaseDuration=function(t){this.changeDuration(t)},o.changeDuration=function(t){var n=this.getOngoingTime();n&&n.changeDuration(t)},o.getOngoingTime=function(){for(var t,n=i(this.disposedConditions);!(t=n()).done;){var e=t.value;if(e instanceof c)return e}return null},o.addon=function(t){this.getEffectId()===t.getEffectId()&&this.onAddon(t)},o.getDuration=function(){var t=this.getOngoingTime();return t?t.getDuration():0},o.migrateTo=function(t){if(t instanceof e&&this.templateBuffEffect.id===t.templateBuffEffect.id){for(var n,o=i(this.disposedConditions);!(n=o()).done;){var s=n.value;if(s instanceof c)for(var f,u=i(t.disposedConditions);!(f=u()).done;){var r=f.value;if(r instanceof c){s.migrateTo(r);break}}}this.onMigrate(t)}},o.onMigrate=function(t){},o.onAddon=function(t){},o.disposed=function(t){this.buffStatus=s.REMOVED,this.buffBox.context.eventBus.postEvent(new a(this.buffBox,t))},o.addDisposedCondition=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var e=0,o=n;e<o.length;e++){var s=o[e];this.disposedConditions.push(s),this.subscribe(s.interested)}},o.addActiveCondition=function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(var e=0,o=n;e<o.length;e++){var s=o[e];this.activeConditions.push(s),this.subscribe(s.interested)}},o.addBuffAffect=function(){for(var t=this,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];i.forEach((function(n){return t.buffAffectTypes.add(n)}))},o.removeBuffAffect=function(){for(var t=this,n=arguments.length,i=new Array(n),e=0;e<n;e++)i[e]=arguments[e];i.forEach((function(n){return t.buffAffectTypes.delete(n)}))},o.containsAffect=function(t){return this.buffAffectTypes.has(t)},o.postEvent=function(t){this.buffBox.context.eventBus.postEvent(t)},o.getBuffStatus=function(){return this.buffStatus},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/BuffMod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enums7.ts","./index19.ts","./BuffEffect_10_Resist.ts","./event.ts"],(function(e){var t,f,u,n,o,s,r,a,i,c;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){f=e.cclegacy},function(e){u=e.HookResult,n=e.ReplaceRule,o=e.DestroyReason,s=e.BuffStatus},null,function(e){r=e.BuffEffect_10_Resist},function(e){a=e.OnBuffResistEvent,i=e.OnBuffHookEvent,c=e.OnDisposedBuffEvent}],execute:function(){f._RF.push({},"cb8d0gDynxFY5muHiP8UNBS","BuffMod",void 0);e("BuffMod",function(){function e(e){this.owner=void 0,this.buffMap=new Map,this.owner=e}var f=e.prototype;return f.update=function(e){this.buffMap.forEach((function(t){t.update(e)}))},f.init=function(){},f.destroy=function(){},f.addBuff=function(e){for(var f,n=e.getMuteList(),o=t(this.buffMap.values());!(f=o()).done;)for(var s,i=f.value,c=t(n);!(s=c()).done;){if(s.value===i.getBuffId())return!1}for(var v,d=this.owner.context.eventBus,p=this.getBuffEffectList(r),l=t(p);!(v=l()).done;){if(v.value.canResist(e))return d.postEvent(new a(e.ownerId,e.buffPurpose)),!1}return this.tryHook(e)===u.SUCCESS},f.tryHook=function(e){var f=e.getReplaceRule(),s=this.owner.context.eventBus;switch(f){case n.COEXIST:this.buffMap.set(e.id,e),e.onHook2Host(),s.postEvent(new i(e));break;case n.IGNORE_NEW:return u.IGNORE;case n.REPLACE:for(var r,a=t(this.buffMap.values());!(r=a()).done;){var c=r.value;c.getBuffId()===e.getBuffId()&&c.destroy(o.REPLACE)}this.buffMap.set(e.id,e),e.onHook2Host(),s.postEvent(new i(e));break;case n.UPDATE:for(var v,d=t(this.buffMap.values());!(v=d()).done;){v.value.addon(e)}break;case n.ADDON:for(var p,l=t(this.buffMap.values());!(p=l()).done;){p.value.addon(e)}return u.IGNORE}return u.SUCCESS},f.disposedBuff=function(e,t){var f=this.buffMap.get(e);f&&(this.buffMap.delete(e),this.owner.context.eventBus.postEvent(new c(f,t)))},f.getBuffEffectList=function(e){for(var f,u=[],n=t(this.buffMap.values());!(f=n()).done;)for(var o,r=f.value,a=t(r.buffEffects);!(o=a()).done;){var i=o.value;i.getBuffStatus()===s.ACTIVE&&((!e||i instanceof e)&&u.push(i))}return u},f.checkBuffAffect=function(e){for(var f,u=t(this.buffMap.values());!(f=u()).done;)for(var n,o=f.value,r=t(o.buffEffects);!(n=r()).done;){var a=n.value;if(a.getBuffStatus()===s.ACTIVE&&a.containsAffect(e))return!0}return!1},f.getBuffMap=function(){return this.buffMap},e}());f._RF.pop()}}}));

System.register("chunks:///_virtual/CalcMod.ts",["cc","./index26.ts","./DamageResult.ts","./index21.ts","./index8.ts","./constants5.ts","./constants2.ts","./enums7.ts"],(function(t){var n,c,e,a,i,r,u;return{setters:[function(t){n=t.cclegacy},null,function(t){c=t.DamageResult},null,null,function(t){e=t.AttrKey},function(t){a=t.MAX_RATE,i=t.DEF_CHANGE_POINT,r=t.DEF_INVERSE},function(t){u=t.BuffAffectType}],execute:function(){n._RF.push({},"f5ba7djw7xAD7XhT68MqJc3","CalcMod",void 0);t("CalcMod",function(){function t(t){this.context=void 0,this.context=t}var n=t.prototype;return n.calcDamage=function(t,n,i){var r=this.context.random,u=t.attrMod,o=n.attrMod,f=o.getFinalAttr(e.CRITICAL_D),s=o.getFinalAttr(e.CRITICAL_P),l=this.checkCritical(t,n,s,r),A=i.param1,R=u.getFinalAttr(A),d=i.param2,_=this.calcDef(t,n),M=R*d/a*(l?1+(f+50)/a:1)*this.calcReductionRate(_);return new c(Math.max(1,M),l)},n.checkCritical=function(t,n,c,e){var i=!1;return(t.buffMod.checkBuffAffect(u.CRITICAL_MUST_BE)||c>0&&e.nextInt(0,a)<c)&&(i=!0),n.buffMod.checkBuffAffect(u.CRITICAL_MUST_NOT_BE)&&(i=!1),i},n.calcDef=function(t,n){var c=n.attrMod;return c.getFinalAttr(e.AD_ARMOR)*(1+c.getFinalAttr(e.AD_ARMOR_V)/a)},n.calcReductionRate=function(t){var n=1-t/a;return t>=i&&(n=r/t),n},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/CollectionUtils.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){t("singleMap",(function(t,e){return new Map([[t,e]])})),e._RF.push({},"50c80MRqTxPyIuemxq29GuT","CollectionUtils",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/Condition_10_UnitDead.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractEventCondition.ts","./index23.ts","./Log.ts"],(function(t){var n,i,e,o;return{setters:[function(t){n=t.inheritsLoose},function(t){i=t.cclegacy},function(t){e=t.AbstractEventCondition},null,function(t){o=t.Log}],execute:function(){i._RF.push({},"d080fvFIxVPz4s+G/MB/5Dw","Condition_10_UnitDead",void 0);t("Condition_10_UnitDead",function(t){function i(n,i,e){var r,s;return(s=t.call(this,n,i)||this).targetId=void 0,s.targetId=null!=(r=e.targetId)?r:0,void 0===s.targetId&&o.error("targetId is missing!!, ownerId, ",s.ownerId),s.subscribe("OnUnitDead"),s}return n(i,t),i.prototype.isMatch=function(t){switch(t.name){case"OnUnitDead":if(t.targetId===this.targetId)return!0}return!1},i}(e));i._RF.pop()}}}));

System.register("chunks:///_virtual/constants.ts",["cc"],(function(){var t;return{setters:[function(c){t=c.cclegacy}],execute:function(){t._RF.push({},"3696f9mc2xKKKpmN5608g8p","constants",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/constants2.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"3a680O/SOpBUKoFvj17QnxW","constants",void 0);t("SEMICOLON",";"),t("COMMA",","),t("ASTERISK","\\*"),t("COLON",":");var c=t("MAX_RATE",100),s=(t("RECOVER_INTERNAL",1),t("DEF_CHANGE_POINT",60));t("DEF_INVERSE",s*s/c);n._RF.pop()}}}));

System.register("chunks:///_virtual/constants3.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"8a44ar33QdAi7pPE+JiPhra","constants",void 0);t("FPS",60);c._RF.pop()}}}));

System.register("chunks:///_virtual/constants4.ts",["cc"],(function(_){var L;return{setters:[function(_){L=_.cclegacy}],execute:function(){L._RF.push({},"b9020dHeUhMoZtlYlu2zmrP","constants",void 0);_("DEFAULT_SKILL_COOLDOWN",3e3),_("DEFAULT_ATTACK_COOLDOWN",1e3),_("DEFAULT_GLOBAL_COOLDOWN",500),_("DEFAULT_CAST_TIME",0),_("QUICK_CAST_TIME",500),_("NORMAL_CAST_TIME",1e3),_("SLOW_CAST_TIME",2e3),_("DEFAULT_MELEE_RANGE",2),_("DEFAULT_RANGED_RANGE",5),_("DEFAULT_AOE_RADIUS",3),_("NORMAL_ATTACK_MULTIPLIER",1),_("SKILL_DAMAGE_MULTIPLIER",2),_("ULTIMATE_DAMAGE_MULTIPLIER",3),_("HEAL_SKILL_MULTIPLIER",1.5),_("SELF_HEAL_MULTIPLIER",.8),_("SKILL_LEVEL_DAMAGE_BONUS",.1),_("SKILL_LEVEL_COOLDOWN_REDUCTION",.05),_("MAX_SKILL_LEVEL",10),_("DEFAULT_MP_COST",20),_("LOW_MP_COST",10),_("MEDIUM_MP_COST",30),_("HIGH_MP_COST",50),_("ULTIMATE_MP_COST",100),_("DEFAULT_HIT_CHANCE",1),_("HIGH_HIT_CHANCE",.95),_("MEDIUM_HIT_CHANCE",.8),_("LOW_HIT_CHANCE",.6),_("DAMAGE_MIN_FACTOR",.9),_("DAMAGE_MAX_FACTOR",1.1),_("MAX_SINGLE_TARGET",1),_("MAX_SMALL_AOE_TARGETS",3),_("MAX_MEDIUM_AOE_TARGETS",5),_("MAX_LARGE_AOE_TARGETS",10),_("MAX_ALL_TARGETS",999),_("DEFAULT_BACKSWING_TIME",500),_("QUICK_BACKSWING_TIME",200),_("NO_BACKSWING_TIME",0),_("SKILL_ID_NORMAL_ATTACK",1001),_("SKILL_ID_SKILL_1",1002),_("SKILL_ID_SKILL_2",1003),_("SKILL_ID_ULTIMATE",1004),_("SKILL_ID_PASSIVE",1005);L._RF.pop()}}}));

System.register("chunks:///_virtual/constants5.ts",["cc"],(function(_){var E;return{setters:[function(_){E=_.cclegacy}],execute:function(){E._RF.push({},"e3845Mjpc9GWbSxqS21QwOf","constants",void 0);_("AttrKey",{HP:10,HP_V:11,HP_P:12,MP:20,MP_V:21,MP_P:22,HP_LIMIT:30,HP_LIMIT_V:31,HP_LIMIT_P:32,AD:40,AD_V:41,AD_P:42,AP:50,AP_V:51,AP_P:52,ATK_SPEED:60,ATK_SPEED_V:61,ATK_SPEED_P:62,MOVE_SPEED:70,MOVE_SPEED_V:71,MOVE_SPEED_P:72,AD_ARMOR:80,AD_ARMOR_V:81,AD_ARMOR_P:82,AP_ARMOR:90,AP_ARMOR_V:91,AP_ARMOR_P:92,CRITICAL_D:100,CRITICAL_D_V:101,CRITICAL_P:110,CRITICAL_P_V:111,HIT_RATE:120,HIT_RATE_V:121,MISS:130,MISS_V:131,EFFECT_RATE:140,EFFECT_RATE_V:141,EFFECT_MISS:150,EFFECT_MISS_V:151,HP_RECOVER:160,HP_RECOVER_V:161,HP_P_RECOVER:170,HP_P_RECOVER_V:171,AD_PIERCE:200,AD_PIERCE_V:201,AD_P_PIERCE:200,AD_P_PIERCE_V:201,AP_PIERCE:210,AP_PIERCE_V:211,AP_P_PIERCE:210,AP_P_PIERCE_V:211,AD_LIFE_STEAL:220,AD_LIFE_STEAL_V:221,AP_LIFE_STEAL:230,AP_LIFE_STEAL_V:231,ALL_LIFE_STEAL:240,ALL_LIFE_STEAL_V:241,HEAL_UP:250,HEAL_UP_V:251,BE_HEAL_UP:260,BE_HEAL_UP_V:261,MP_RECOVER:270,MP_RECOVER_V:271,CDR:280,CDR_V:281});E._RF.pop()}}}));

System.register("chunks:///_virtual/constants6.ts",["cc"],(function(t){var c;return{setters:[function(t){c=t.cclegacy}],execute:function(){c._RF.push({},"edf352LocBF5po43qTrqJqz","constants",void 0);t("ATTACK_RANGE",2),t("CHASE_RANGE",8),t("RETREAT_RANGE",1),t("DECISION_INTERVAL",500);c._RF.pop()}}}));

System.register("chunks:///_virtual/DamageResult.ts",["cc","./index26.ts","./constants2.ts"],(function(t){var i,e;return{setters:[function(t){i=t.cclegacy},null,function(t){e=t.MAX_RATE}],execute:function(){i._RF.push({},"a3fe5Lb3w5EbqP0iXGgcRAG","DamageResult",void 0);t("DamageResult",function(){function t(t,i){this.damage=void 0,this.critical=void 0,this.sharedRate=void 0,this.shield=void 0,this.critical=i,this.damage=t}var i=t.prototype;return i.isValid=function(){return this.damage*Math.min(0,e-this.sharedRate)/100-this.shield>0},i.sharedDamage=function(t){return this.sharedRate+=t,this.damage*t/e},i.getFinalDamage=function(){return this.damage*Math.min(0,e-this.sharedRate)/100-this.shield},i.shieldDamage=function(t){var i=t-this.getFinalDamage();return i<=0&&(i=0),this.shield+=t-i,i},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/datas.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"8279d7kgyVBqpMfAnDa54XW","datas",void 0);i("UnitData",(function(){this.id=void 0,this.templateId=void 0,this.level=void 0,this.quality=void 0,this.equipMap=void 0})),i("EquipData",(function(){this.id=void 0,this.templateId=void 0,this.heroId=void 0})),i("ProductData",(function(){this.index=void 0,this.templateId=void 0,this.count=void 0,this.lock=void 0})),i("ShopData",(function(){this.refreshCount=void 0,this.productMap=void 0})),i("SettingsData",(function(){this.seed=void 0,this.unlimited=void 0,this.endless=void 0,this.chargeMoney=void 0})),i("StageData",(function(){this.group=void 0,this.level=void 0,this.type=void 0,this.templateId=void 0,this.nextLeft=void 0,this.nextRight=void 0,this.pass=void 0})),i("SaveLiteData",(function(){this.name=void 0,this.updateAt=void 0,this.createAt=void 0})),i("ItemData",(function(){this.id=void 0,this.count=void 0})),i("RewardData",(function(){this.itemInfo=void 0,this.heroInfo=void 0,this.equipInfo=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/DrawDebugBorder.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,i,o,n,a,l,s,c,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){n=t.cclegacy,a=t._decorator,l=t.Color,s=t.Node,c=t.Graphics,u=t.UITransform,h=t.Component}],execute:function(){var g,p,d,f,b,w,D;n._RF.push({},"a5bceLbpAREMaJw8aDT1nbV","DrawDebugBorder",void 0);var v=a.ccclass,y=a.property;t("DrawDebugBorder",(g=v("DrawDebugBorder"),p=y(l),d=y(s),g((w=e((b=function(t){function e(){for(var e,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return e=t.call.apply(t,[this].concat(n))||this,i(e,"lineColor",w,o(e)),i(e,"target",D,o(e)),e.g=null,e}r(e,t);var n=e.prototype;return n.start=function(){this.g=this.addComponent(c),this.g.lineWidth=2,this.drawRect()},n.update=function(){this.g.clear(),this.drawRect()},n.drawRect=function(){if(this.target){var t=this.target.getComponent(u);if(t){var e=t.width/2,r=t.height/2;this.g.strokeColor=this.lineColor,this.g.moveTo(-e,-r),this.g.lineTo(e,-r),this.g.lineTo(e,r),this.g.lineTo(-e,r),this.g.close(),this.g.stroke()}}},e}(h)).prototype,"lineColor",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new l(255,0,0,255)}}),D=e(b.prototype,"target",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=b))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/enums.ts",["cc"],(function(E){var L;return{setters:[function(E){L=E.cclegacy}],execute:function(){L._RF.push({},"062e3134ZpK5o4/OzRjIikf","enums",void 0);E("ESkillType",function(E){return E[E.COMMON=1]="COMMON",E[E.PASSIVE=2]="PASSIVE",E[E.ULTIMATE=3]="ULTIMATE",E}({})),E("ESkillTargetType",function(E){return E[E.ENEMY_SINGLE=1]="ENEMY_SINGLE",E[E.ENEMY_MULTIPLE=2]="ENEMY_MULTIPLE",E[E.ENEMY_ALL=3]="ENEMY_ALL",E[E.ALLY_SINGLE=4]="ALLY_SINGLE",E[E.ALLY_MULTIPLE=5]="ALLY_MULTIPLE",E[E.ALLY_ALL=6]="ALLY_ALL",E[E.SELF=7]="SELF",E[E.AREA=8]="AREA",E[E.NONE=9]="NONE",E}({})),E("ESkillState",function(E){return E[E.READY=0]="READY",E[E.CASTING=1]="CASTING",E[E.COOLDOWN=2]="COOLDOWN",E[E.INTERRUPTED=3]="INTERRUPTED",E}({})),E("ESkillEffectType",function(E){return E[E.DAMAGE=1]="DAMAGE",E[E.HEAL=2]="HEAL",E[E.BUFF=3]="BUFF",E[E.DEBUFF=4]="DEBUFF",E[E.DISPLACEMENT=5]="DISPLACEMENT",E[E.SUMMON=6]="SUMMON",E[E.TRANSFORM=7]="TRANSFORM",E[E.SHIELD=8]="SHIELD",E[E.RESURRECTION=9]="RESURRECTION",E}({})),E("ESkillReleaseConditionType",function(E){return E[E.NONE=0]="NONE",E[E.SUMMON_ALIVE=1]="SUMMON_ALIVE",E[E.SUMMON_DEAD=2]="SUMMON_DEAD",E[E.SUMMON_LIMIT=3]="SUMMON_LIMIT",E[E.HP_BELOW=4]="HP_BELOW",E[E.HP_ABOVE=5]="HP_ABOVE",E[E.MP_ENOUGH=6]="MP_ENOUGH",E[E.ENEMY_COUNT=7]="ENEMY_COUNT",E[E.ALLY_COUNT=8]="ALLY_COUNT",E[E.BUFF_EXISTS=9]="BUFF_EXISTS",E[E.DISTANCE=10]="DISTANCE",E}({}));L._RF.pop()}}}));

System.register("chunks:///_virtual/enums2.ts",["cc"],(function(S){var O;return{setters:[function(S){O=S.cclegacy}],execute:function(){O._RF.push({},"0968f0JdRBKVKKJxSPLwEgu","enums",void 0);S("DamageSource",function(S){return S[S.ACTION_SOURCE=0]="ACTION_SOURCE",S[S.SPLASH_SOURCE=1]="SPLASH_SOURCE",S[S.SHARED_SOURCE=2]="SHARED_SOURCE",S[S.POISON_SOURCE=3]="POISON_SOURCE",S[S.IGNITE_SOURCE=4]="IGNITE_SOURCE",S[S.COUNTER_WOUND_SOURCE=5]="COUNTER_WOUND_SOURCE",S}({}));O._RF.pop()}}}));

System.register("chunks:///_virtual/enums3.ts",["cc"],(function(_){var I;return{setters:[function(_){I=_.cclegacy}],execute:function(){I._RF.push({},"2456dWqJ6BGJIqy18sC4vBU","enums",void 0);_("UnitCamp",function(_){return _[_.PLAYER=1]="PLAYER",_[_.ENEMY=2]="ENEMY",_[_.SCENE=3]="SCENE",_}({})),_("TipsType",function(_){return _[_.DEF_TIPS=0]="DEF_TIPS",_[_.MOVE_BAR_UP_TIPS=1]="MOVE_BAR_UP_TIPS",_[_.COOPERATION_TIPS=2]="COOPERATION_TIPS",_[_.INVITE_COOPERATION_TIPS=3]="INVITE_COOPERATION_TIPS",_[_.STRIKE_BACK_TIPS=4]="STRIKE_BACK_TIPS",_[_.VAMPIRE_TIPS=5]="VAMPIRE_TIPS",_[_.CAROM_TIPS=6]="CAROM_TIPS",_[_.SHARED_DAMAGE_TIPS=7]="SHARED_DAMAGE_TIPS",_[_.XXX_TIPS=8]="XXX_TIPS",_[_.COLD_DOWN_UP_TIPS=9]="COLD_DOWN_UP_TIPS",_[_.COLD_DOWN_DOWN_TIPS=10]="COLD_DOWN_DOWN_TIPS",_[_.SHIELD_BREAK_TIPS=11]="SHIELD_BREAK_TIPS",_[_.SHIELD_BLOCK_TIPS=12]="SHIELD_BLOCK_TIPS",_[_.BUFF_RESIST_BAD_TIPS=13]="BUFF_RESIST_BAD_TIPS",_[_.BUFF_RESIST_GOOD_TIPS=14]="BUFF_RESIST_GOOD_TIPS",_[_.IGNORE_ALL_DAMAGE_TIPS=15]="IGNORE_ALL_DAMAGE_TIPS",_[_.IMMORTAL_TIPS=16]="IMMORTAL_TIPS",_[_.DAMAGE_CEILING_TIPS=17]="DAMAGE_CEILING_TIPS",_[_.UNIT_RESPAWN_TIPS=18]="UNIT_RESPAWN_TIPS",_[_.UNIT_FORCE_DEAD_TIPS=19]="UNIT_FORCE_DEAD_TIPS",_[_.UNIT_DEAD_TIPS=20]="UNIT_DEAD_TIPS",_[_.BUFF_MIGRATE_TIPS=21]="BUFF_MIGRATE_TIPS",_[_.BUFF_ADD_TIPS=22]="BUFF_ADD_TIPS",_[_.BUFF_LIFE_UP_TIPS=23]="BUFF_LIFE_UP_TIPS",_[_.BUFF_LIFE_DOWN_TIPS=24]="BUFF_LIFE_DOWN_TIPS",_[_.FORCE_ACTION_TIPS=25]="FORCE_ACTION_TIPS",_[_.BACKLASH_TIPS=26]="BACKLASH_TIPS",_[_.POISON_TIPS=27]="POISON_TIPS",_[_.MOVE_BAR_DOWN_TIPS=28]="MOVE_BAR_DOWN_TIPS",_[_.FORGET_TIPS=29]="FORGET_TIPS",_[_.CANNOT_CURE=30]="CANNOT_CURE",_}({}));I._RF.pop()}}}));

System.register("chunks:///_virtual/enums4.ts",["cc"],(function(F){var O;return{setters:[function(F){O=F.cclegacy}],execute:function(){O._RF.push({},"3a05aO37HZLarYl2AYBNvmh","enums",void 0);F("ActionEnum",function(F){return F[F.ATTACK=1]="ATTACK",F[F.BUFF=2]="BUFF",F[F.BREAKUP=3]="BREAKUP",F[F.MOVE_BAR=4]="MOVE_BAR",F[F.CALLING=5]="CALLING",F[F.COOLDOWN=6]="COOLDOWN",F[F.CURE=7]="CURE",F[F.DIFFUSION=8]="DIFFUSION",F[F.RESPAWN=9]="RESPAWN",F[F.FORCE_ACTION=10]="FORCE_ACTION",F[F.MIGRATE_BUFF=11]="MIGRATE_BUFF",F[F.XXX12=12]="XXX12",F[F.MOD_BUFF_LIFE=13]="MOD_BUFF_LIFE",F[F.FORCE_DEAD=14]="FORCE_DEAD",F[F.XXX15=15]="XXX15",F[F.POISON_IGNITE=16]="POISON_IGNITE",F}({}));O._RF.pop()}}}));

System.register("chunks:///_virtual/enums5.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"515a5Y01NJHLptvxLz6A47I","enums",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/enums6.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"6d3572dfxlCbaOBfRA/C0yk","enums",void 0);e("ProjectileType",function(e){return e[e.LINEAR=1]="LINEAR",e[e.TRACK=2]="TRACK",e}({})),e("ProjectileState",function(e){return e[e.CREATED=0]="CREATED",e[e.FLYING=1]="FLYING",e[e.HITTING=2]="HITTING",e[e.DESTROYED=3]="DESTROYED",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/enums7.ts",["cc"],(function(E){var A;return{setters:[function(E){A=E.cclegacy}],execute:function(){A._RF.push({},"93ee2Z03oJABatmQiuZ6z2F","enums",void 0);E("DisposedRule",function(E){return E[E.ALL=0]="ALL",E[E.ANY=1]="ANY",E}({})),E("BuffPurpose",function(E){return E[E.NEUTRAL=0]="NEUTRAL",E[E.GOOD=1]="GOOD",E[E.BAD=2]="BAD",E}({})),E("BuffStatus",function(E){return E[E.ATTACHED=0]="ATTACHED",E[E.ACTIVE=1]="ACTIVE",E[E.INACTIVE=2]="INACTIVE",E[E.REMOVED=3]="REMOVED",E}({})),E("BuffAffectType",function(E){return E[E.SKIP_ACTION=0]="SKIP_ACTION",E[E.ONLY_COMMON_ATTACK=1]="ONLY_COMMON_ATTACK",E[E.IGNORE_ALL_DAMAGE=2]="IGNORE_ALL_DAMAGE",E[E.CONFUSE=3]="CONFUSE",E[E.SPOOF=4]="SPOOF",E[E.ENFORCE_REAL_DAMAGE=5]="ENFORCE_REAL_DAMAGE",E[E.CRITICAL_MUST_BE=6]="CRITICAL_MUST_BE",E[E.CRITICAL_MUST_NOT_BE=7]="CRITICAL_MUST_NOT_BE",E[E.IMMORTAL=8]="IMMORTAL",E[E.IGNORE_MOVE_BAR_FORWARD=9]="IGNORE_MOVE_BAR_FORWARD",E[E.IGNORE_MOVE_BAR_BACKWARD=10]="IGNORE_MOVE_BAR_BACKWARD",E[E.FORGET=11]="FORGET",E}({})),E("DestroyReason",function(E){return E[E.REMOVE=0]="REMOVE",E[E.BREAKUP=1]="BREAKUP",E[E.REPLACE=2]="REPLACE",E[E.TRANSFER=3]="TRANSFER",E[E.HOST_DEAD=4]="HOST_DEAD",E}({})),E("HookResult",function(E){return E[E.SUCCESS=0]="SUCCESS",E[E.FAILED=1]="FAILED",E[E.IGNORE=2]="IGNORE",E}({})),E("ReplaceRule",function(E){return E[E.COEXIST=0]="COEXIST",E[E.IGNORE_NEW=1]="IGNORE_NEW",E[E.REPLACE=2]="REPLACE",E[E.UPDATE=3]="UPDATE",E[E.ADDON=4]="ADDON",E}({}));A._RF.pop()}}}));

System.register("chunks:///_virtual/enums8.ts",["cc"],(function(t){var E;return{setters:[function(t){E=t.cclegacy}],execute:function(){E._RF.push({},"9b03aRQpJlLII7fDhzfTyfY","enums",void 0);t("AttrUpdateReason",function(t){return t[t.DEF_ATTR_UPDATE_REASON=0]="DEF_ATTR_UPDATE_REASON",t[t.COUNTER_WOUND=1]="COUNTER_WOUND",t[t.SELF_CURE=2]="SELF_CURE",t[t.SHARED_DAMAGE=3]="SHARED_DAMAGE",t}({}));E._RF.pop()}}}));

System.register("chunks:///_virtual/enums9.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"a6a0f7SiwJFdKyMszeu8eW7","enums",void 0);e("StateType",function(e){return e[e.BORN=1]="BORN",e[e.IDLE=2]="IDLE",e[e.CHASE=3]="CHASE",e[e.ACTION=4]="ACTION",e[e.FLEE=5]="FLEE",e[e.WANDER=6]="WANDER",e[e.RANDOM_MOVE=7]="RANDOM_MOVE",e[e.DEAD=8]="DEAD",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/Event_0_Direct.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractEventCondition.ts"],(function(t){var n,e,o;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){o=t.AbstractEventCondition}],execute:function(){e._RF.push({},"e0abd3I+CVHqYhxzN1HKUGs","Event_0_Direct",void 0);t("Event_0_Direct",function(t){function e(n,e){var o;return(o=t.call(this,n,e)||this).subscribe("OnBuffHookEvent"),o}return n(e,t),e.prototype.isMatch=function(t){if("OnBuffHookEvent"===t.name&&t.buffBox.ownerId===this.ownerId)return!0;return!1},e}(o));e._RF.pop()}}}));

System.register("chunks:///_virtual/event.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Event2.ts","./enums8.ts"],(function(t){var n,e,r,o,i,a,u;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass,r=t.createForOfIteratorHelperLoose},function(t){o=t.cclegacy},function(t){i=t.AbstractTryEvent,a=t.AbstractOnEvent},function(t){u=t.AttrUpdateReason}],execute:function(){o._RF.push({},"9a553tYBaBAMK/4/CWWNV4X","event",void 0);t("XXXTryEvent",function(t){function e(){return t.call(this,"XXXTryEvent")||this}return n(e,t),e}(i)),t("OnXXXEvent",function(t){function e(){return t.call(this,"OnXXXEvent")||this}return n(e,t),e}(a)),t("OnAttributeUpdateEvent",function(t){function r(n,e,r,o,i,a){var d;return(d=t.call(this,"OnAttributeUpdateEvent")||this).generateHeroId=void 0,d.targetHeroId=void 0,d.attrKey=void 0,d.oldValue=void 0,d.delta=void 0,d.add=void 0,d._attrUpdateReason=u.DEF_ATTR_UPDATE_REASON,d.generateHeroId=n,d.targetHeroId=e,d.attrKey=r,d.oldValue=o,d.delta=i,d.add=a,d}return n(r,t),e(r,[{key:"attrUpdateReason",get:function(){return this._attrUpdateReason},set:function(t){this._attrUpdateReason=t}}]),r}(a)),t("OnReadyToSubHpEvent",function(t){function e(n,e,r){var o;return(o=t.call(this,"OnReadyToSubHpEvent")||this).generatorId=void 0,o.damageMap=void 0,o.damageSource=void 0,o.generatorId=n,o.damageMap=e,o.damageSource=r,o}return n(e,t),e.prototype.isCritical=function(){for(var t,n=r(this.damageMap.values());!(t=n()).done;){if(t.value.critical)return!0}return!1},e}(a)),t("OnActionEvent",function(t){function e(n){var e;return(e=t.call(this,"OnActionEvent")||this).generatorId=void 0,e.generatorId=n,e}return n(e,t),e}(a)),t("OnUnitDeadEvent",function(t){function e(n){var e;return(e=t.call(this,"OnUnitDeadEvent")||this).targetId=void 0,e.targetId=n,e}return n(e,t),e}(a)),t("OnBuffHookEvent",function(t){function e(n){var e;return(e=t.call(this,"OnBuffHookEvent")||this).buffBox=void 0,e.buffBox=n,e}return n(e,t),e}(a)),t("TryDisposedBuffEvent",function(t){function e(n,e){var r;return(r=t.call(this,"TryDisposedBuffEvent")||this).buffBox=void 0,r.destroyReason=void 0,r.buffBox=n,r.destroyReason=e,r}return n(e,t),e}(i)),t("OnDisposedBuffEvent",function(t){function e(n,e){var r;return(r=t.call(this,"OnDisposedBuffEvent")||this).buffBox=void 0,r.destroyReason=void 0,r.buffBox=n,r.destroyReason=e,r}return n(e,t),e}(a)),t("TryActiveBuffEvent",function(t){function e(n){var e;return(e=t.call(this,"TryActiveBuffEvent")||this).buffBox=void 0,e.buffBox=n,e}return n(e,t),e}(i)),t("OnBuffActiveEvent",function(t){function e(n){var e;return(e=t.call(this,"OnBuffActiveEvent")||this).buffBox=void 0,e.buffBox=n,e}return n(e,t),e}(a)),t("OnBuffResistEvent",function(t){function e(n,e){var r;return(r=t.call(this,"OnBuffResistEvent")||this).ownerId=void 0,r.buffPurpose=void 0,r.ownerId=n,r.buffPurpose=e,r}return n(e,t),e}(a)),t("OnForceDeadEvent",function(t){function e(n){var e;return(e=t.call(this,"OnForceDeadEvent")||this).deadList=void 0,e.deadList=n,e}return n(e,t),e}(a)),t("OnDamageEvent",function(t){function e(n,e,r){var o;return(o=t.call(this,"OnDamageEvent")||this).generatorId=void 0,o.damageMap=void 0,o.damageSource=void 0,o.generatorId=n,o.damageMap=e,o.damageSource=r,o}return n(e,t),e}(a)),t("OnReadyToAddHpEvent",function(t){function e(n,e,r){var o;return(o=t.call(this,"OnReadyToAddHpEvent")||this).generatorId=void 0,o.targetId=void 0,o.value=void 0,o.generatorId=n,o.targetId=e,o.value=r,o}return n(e,t),e}(a)),t("OnShieldBreakEvent",function(t){function e(){return t.call(this,"OnShieldBreakEvent")||this}return n(e,t),e}(a)),t("OnBubbleTipsEvent",function(t){function e(n,e){var r;return(r=t.call(this,"OnBubbleTipsEvent")||this).ownerId=void 0,r.bubbleTipsId=void 0,r.ownerId=n,r.bubbleTipsId=e,r}return n(e,t),e}(a));o._RF.pop()}}}));

System.register("chunks:///_virtual/Event2.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"1a0aaW5TJJCuY3/OFyzLycM","Event",void 0);t("AbstractTryEvent",function(){function t(t){this.name=void 0,this.canceled=void 0,this.name=t}var n=t.prototype;return n.cancel=function(){this.canceled=!0},n.isCanceled=function(){return this.canceled},t}()),t("AbstractOnEvent",(function(t){this.name=void 0,this.name=t}));n._RF.pop()}}}));

System.register("chunks:///_virtual/EventBus.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index23.ts","./Log.ts"],(function(e){var n,t,r;return{setters:[function(e){n=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy},null,function(e){r=e.Log}],execute:function(){t._RF.push({},"ffa53St+/ZAsoRT1EBdKnVA","EventBus",void 0);var i=e("EventBus",function(){function e(){this.listenersMap=new Map,this.pendingRemove=new Map}var t=e.prototype;return t.postEvent=function(e){return this.doPostEvent(e)},t.doPostEvent=function(t){if(e.DEPTH>=e.MAX_DEPTH)return r.error("事件异常, 超出最大深度, event=",t),!0;e.DEPTH++;var i=t.name,s=this.listenersMap.get(i);if(!s)return e.DEPTH--,!1;try{if("function"==typeof t.isCanceled&&"function"==typeof t.cancel)for(var o,a=t,u=n(s);!(o=u()).done;){var v=o.value;if(!this.isPendingRemove(i,v)&&(v.onEvent(a),a.isCanceled()))return!0}else for(var f,l=n(s);!(f=l()).done;){var c=f.value;this.isPendingRemove(i,c)||c.onEvent(t)}}catch(e){return r.error("事件异常, event=",t,"listeners=",s,e),!0}finally{e.DEPTH--,0===e.DEPTH&&this.flushPendingRemove()}return!1},t.register=function(e){if(Array.isArray(e))for(var t,r=n(e);!(t=r()).done;){var i=t.value;this.register(i)}else for(var s,o=n(e.interested);!(s=o()).done;){var a,u=s.value,v=null!=(a=this.listenersMap.get(u))?a:[];v.push(e),v.sort((function(e,n){return e.priority-n.priority})),this.listenersMap.set(u,v)}},t.unregister=function(e){for(var t,r=n(e.interested);!(t=r()).done;){var i,s=t.value;if(this.listenersMap.get(s)){var o=null!=(i=this.pendingRemove.get(s))?i:new Set;o.add(e),this.pendingRemove.set(s,o)}}},t.isPendingRemove=function(e,n){var t=this.pendingRemove.get(e);return!!t&&t.has(n)},t.flushPendingRemove=function(){for(var e,t=this,r=function(){var n=e.value,r=n[0],i=n[1],s=t.listenersMap.get(r);s&&t.listenersMap.set(r,s.filter((function(e){return!i.has(e)})))},i=n(this.pendingRemove.entries());!(e=i()).done;)r();this.pendingRemove.clear()},e}());i.MAX_DEPTH=100,i.DEPTH=0,t._RF.pop()}}}));

System.register("chunks:///_virtual/EventListener.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"57f97y4hwBA7Lw3LRfWkJrt","EventListener",void 0);e("AbstractEventListener",function(){function e(e){void 0===e&&(e=0),this.interested=new Set,this.priority=void 0,this.priority=e}return e.prototype.subscribe=function(e){if("string"==typeof e)this.interested.add(e);else for(var r,i=t(e);!(r=i()).done;){var n=r.value;this.interested.add(n)}},e}());r._RF.pop()}}}));

System.register("chunks:///_virtual/Exceptions.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e,r;return{setters:[function(t){n=t.inheritsLoose,e=t.wrapNativeSuper},function(t){r=t.cclegacy}],execute:function(){r._RF.push({},"0a60d6p+KNLlqT9ncNm+M2e","Exceptions",void 0);t("TemplateException",function(t){function e(n){var e;return(e=t.call(this,n)||this).name="TemplateException",e}return n(e,t),e}(e(Error))),t("InitException",function(t){function e(n){var e;return(e=t.call(this,n)||this).name="InitException",e}return n(e,t),e}(e(Error)));r._RF.pop()}}}));

System.register("chunks:///_virtual/FileUtils.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"d06e6dEKmVO5K4t9KXnE2Ed","FileUtils",void 0);var t=e("FileUtils",{downloadFile:function(e,n,t){void 0===t&&(t="text/plain");var r=new Blob([e],{type:t}),o=URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download=n,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)},downloadBlob:function(e,n){var t=URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download=n,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)},downloadJson:function(e,n){var r=JSON.stringify(e,null,2);t.downloadFile(r,n,"application/json")},readFileAsText:function(e){return new Promise((function(n,t){var r=new FileReader;r.onload=function(){return n(r.result)},r.onerror=function(){return t(r.error)},r.readAsText(e)}))},readFileAsArrayBuffer:function(e){return new Promise((function(n,t){var r=new FileReader;r.onload=function(){return n(r.result)},r.onerror=function(){return t(r.error)},r.readAsArrayBuffer(e)}))},readFileAsDataURL:function(e){return new Promise((function(n,t){var r=new FileReader;r.onload=function(){return n(r.result)},r.onerror=function(){return t(r.error)},r.readAsDataURL(e)}))},getFileExtension:function(e){var n=e.lastIndexOf(".");return-1!==n?e.substring(n+1).toLowerCase():""},getFileNameWithoutExtension:function(e){var n=e.lastIndexOf(".");return-1!==n?e.substring(0,n):e},isImageFile:function(e){return e.type.startsWith("image/")},isTextFile:function(e){return e.type.startsWith("text/")||"application/json"===e.type||"application/xml"===e.type},isVideoFile:function(e){return e.type.startsWith("video/")},isAudioFile:function(e){return e.type.startsWith("audio/")},compressImage:function(e,n,t,r){return void 0===n&&(n=.8),new Promise((function(o,i){var a=document.createElement("canvas"),u=a.getContext("2d"),c=new Image;c.onload=function(){var l=c.width,d=c.height;t&&l>t&&(d=d*t/l,l=t),r&&d>r&&(l=l*r/d,d=r),a.width=l,a.height=d,null==u||u.drawImage(c,0,0,l,d),a.toBlob((function(e){e?o(e):i(new Error("图片压缩失败"))}),e.type,n)},c.onerror=function(){return i(new Error("图片加载失败"))},c.src=URL.createObjectURL(e)}))},createFileSelector:function(e,n){return void 0===n&&(n=!1),new Promise((function(t){var r=document.createElement("input");r.type="file",r.multiple=n,e&&(r.accept=e),r.onchange=function(){t(r.files)},r.click()}))}});n._RF.pop()}}}));

System.register("chunks:///_virtual/FunctionUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,r,t;return{setters:[function(e){n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"5b652VbgK9D9JbxbEUreDUa","FunctionUtils",void 0);var u,i,o=e("FunctionUtils",{debounce:function(e,n,r){void 0===r&&(r=!1);var t=null;return function(){for(var u=arguments.length,i=new Array(u),o=0;o<u;o++)i[o]=arguments[o];var c=function(){t=null,r||e.apply(void 0,i)},a=r&&!t;t&&clearTimeout(t),t=setTimeout(c,n),a&&e.apply(void 0,i)}},throttle:function(e,n){var r=!1;return function(){r||(e.apply(void 0,arguments),r=!0,setTimeout((function(){return r=!1}),n))}},sleep:function(e){return new Promise((function(n){return setTimeout(n,e)}))},retry:(i=n(r().mark((function e(n,t,u){var i,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===t&&(t=3),void 0===u&&(u=1e3),c=1;case 3:if(!(c<=t)){e.next=20;break}return e.prev=4,e.next=7,n();case 7:return e.abrupt("return",e.sent);case 10:if(e.prev=10,e.t0=e.catch(4),i=e.t0,c!==t){e.next=15;break}throw i;case 15:return e.next=17,o.sleep(u*c);case 17:c++,e.next=3;break;case 20:throw i;case 21:case"end":return e.stop()}}),e,null,[[4,10]])}))),function(e,n,r){return i.apply(this,arguments)}),withTimeout:function(e,n){return Promise.race([e,new Promise((function(e,r){setTimeout((function(){return r(new Error("Operation timed out after "+n+"ms"))}),n)}))])},memoize:function(e){var n=new Map;return function(){for(var r=arguments.length,t=new Array(r),u=0;u<r;u++)t[u]=arguments[u];var i=JSON.stringify(t);if(n.has(i))return n.get(i);var o=e.apply(void 0,t);return n.set(i,o),o}},compose:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(e){return n.reduceRight((function(e,n){return n(e)}),e)}},pipe:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(e){return n.reduce((function(e,n){return n(e)}),e)}},batchExecute:(u=n(r().mark((function e(n,t){var u,i,o,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:void 0===t&&(t=3),u=[],i=[],o=r().mark((function e(o){var c,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n[o],a=c().then((function(e){u[o]=e})),i.push(a),!(i.length>=t)){e.next=7;break}return e.next=6,Promise.race(i);case 6:i.splice(i.findIndex((function(e){return e===a})),1);case 7:case"end":return e.stop()}}),e)})),c=0;case 5:if(!(c<n.length)){e.next=10;break}return e.delegateYield(o(c),"t0",7);case 7:c++,e.next=5;break;case 10:return e.next=12,Promise.all(i);case 12:return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e)}))),function(e,n){return u.apply(this,arguments)})});t._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Player.ts","./index18.ts","./index23.ts","./index.ts","./ResourceManager.ts","./Log.ts","./TemplateManager.ts","./Exceptions.ts"],(function(n){var e,t,r,a,i,s,o,u,c,l;return{setters:[function(n){e=n.inheritsLoose,t=n.asyncToGenerator,r=n.regeneratorRuntime},function(n){a=n.cclegacy,i=n.Component},function(n){s=n.Player},null,null,null,function(n){o=n.ResourceManager},function(n){u=n.Log},function(n){c=n.TemplateManager},function(n){l=n.InitException}],execute:function(){a._RF.push({},"68621WIwZpKsYBfdW2JHJhe","GameManager",void 0),n("GameManager",function(n){function a(){for(var e,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(e=n.call.apply(n,[this].concat(r))||this).player=void 0,e}return e(a,n),a.inst=function(){return this._instance||(this._instance=new a),this._instance},a.prototype.init=function(){var n=t(r().mark((function n(){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null==this.player){n.next=2;break}throw new l("玩家不为空, 不能重复初始化");case 2:return u.info("GameManager.init start!"),this.player=new s("1"),n.next=6,c.inst().load();case 6:if(n.sent){n.next=10;break}return u.error("静态表加载失败"),n.abrupt("return",!1);case 10:return n.next=12,o.inst().loadAllResources();case 12:if(n.sent){n.next=16;break}return u.error("加载资源失败"),n.abrupt("return",!1);case 16:return u.info("GameManager.init finished!"),n.abrupt("return",!0);case 18:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}(),a}(i))._instance=void 0,a._RF.pop()}}}));

System.register("chunks:///_virtual/Helpers.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TemplateHelper.ts","./TemplateManager.ts"],(function(t){var e,n,r,i;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){r=t.TemplateHelper},function(t){i=t.templateHelper}],execute:function(){var u,o,c,l,f,p,h,s,a,m,H,T,g,k,C;n._RF.push({},"bf28dhf7MVP3pCmMEAStRQX","Helpers",void 0);t("AwardHelper",i(u=function(t){function n(){return t.call(this,"TemplateAward")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||u),t("BuffEffectHelper",i(o=function(t){function n(){return t.call(this,"TemplateBuffEffect")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||o),t("BuffHelper",i(c=function(t){function n(){return t.call(this,"TemplateBuff")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||c),t("ProjectileHelper",i(l=function(t){function n(){return t.call(this,"TemplateProjectile")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||l),t("ConstHelper",i(f=function(t){function n(){return t.call(this,"TemplateConst")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||f),t("EquipHelper",i(p=function(t){function n(){return t.call(this,"TemplateEquip")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||p),t("UnitHelper",i(h=function(t){function n(){return t.call(this,"TemplateHero")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||h),t("ActionHelper",i(s=function(t){function n(){return t.call(this,"TemplateAction")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||s),t("SkillHelper",i(a=function(t){function n(){return t.call(this,"TemplateSkill")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||a),t("ItemHelper",i(m=function(t){function n(){return t.call(this,"TemplateItem")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||m),t("TipsHelper",i(H=function(t){function n(){return t.call(this,"TemplateTips")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||H),t("SuitHelper",i(T=function(t){function n(){return t.call(this,"TemplateSuit")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||T),t("LabelHelper",i(g=function(t){function n(){return t.call(this,"TemplateLabel")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||g),t("ProductHelper",i(k=function(t){function n(){return t.call(this,"TemplateProduct")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||k),t("RoutineHelper",i(C=function(t){function n(){return t.call(this,"TemplateRoutine")||this}return e(n,t),n.prototype.configCheck=function(){return!0},n}(r))||C);n._RF.pop()}}}));

System.register("chunks:///_virtual/HexagonLayout.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,a,n,i,o,s,u,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,s=t.v3,u=t.tween,c=t.Component}],execute:function(){var l,p,f,h;i._RF.push({},"5e6cfI5tXNFoJjx+P8+0d+5","HexagonLayout",void 0);var g=o.ccclass,y=o.property;t("HexagonLayout",g("HexagonLayout")((f=e((p=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,a(e,"radius",f,n(e)),a(e,"animateDuration",h,n(e)),e}r(e,t);var i=e.prototype;return i.start=function(){this.arrangeIcons()},i.arrangeIcons=function(){var t=this.node.children;if(6===t.length)for(var e=s(0,0,0),r=0;r<6;r++){var a=t[r],n=(60*r-30)*Math.PI/180,i=e.x+this.radius*Math.sin(n),o=e.y+this.radius*Math.cos(n);u(a).to(this.animateDuration,{position:s(i,o,0),scale:s(1,1,1)},{easing:"backOut"}).start()}else Log.error("需要正好6个图标")},e}(c)).prototype,"radius",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 150}}),h=e(p.prototype,"animateDuration",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),l=p))||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/HoverButton.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,o,n,i,r,a,c,s,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,c=e.Vec3,s=e.Node,l=e.Component}],execute:function(){var u,p,h;r._RF.push({},"edca6GWGIVNOJ7i0RlnT+C/","HoverButton",void 0);var v=a.ccclass,d=a.property;e("HoverButton",v("HoverButton")((h=t((p=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"scaleFactor",h,i(t)),t.originalScale=new c,t}o(t,e);var r=t.prototype;return r.onLoad=function(){this.originalScale.set(this.node.scale),this.node.on(s.EventType.MOUSE_ENTER,this.onMouseEnter,this),this.node.on(s.EventType.MOUSE_LEAVE,this.onMouseLeave,this)},r.onMouseEnter=function(e){this.node.setScale(this.originalScale.clone().multiplyScalar(this.scaleFactor))},r.onMouseLeave=function(e){this.node.setScale(this.originalScale)},t}(l)).prototype,"scaleFactor",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.1}}),u=p))||u);r._RF.pop()}}}));

System.register("chunks:///_virtual/index.ts",["cc","./Helpers.ts","./TemplateHelper.ts","./TemplateManager.ts"],(function(e){var l;return{setters:[function(e){l=e.cclegacy},function(l){var r={};r.ActionHelper=l.ActionHelper,r.AwardHelper=l.AwardHelper,r.BuffEffectHelper=l.BuffEffectHelper,r.BuffHelper=l.BuffHelper,r.ConstHelper=l.ConstHelper,r.EquipHelper=l.EquipHelper,r.ItemHelper=l.ItemHelper,r.LabelHelper=l.LabelHelper,r.ProductHelper=l.ProductHelper,r.ProjectileHelper=l.ProjectileHelper,r.RoutineHelper=l.RoutineHelper,r.SkillHelper=l.SkillHelper,r.SuitHelper=l.SuitHelper,r.TipsHelper=l.TipsHelper,r.UnitHelper=l.UnitHelper,e(r)},function(l){e("TemplateHelper",l.TemplateHelper)},function(l){var r={};r.TemplateManager=l.TemplateManager,r.templateHelper=l.templateHelper,e(r)}],execute:function(){l._RF.push({},"0b8bf3HcDlGtLpri7S31v5c","index",void 0),l._RF.pop()}}}));

System.register("chunks:///_virtual/index10.ts",["cc","./StatsMod.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},function(e){t("StatsMod",e.StatsMod)}],execute:function(){e._RF.push({},"55f1easQ4dKQK+gxV9x6BgR","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index11.ts",["cc","./EventBus.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},function(e){t("EventBus",e.EventBus)}],execute:function(){e._RF.push({},"5b0dbVkCIlDa4lBM/c0LJBm","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index12.ts",["cc","./LifecycleMod.ts"],(function(e){var c;return{setters:[function(e){c=e.cclegacy},function(c){e("LifecycleMod",c.LifecycleMod)}],execute:function(){c._RF.push({},"60baeoenjRJv5GxD+6zU1XV","index",void 0),c._RF.pop()}}}));

System.register("chunks:///_virtual/index13.ts",["cc","./index4.ts","./index22.ts","./index5.ts","./HoverButton.ts","./DrawDebugBorder.ts","./HexagonLayout.ts","./NineGridLayout.ts"],(function(t){var n;return{setters:[function(t){n=t.cclegacy},null,null,null,function(n){t("HoverButton",n.HoverButton)},function(n){t("DrawDebugBorder",n.DrawDebugBorder)},function(n){t("HexagonLayout",n.HexagonLayout)},function(n){t("NineGridLayout",n.NineGridLayout)}],execute:function(){n._RF.push({},"6ccbf7DPC9IUImX6KleC3US","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index14.ts",["cc","./MovementMod.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},function(t){e("MovementMod",t.MovementMod)}],execute:function(){t._RF.push({},"7fe6bw5Z6tEN4HG5LIyUgav","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index15.ts",["cc","./BattleUnit.ts","./UnitsMod.ts"],(function(t){var n;return{setters:[function(t){n=t.cclegacy},function(n){t("BattleUnit",n.BattleUnit)},function(n){t("UnitsMod",n.UnitsMod)}],execute:function(){n._RF.push({},"93313i5/SpNrajEsxfSmsqY","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index16.ts",["cc","./AbstractProjectile.ts","./enums6.ts","./interfaces4.ts","./ProjectileMod.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},function(t){e("AbstractProjectile",t.AbstractProjectile)},function(t){var c={};c.ProjectileState=t.ProjectileState,c.ProjectileType=t.ProjectileType,e(c)},null,function(t){e("ProjectileMod",t.ProjectileMod)}],execute:function(){t._RF.push({},"9c550Hprg1Ex5nGSh9eth4q","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index17.ts",["cc","./index13.ts","./index27.ts","./index25.ts","./index6.ts","./index23.ts","./HoverButton.ts","./DrawDebugBorder.ts","./HexagonLayout.ts","./NineGridLayout.ts","./EventBus.ts","./Exceptions.ts","./Player.ts","./Helpers.ts","./TemplateHelper.ts","./TemplateManager.ts","./constants3.ts","./BehaviorTreeMod.ts","./constants6.ts","./enums9.ts","./StateMachineMod.ts","./AttrMod.ts","./constants5.ts","./BattleManager.ts","./BuffBox.ts","./BuffEffect.ts","./BuffMod.ts","./enums7.ts","./CalcMod.ts","./enums2.ts","./BattleContext.ts","./constants2.ts","./enums3.ts","./event.ts","./LifecycleMod.ts","./MovementMod.ts","./AbstractProjectile.ts","./enums6.ts","./ProjectileMod.ts","./constants4.ts","./enums.ts","./SkillMod.ts","./StatsMod.ts","./BattleUnit.ts","./UnitsMod.ts","./SpineAnimator.ts","./SpineMove.ts","./FileUtils.ts","./FunctionUtils.ts","./JsonUtils.ts","./Log.ts","./NumberUtils.ts","./ObjectUtils.ts","./StorageUtils.ts","./StringUtils.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},null,null,null,null,null,function(e){t("HoverButton",e.HoverButton)},function(e){t("DrawDebugBorder",e.DrawDebugBorder)},function(e){t("HexagonLayout",e.HexagonLayout)},function(e){t("NineGridLayout",e.NineGridLayout)},function(e){t("EventBus",e.EventBus)},function(e){var n={};n.InitException=e.InitException,n.TemplateException=e.TemplateException,t(n)},function(e){t("Player",e.Player)},function(e){var n={};n.ActionHelper=e.ActionHelper,n.AwardHelper=e.AwardHelper,n.BuffEffectHelper=e.BuffEffectHelper,n.BuffHelper=e.BuffHelper,n.ConstHelper=e.ConstHelper,n.EquipHelper=e.EquipHelper,n.ItemHelper=e.ItemHelper,n.LabelHelper=e.LabelHelper,n.ProductHelper=e.ProductHelper,n.ProjectileHelper=e.ProjectileHelper,n.RoutineHelper=e.RoutineHelper,n.SkillHelper=e.SkillHelper,n.SuitHelper=e.SuitHelper,n.TipsHelper=e.TipsHelper,n.UnitHelper=e.UnitHelper,t(n)},function(e){t("TemplateHelper",e.TemplateHelper)},function(e){var n={};n.TemplateManager=e.TemplateManager,n.templateHelper=e.templateHelper,t(n)},function(e){t("FPS",e.FPS)},function(e){t("BehaviorTreeMod",e.BehaviorTreeMod)},function(e){var n={};n.ATTACK_RANGE=e.ATTACK_RANGE,n.CHASE_RANGE=e.CHASE_RANGE,n.DECISION_INTERVAL=e.DECISION_INTERVAL,n.RETREAT_RANGE=e.RETREAT_RANGE,t(n)},function(e){t("StateType",e.StateType)},function(e){var n={};n.ActionState=e.ActionState,n.BasicState=e.BasicState,n.BornState=e.BornState,n.ChaseState=e.ChaseState,n.DeadState=e.DeadState,n.FleeState=e.FleeState,n.IdleState=e.IdleState,n.StateMachineMod=e.StateMachineMod,n.WanderState=e.WanderState,t(n)},function(e){t("AttrMod",e.AttrMod)},function(e){t("AttrKey",e.AttrKey)},function(e){t("BattleManager",e.BattleManager)},function(e){t("BuffBox",e.BuffBox)},function(e){t("AbstractEffect",e.AbstractEffect)},function(e){t("BuffMod",e.BuffMod)},function(e){var n={};n.BuffAffectType=e.BuffAffectType,n.BuffPurpose=e.BuffPurpose,n.BuffStatus=e.BuffStatus,n.DestroyReason=e.DestroyReason,n.DisposedRule=e.DisposedRule,n.HookResult=e.HookResult,n.ReplaceRule=e.ReplaceRule,t(n)},function(e){t("CalcMod",e.CalcMod)},function(e){t("DamageSource",e.DamageSource)},function(e){t("BattleContext",e.BattleContext)},function(e){var n={};n.ASTERISK=e.ASTERISK,n.COLON=e.COLON,n.COMMA=e.COMMA,n.DEF_CHANGE_POINT=e.DEF_CHANGE_POINT,n.DEF_INVERSE=e.DEF_INVERSE,n.MAX_RATE=e.MAX_RATE,n.RECOVER_INTERNAL=e.RECOVER_INTERNAL,n.SEMICOLON=e.SEMICOLON,t(n)},function(e){var n={};n.TipsType=e.TipsType,n.UnitCamp=e.UnitCamp,t(n)},function(e){var n={};n.OnActionEvent=e.OnActionEvent,n.OnAttributeUpdateEvent=e.OnAttributeUpdateEvent,n.OnBubbleTipsEvent=e.OnBubbleTipsEvent,n.OnBuffActiveEvent=e.OnBuffActiveEvent,n.OnBuffHookEvent=e.OnBuffHookEvent,n.OnBuffResistEvent=e.OnBuffResistEvent,n.OnDamageEvent=e.OnDamageEvent,n.OnDisposedBuffEvent=e.OnDisposedBuffEvent,n.OnForceDeadEvent=e.OnForceDeadEvent,n.OnReadyToAddHpEvent=e.OnReadyToAddHpEvent,n.OnReadyToSubHpEvent=e.OnReadyToSubHpEvent,n.OnShieldBreakEvent=e.OnShieldBreakEvent,n.OnUnitDeadEvent=e.OnUnitDeadEvent,n.OnXXXEvent=e.OnXXXEvent,n.TryActiveBuffEvent=e.TryActiveBuffEvent,n.TryDisposedBuffEvent=e.TryDisposedBuffEvent,n.XXXTryEvent=e.XXXTryEvent,t(n)},function(e){t("LifecycleMod",e.LifecycleMod)},function(e){t("MovementMod",e.MovementMod)},function(e){t("AbstractProjectile",e.AbstractProjectile)},function(e){var n={};n.ProjectileState=e.ProjectileState,n.ProjectileType=e.ProjectileType,t(n)},function(e){t("ProjectileMod",e.ProjectileMod)},function(e){var n={};n.DAMAGE_MAX_FACTOR=e.DAMAGE_MAX_FACTOR,n.DAMAGE_MIN_FACTOR=e.DAMAGE_MIN_FACTOR,n.DEFAULT_AOE_RADIUS=e.DEFAULT_AOE_RADIUS,n.DEFAULT_ATTACK_COOLDOWN=e.DEFAULT_ATTACK_COOLDOWN,n.DEFAULT_BACKSWING_TIME=e.DEFAULT_BACKSWING_TIME,n.DEFAULT_CAST_TIME=e.DEFAULT_CAST_TIME,n.DEFAULT_GLOBAL_COOLDOWN=e.DEFAULT_GLOBAL_COOLDOWN,n.DEFAULT_HIT_CHANCE=e.DEFAULT_HIT_CHANCE,n.DEFAULT_MELEE_RANGE=e.DEFAULT_MELEE_RANGE,n.DEFAULT_MP_COST=e.DEFAULT_MP_COST,n.DEFAULT_RANGED_RANGE=e.DEFAULT_RANGED_RANGE,n.DEFAULT_SKILL_COOLDOWN=e.DEFAULT_SKILL_COOLDOWN,n.HEAL_SKILL_MULTIPLIER=e.HEAL_SKILL_MULTIPLIER,n.HIGH_HIT_CHANCE=e.HIGH_HIT_CHANCE,n.HIGH_MP_COST=e.HIGH_MP_COST,n.LOW_HIT_CHANCE=e.LOW_HIT_CHANCE,n.LOW_MP_COST=e.LOW_MP_COST,n.MAX_ALL_TARGETS=e.MAX_ALL_TARGETS,n.MAX_LARGE_AOE_TARGETS=e.MAX_LARGE_AOE_TARGETS,n.MAX_MEDIUM_AOE_TARGETS=e.MAX_MEDIUM_AOE_TARGETS,n.MAX_SINGLE_TARGET=e.MAX_SINGLE_TARGET,n.MAX_SKILL_LEVEL=e.MAX_SKILL_LEVEL,n.MAX_SMALL_AOE_TARGETS=e.MAX_SMALL_AOE_TARGETS,n.MEDIUM_HIT_CHANCE=e.MEDIUM_HIT_CHANCE,n.MEDIUM_MP_COST=e.MEDIUM_MP_COST,n.NORMAL_ATTACK_MULTIPLIER=e.NORMAL_ATTACK_MULTIPLIER,n.NORMAL_CAST_TIME=e.NORMAL_CAST_TIME,n.NO_BACKSWING_TIME=e.NO_BACKSWING_TIME,n.QUICK_BACKSWING_TIME=e.QUICK_BACKSWING_TIME,n.QUICK_CAST_TIME=e.QUICK_CAST_TIME,n.SELF_HEAL_MULTIPLIER=e.SELF_HEAL_MULTIPLIER,n.SKILL_DAMAGE_MULTIPLIER=e.SKILL_DAMAGE_MULTIPLIER,n.SKILL_ID_NORMAL_ATTACK=e.SKILL_ID_NORMAL_ATTACK,n.SKILL_ID_PASSIVE=e.SKILL_ID_PASSIVE,n.SKILL_ID_SKILL_1=e.SKILL_ID_SKILL_1,n.SKILL_ID_SKILL_2=e.SKILL_ID_SKILL_2,n.SKILL_ID_ULTIMATE=e.SKILL_ID_ULTIMATE,n.SKILL_LEVEL_COOLDOWN_REDUCTION=e.SKILL_LEVEL_COOLDOWN_REDUCTION,n.SKILL_LEVEL_DAMAGE_BONUS=e.SKILL_LEVEL_DAMAGE_BONUS,n.SLOW_CAST_TIME=e.SLOW_CAST_TIME,n.ULTIMATE_DAMAGE_MULTIPLIER=e.ULTIMATE_DAMAGE_MULTIPLIER,n.ULTIMATE_MP_COST=e.ULTIMATE_MP_COST,t(n)},function(e){var n={};n.ESkillEffectType=e.ESkillEffectType,n.ESkillReleaseConditionType=e.ESkillReleaseConditionType,n.ESkillState=e.ESkillState,n.ESkillTargetType=e.ESkillTargetType,n.ESkillType=e.ESkillType,t(n)},function(e){t("SkillMod",e.SkillMod)},function(e){t("StatsMod",e.StatsMod)},function(e){t("BattleUnit",e.BattleUnit)},function(e){t("UnitsMod",e.UnitsMod)},function(e){t("SpineAnimator",e.SpineAnimator)},function(e){t("SpineMove",e.SpineMove)},function(e){t("FileUtils",e.FileUtils)},function(e){t("FunctionUtils",e.FunctionUtils)},function(e){t("readInJson",e.readInJson)},function(e){t("Log",e.Log)},function(e){t("NumberUtils",e.NumberUtils)},function(e){t("ObjectUtils",e.ObjectUtils)},function(e){t("StorageUtils",e.StorageUtils)},function(e){t("StringUtils",e.StringUtils)}],execute:function(){e._RF.push({},"9f157HzYxdN6aDUFsNPZwf4","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index18.ts",["cc","./Exceptions.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},function(e){var n={};n.InitException=e.InitException,n.TemplateException=e.TemplateException,t(n)}],execute:function(){e._RF.push({},"a2f88gL4DhJg7GM9/uSXyqf","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index19.ts",["cc","./event.ts"],(function(e){var n;return{setters:[function(e){n=e.cclegacy},function(n){var t={};t.OnActionEvent=n.OnActionEvent,t.OnAttributeUpdateEvent=n.OnAttributeUpdateEvent,t.OnBubbleTipsEvent=n.OnBubbleTipsEvent,t.OnBuffActiveEvent=n.OnBuffActiveEvent,t.OnBuffHookEvent=n.OnBuffHookEvent,t.OnBuffResistEvent=n.OnBuffResistEvent,t.OnDamageEvent=n.OnDamageEvent,t.OnDisposedBuffEvent=n.OnDisposedBuffEvent,t.OnForceDeadEvent=n.OnForceDeadEvent,t.OnReadyToAddHpEvent=n.OnReadyToAddHpEvent,t.OnReadyToSubHpEvent=n.OnReadyToSubHpEvent,t.OnShieldBreakEvent=n.OnShieldBreakEvent,t.OnUnitDeadEvent=n.OnUnitDeadEvent,t.OnXXXEvent=n.OnXXXEvent,t.TryActiveBuffEvent=n.TryActiveBuffEvent,t.TryDisposedBuffEvent=n.TryDisposedBuffEvent,t.XXXTryEvent=n.XXXTryEvent,e(t)}],execute:function(){n._RF.push({},"a3885Emb3VK+a65O+YqXKox","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index2.ts",["cc","./constants4.ts","./enums.ts","./interfaces6.ts","./SkillMod.ts"],(function(_){var L;return{setters:[function(_){L=_.cclegacy},function(L){var A={};A.DAMAGE_MAX_FACTOR=L.DAMAGE_MAX_FACTOR,A.DAMAGE_MIN_FACTOR=L.DAMAGE_MIN_FACTOR,A.DEFAULT_AOE_RADIUS=L.DEFAULT_AOE_RADIUS,A.DEFAULT_ATTACK_COOLDOWN=L.DEFAULT_ATTACK_COOLDOWN,A.DEFAULT_BACKSWING_TIME=L.DEFAULT_BACKSWING_TIME,A.DEFAULT_CAST_TIME=L.DEFAULT_CAST_TIME,A.DEFAULT_GLOBAL_COOLDOWN=L.DEFAULT_GLOBAL_COOLDOWN,A.DEFAULT_HIT_CHANCE=L.DEFAULT_HIT_CHANCE,A.DEFAULT_MELEE_RANGE=L.DEFAULT_MELEE_RANGE,A.DEFAULT_MP_COST=L.DEFAULT_MP_COST,A.DEFAULT_RANGED_RANGE=L.DEFAULT_RANGED_RANGE,A.DEFAULT_SKILL_COOLDOWN=L.DEFAULT_SKILL_COOLDOWN,A.HEAL_SKILL_MULTIPLIER=L.HEAL_SKILL_MULTIPLIER,A.HIGH_HIT_CHANCE=L.HIGH_HIT_CHANCE,A.HIGH_MP_COST=L.HIGH_MP_COST,A.LOW_HIT_CHANCE=L.LOW_HIT_CHANCE,A.LOW_MP_COST=L.LOW_MP_COST,A.MAX_ALL_TARGETS=L.MAX_ALL_TARGETS,A.MAX_LARGE_AOE_TARGETS=L.MAX_LARGE_AOE_TARGETS,A.MAX_MEDIUM_AOE_TARGETS=L.MAX_MEDIUM_AOE_TARGETS,A.MAX_SINGLE_TARGET=L.MAX_SINGLE_TARGET,A.MAX_SKILL_LEVEL=L.MAX_SKILL_LEVEL,A.MAX_SMALL_AOE_TARGETS=L.MAX_SMALL_AOE_TARGETS,A.MEDIUM_HIT_CHANCE=L.MEDIUM_HIT_CHANCE,A.MEDIUM_MP_COST=L.MEDIUM_MP_COST,A.NORMAL_ATTACK_MULTIPLIER=L.NORMAL_ATTACK_MULTIPLIER,A.NORMAL_CAST_TIME=L.NORMAL_CAST_TIME,A.NO_BACKSWING_TIME=L.NO_BACKSWING_TIME,A.QUICK_BACKSWING_TIME=L.QUICK_BACKSWING_TIME,A.QUICK_CAST_TIME=L.QUICK_CAST_TIME,A.SELF_HEAL_MULTIPLIER=L.SELF_HEAL_MULTIPLIER,A.SKILL_DAMAGE_MULTIPLIER=L.SKILL_DAMAGE_MULTIPLIER,A.SKILL_ID_NORMAL_ATTACK=L.SKILL_ID_NORMAL_ATTACK,A.SKILL_ID_PASSIVE=L.SKILL_ID_PASSIVE,A.SKILL_ID_SKILL_1=L.SKILL_ID_SKILL_1,A.SKILL_ID_SKILL_2=L.SKILL_ID_SKILL_2,A.SKILL_ID_ULTIMATE=L.SKILL_ID_ULTIMATE,A.SKILL_LEVEL_COOLDOWN_REDUCTION=L.SKILL_LEVEL_COOLDOWN_REDUCTION,A.SKILL_LEVEL_DAMAGE_BONUS=L.SKILL_LEVEL_DAMAGE_BONUS,A.SLOW_CAST_TIME=L.SLOW_CAST_TIME,A.ULTIMATE_DAMAGE_MULTIPLIER=L.ULTIMATE_DAMAGE_MULTIPLIER,A.ULTIMATE_MP_COST=L.ULTIMATE_MP_COST,_(A)},function(L){var A={};A.ESkillEffectType=L.ESkillEffectType,A.ESkillReleaseConditionType=L.ESkillReleaseConditionType,A.ESkillState=L.ESkillState,A.ESkillTargetType=L.ESkillTargetType,A.ESkillType=L.ESkillType,_(A)},null,function(L){_("SkillMod",L.SkillMod)}],execute:function(){L._RF.push({},"1bfe5RxtzBOhaBsfXMSASrh","index",void 0),L._RF.pop()}}}));

System.register("chunks:///_virtual/index20.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"acb39FJn3ZBf4ecbVClVw/a","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index21.ts",["cc","./BuffBox.ts","./BuffEffect.ts","./BuffMod.ts","./enums7.ts","./interfaces7.ts"],(function(f){var e;return{setters:[function(f){e=f.cclegacy},function(e){f("BuffBox",e.BuffBox)},function(e){f("AbstractEffect",e.AbstractEffect)},function(e){f("BuffMod",e.BuffMod)},function(e){var t={};t.BuffAffectType=e.BuffAffectType,t.BuffPurpose=e.BuffPurpose,t.BuffStatus=e.BuffStatus,t.DestroyReason=e.DestroyReason,t.DisposedRule=e.DisposedRule,t.HookResult=e.HookResult,t.ReplaceRule=e.ReplaceRule,f(t)},null],execute:function(){e._RF.push({},"b463exQsM5DQ6jx6AXER+9L","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index22.ts",["cc","./DrawDebugBorder.ts"],(function(e){var r;return{setters:[function(e){r=e.cclegacy},function(r){e("DrawDebugBorder",r.DrawDebugBorder)}],execute:function(){r._RF.push({},"c1f55lDhxZDhKqcoM078v0C","index",void 0),r._RF.pop()}}}));

System.register("chunks:///_virtual/index23.ts",["cc","./FileUtils.ts","./FunctionUtils.ts","./JsonUtils.ts","./Log.ts","./NumberUtils.ts","./ObjectUtils.ts","./StorageUtils.ts","./StringUtils.ts"],(function(t){var i;return{setters:[function(t){i=t.cclegacy},function(i){t("FileUtils",i.FileUtils)},function(i){t("FunctionUtils",i.FunctionUtils)},function(i){t("readInJson",i.readInJson)},function(i){t("Log",i.Log)},function(i){t("NumberUtils",i.NumberUtils)},function(i){t("ObjectUtils",i.ObjectUtils)},function(i){t("StorageUtils",i.StorageUtils)},function(i){t("StringUtils",i.StringUtils)}],execute:function(){i._RF.push({},"c53fdVPV0VMv5LQ4wJstVn/","index",void 0),i._RF.pop()}}}));

System.register("chunks:///_virtual/index24.ts",["cc","./CalcMod.ts","./enums2.ts"],(function(c){var e;return{setters:[function(c){e=c.cclegacy},function(e){c("CalcMod",e.CalcMod)},function(e){c("DamageSource",e.DamageSource)}],execute:function(){e._RF.push({},"cd6b2KbmYFJW4a0gHkElAF5","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index25.ts",["cc","./constants3.ts","./enums5.ts","./interfaces.ts"],(function(n){var t;return{setters:[function(n){t=n.cclegacy},function(t){n("FPS",t.FPS)},null,null],execute:function(){t._RF.push({},"e014bwInBtKN6LRwbijnnIM","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index26.ts",["cc","./BattleContext.ts","./constants2.ts","./enums3.ts","./interfaces3.ts"],(function(t){var n;return{setters:[function(t){n=t.cclegacy},function(n){t("BattleContext",n.BattleContext)},function(n){var e={};e.ASTERISK=n.ASTERISK,e.COLON=n.COLON,e.COMMA=n.COMMA,e.DEF_CHANGE_POINT=n.DEF_CHANGE_POINT,e.DEF_INVERSE=n.DEF_INVERSE,e.MAX_RATE=n.MAX_RATE,e.RECOVER_INTERNAL=n.RECOVER_INTERNAL,e.SEMICOLON=n.SEMICOLON,t(e)},function(n){var e={};e.TipsType=n.TipsType,e.UnitCamp=n.UnitCamp,t(e)},null],execute:function(){n._RF.push({},"e9827ywNQtFW6sbftor9fr8","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index27.ts",["cc","./index11.ts","./index18.ts","./Player.ts","./index.ts","./EventBus.ts","./Exceptions.ts","./Helpers.ts","./TemplateHelper.ts","./TemplateManager.ts"],(function(e){var t;return{setters:[function(e){t=e.cclegacy},null,null,function(t){e("Player",t.Player)},null,function(t){e("EventBus",t.EventBus)},function(t){var l={};l.InitException=t.InitException,l.TemplateException=t.TemplateException,e(l)},function(t){var l={};l.ActionHelper=t.ActionHelper,l.AwardHelper=t.AwardHelper,l.BuffEffectHelper=t.BuffEffectHelper,l.BuffHelper=t.BuffHelper,l.ConstHelper=t.ConstHelper,l.EquipHelper=t.EquipHelper,l.ItemHelper=t.ItemHelper,l.LabelHelper=t.LabelHelper,l.ProductHelper=t.ProductHelper,l.ProjectileHelper=t.ProjectileHelper,l.RoutineHelper=t.RoutineHelper,l.SkillHelper=t.SkillHelper,l.SuitHelper=t.SuitHelper,l.TipsHelper=t.TipsHelper,l.UnitHelper=t.UnitHelper,e(l)},function(t){e("TemplateHelper",t.TemplateHelper)},function(t){var l={};l.TemplateManager=t.TemplateManager,l.templateHelper=t.templateHelper,e(l)}],execute:function(){t._RF.push({},"fe924Hgs1pJMqIUcEphSmKe","index",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/index3.ts",["cc","./BehaviorTreeMod.ts","./constants6.ts","./enums9.ts","./interfaces5.ts","./StateMachineMod.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},function(e){t("BehaviorTreeMod",e.BehaviorTreeMod)},function(e){var a={};a.ATTACK_RANGE=e.ATTACK_RANGE,a.CHASE_RANGE=e.CHASE_RANGE,a.DECISION_INTERVAL=e.DECISION_INTERVAL,a.RETREAT_RANGE=e.RETREAT_RANGE,t(a)},function(e){t("StateType",e.StateType)},null,function(e){var a={};a.ActionState=e.ActionState,a.BasicState=e.BasicState,a.BornState=e.BornState,a.ChaseState=e.ChaseState,a.DeadState=e.DeadState,a.FleeState=e.FleeState,a.IdleState=e.IdleState,a.StateMachineMod=e.StateMachineMod,a.WanderState=e.WanderState,t(a)}],execute:function(){e._RF.push({},"216e9fs23hGVb+dPkSn5wzK","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index4.ts",["cc","./HoverButton.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},function(e){t("HoverButton",e.HoverButton)}],execute:function(){e._RF.push({},"2bef6/fL/dFsIMn+Y+W6fId","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index5.ts",["cc","./HexagonLayout.ts","./NineGridLayout.ts"],(function(t){var n;return{setters:[function(t){n=t.cclegacy},function(n){t("HexagonLayout",n.HexagonLayout)},function(n){t("NineGridLayout",n.NineGridLayout)}],execute:function(){n._RF.push({},"35b27xJUr1CKaV8JL5xg0L1","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index6.ts",["cc","./index9.ts","./index7.ts","./BehaviorTreeMod.ts","./constants6.ts","./enums9.ts","./StateMachineMod.ts","./AttrMod.ts","./constants5.ts","./BattleManager.ts","./BuffBox.ts","./BuffEffect.ts","./BuffMod.ts","./enums7.ts","./CalcMod.ts","./enums2.ts","./BattleContext.ts","./constants2.ts","./enums3.ts","./event.ts","./LifecycleMod.ts","./MovementMod.ts","./AbstractProjectile.ts","./enums6.ts","./ProjectileMod.ts","./constants4.ts","./enums.ts","./SkillMod.ts","./StatsMod.ts","./BattleUnit.ts","./UnitsMod.ts","./SpineAnimator.ts","./SpineMove.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},null,null,function(e){t("BehaviorTreeMod",e.BehaviorTreeMod)},function(e){var E={};E.ATTACK_RANGE=e.ATTACK_RANGE,E.CHASE_RANGE=e.CHASE_RANGE,E.DECISION_INTERVAL=e.DECISION_INTERVAL,E.RETREAT_RANGE=e.RETREAT_RANGE,t(E)},function(e){t("StateType",e.StateType)},function(e){var E={};E.ActionState=e.ActionState,E.BasicState=e.BasicState,E.BornState=e.BornState,E.ChaseState=e.ChaseState,E.DeadState=e.DeadState,E.FleeState=e.FleeState,E.IdleState=e.IdleState,E.StateMachineMod=e.StateMachineMod,E.WanderState=e.WanderState,t(E)},function(e){t("AttrMod",e.AttrMod)},function(e){t("AttrKey",e.AttrKey)},function(e){t("BattleManager",e.BattleManager)},function(e){t("BuffBox",e.BuffBox)},function(e){t("AbstractEffect",e.AbstractEffect)},function(e){t("BuffMod",e.BuffMod)},function(e){var E={};E.BuffAffectType=e.BuffAffectType,E.BuffPurpose=e.BuffPurpose,E.BuffStatus=e.BuffStatus,E.DestroyReason=e.DestroyReason,E.DisposedRule=e.DisposedRule,E.HookResult=e.HookResult,E.ReplaceRule=e.ReplaceRule,t(E)},function(e){t("CalcMod",e.CalcMod)},function(e){t("DamageSource",e.DamageSource)},function(e){t("BattleContext",e.BattleContext)},function(e){var E={};E.ASTERISK=e.ASTERISK,E.COLON=e.COLON,E.COMMA=e.COMMA,E.DEF_CHANGE_POINT=e.DEF_CHANGE_POINT,E.DEF_INVERSE=e.DEF_INVERSE,E.MAX_RATE=e.MAX_RATE,E.RECOVER_INTERNAL=e.RECOVER_INTERNAL,E.SEMICOLON=e.SEMICOLON,t(E)},function(e){var E={};E.TipsType=e.TipsType,E.UnitCamp=e.UnitCamp,t(E)},function(e){var E={};E.OnActionEvent=e.OnActionEvent,E.OnAttributeUpdateEvent=e.OnAttributeUpdateEvent,E.OnBubbleTipsEvent=e.OnBubbleTipsEvent,E.OnBuffActiveEvent=e.OnBuffActiveEvent,E.OnBuffHookEvent=e.OnBuffHookEvent,E.OnBuffResistEvent=e.OnBuffResistEvent,E.OnDamageEvent=e.OnDamageEvent,E.OnDisposedBuffEvent=e.OnDisposedBuffEvent,E.OnForceDeadEvent=e.OnForceDeadEvent,E.OnReadyToAddHpEvent=e.OnReadyToAddHpEvent,E.OnReadyToSubHpEvent=e.OnReadyToSubHpEvent,E.OnShieldBreakEvent=e.OnShieldBreakEvent,E.OnUnitDeadEvent=e.OnUnitDeadEvent,E.OnXXXEvent=e.OnXXXEvent,E.TryActiveBuffEvent=e.TryActiveBuffEvent,E.TryDisposedBuffEvent=e.TryDisposedBuffEvent,E.XXXTryEvent=e.XXXTryEvent,t(E)},function(e){t("LifecycleMod",e.LifecycleMod)},function(e){t("MovementMod",e.MovementMod)},function(e){t("AbstractProjectile",e.AbstractProjectile)},function(e){var E={};E.ProjectileState=e.ProjectileState,E.ProjectileType=e.ProjectileType,t(E)},function(e){t("ProjectileMod",e.ProjectileMod)},function(e){var E={};E.DAMAGE_MAX_FACTOR=e.DAMAGE_MAX_FACTOR,E.DAMAGE_MIN_FACTOR=e.DAMAGE_MIN_FACTOR,E.DEFAULT_AOE_RADIUS=e.DEFAULT_AOE_RADIUS,E.DEFAULT_ATTACK_COOLDOWN=e.DEFAULT_ATTACK_COOLDOWN,E.DEFAULT_BACKSWING_TIME=e.DEFAULT_BACKSWING_TIME,E.DEFAULT_CAST_TIME=e.DEFAULT_CAST_TIME,E.DEFAULT_GLOBAL_COOLDOWN=e.DEFAULT_GLOBAL_COOLDOWN,E.DEFAULT_HIT_CHANCE=e.DEFAULT_HIT_CHANCE,E.DEFAULT_MELEE_RANGE=e.DEFAULT_MELEE_RANGE,E.DEFAULT_MP_COST=e.DEFAULT_MP_COST,E.DEFAULT_RANGED_RANGE=e.DEFAULT_RANGED_RANGE,E.DEFAULT_SKILL_COOLDOWN=e.DEFAULT_SKILL_COOLDOWN,E.HEAL_SKILL_MULTIPLIER=e.HEAL_SKILL_MULTIPLIER,E.HIGH_HIT_CHANCE=e.HIGH_HIT_CHANCE,E.HIGH_MP_COST=e.HIGH_MP_COST,E.LOW_HIT_CHANCE=e.LOW_HIT_CHANCE,E.LOW_MP_COST=e.LOW_MP_COST,E.MAX_ALL_TARGETS=e.MAX_ALL_TARGETS,E.MAX_LARGE_AOE_TARGETS=e.MAX_LARGE_AOE_TARGETS,E.MAX_MEDIUM_AOE_TARGETS=e.MAX_MEDIUM_AOE_TARGETS,E.MAX_SINGLE_TARGET=e.MAX_SINGLE_TARGET,E.MAX_SKILL_LEVEL=e.MAX_SKILL_LEVEL,E.MAX_SMALL_AOE_TARGETS=e.MAX_SMALL_AOE_TARGETS,E.MEDIUM_HIT_CHANCE=e.MEDIUM_HIT_CHANCE,E.MEDIUM_MP_COST=e.MEDIUM_MP_COST,E.NORMAL_ATTACK_MULTIPLIER=e.NORMAL_ATTACK_MULTIPLIER,E.NORMAL_CAST_TIME=e.NORMAL_CAST_TIME,E.NO_BACKSWING_TIME=e.NO_BACKSWING_TIME,E.QUICK_BACKSWING_TIME=e.QUICK_BACKSWING_TIME,E.QUICK_CAST_TIME=e.QUICK_CAST_TIME,E.SELF_HEAL_MULTIPLIER=e.SELF_HEAL_MULTIPLIER,E.SKILL_DAMAGE_MULTIPLIER=e.SKILL_DAMAGE_MULTIPLIER,E.SKILL_ID_NORMAL_ATTACK=e.SKILL_ID_NORMAL_ATTACK,E.SKILL_ID_PASSIVE=e.SKILL_ID_PASSIVE,E.SKILL_ID_SKILL_1=e.SKILL_ID_SKILL_1,E.SKILL_ID_SKILL_2=e.SKILL_ID_SKILL_2,E.SKILL_ID_ULTIMATE=e.SKILL_ID_ULTIMATE,E.SKILL_LEVEL_COOLDOWN_REDUCTION=e.SKILL_LEVEL_COOLDOWN_REDUCTION,E.SKILL_LEVEL_DAMAGE_BONUS=e.SKILL_LEVEL_DAMAGE_BONUS,E.SLOW_CAST_TIME=e.SLOW_CAST_TIME,E.ULTIMATE_DAMAGE_MULTIPLIER=e.ULTIMATE_DAMAGE_MULTIPLIER,E.ULTIMATE_MP_COST=e.ULTIMATE_MP_COST,t(E)},function(e){var E={};E.ESkillEffectType=e.ESkillEffectType,E.ESkillReleaseConditionType=e.ESkillReleaseConditionType,E.ESkillState=e.ESkillState,E.ESkillTargetType=e.ESkillTargetType,E.ESkillType=e.ESkillType,t(E)},function(e){t("SkillMod",e.SkillMod)},function(e){t("StatsMod",e.StatsMod)},function(e){t("BattleUnit",e.BattleUnit)},function(e){t("UnitsMod",e.UnitsMod)},function(e){t("SpineAnimator",e.SpineAnimator)},function(e){t("SpineMove",e.SpineMove)}],execute:function(){e._RF.push({},"38382NPWlJCKYVPHbWmzpKf","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index7.ts",["cc","./SpineAnimator.ts","./SpineMove.ts"],(function(n){var e;return{setters:[function(n){e=n.cclegacy},function(e){n("SpineAnimator",e.SpineAnimator)},function(e){n("SpineMove",e.SpineMove)}],execute:function(){e._RF.push({},"491caE9jwBN4o80qgoaPdog","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/index8.ts",["cc","./AttrMod.ts","./constants5.ts"],(function(t){var n;return{setters:[function(t){n=t.cclegacy},function(n){t("AttrMod",n.AttrMod)},function(n){t("AttrKey",n.AttrKey)}],execute:function(){n._RF.push({},"4ad9dSUEyxL1JQ3AQ32fQ0a","index",void 0),n._RF.pop()}}}));

System.register("chunks:///_virtual/index9.ts",["cc","./index3.ts","./index8.ts","./BattleManager.ts","./index21.ts","./index24.ts","./index26.ts","./index19.ts","./index12.ts","./index14.ts","./index16.ts","./index2.ts","./index10.ts","./index15.ts","./BehaviorTreeMod.ts","./constants6.ts","./enums9.ts","./StateMachineMod.ts","./AttrMod.ts","./constants5.ts","./BuffBox.ts","./BuffEffect.ts","./BuffMod.ts","./enums7.ts","./CalcMod.ts","./enums2.ts","./BattleContext.ts","./constants2.ts","./enums3.ts","./event.ts","./LifecycleMod.ts","./MovementMod.ts","./AbstractProjectile.ts","./enums6.ts","./ProjectileMod.ts","./constants4.ts","./enums.ts","./SkillMod.ts","./StatsMod.ts","./BattleUnit.ts","./UnitsMod.ts"],(function(t){var e;return{setters:[function(t){e=t.cclegacy},null,null,function(e){t("BattleManager",e.BattleManager)},null,null,null,null,null,null,null,null,null,null,function(e){t("BehaviorTreeMod",e.BehaviorTreeMod)},function(e){var E={};E.ATTACK_RANGE=e.ATTACK_RANGE,E.CHASE_RANGE=e.CHASE_RANGE,E.DECISION_INTERVAL=e.DECISION_INTERVAL,E.RETREAT_RANGE=e.RETREAT_RANGE,t(E)},function(e){t("StateType",e.StateType)},function(e){var E={};E.ActionState=e.ActionState,E.BasicState=e.BasicState,E.BornState=e.BornState,E.ChaseState=e.ChaseState,E.DeadState=e.DeadState,E.FleeState=e.FleeState,E.IdleState=e.IdleState,E.StateMachineMod=e.StateMachineMod,E.WanderState=e.WanderState,t(E)},function(e){t("AttrMod",e.AttrMod)},function(e){t("AttrKey",e.AttrKey)},function(e){t("BuffBox",e.BuffBox)},function(e){t("AbstractEffect",e.AbstractEffect)},function(e){t("BuffMod",e.BuffMod)},function(e){var E={};E.BuffAffectType=e.BuffAffectType,E.BuffPurpose=e.BuffPurpose,E.BuffStatus=e.BuffStatus,E.DestroyReason=e.DestroyReason,E.DisposedRule=e.DisposedRule,E.HookResult=e.HookResult,E.ReplaceRule=e.ReplaceRule,t(E)},function(e){t("CalcMod",e.CalcMod)},function(e){t("DamageSource",e.DamageSource)},function(e){t("BattleContext",e.BattleContext)},function(e){var E={};E.ASTERISK=e.ASTERISK,E.COLON=e.COLON,E.COMMA=e.COMMA,E.DEF_CHANGE_POINT=e.DEF_CHANGE_POINT,E.DEF_INVERSE=e.DEF_INVERSE,E.MAX_RATE=e.MAX_RATE,E.RECOVER_INTERNAL=e.RECOVER_INTERNAL,E.SEMICOLON=e.SEMICOLON,t(E)},function(e){var E={};E.TipsType=e.TipsType,E.UnitCamp=e.UnitCamp,t(E)},function(e){var E={};E.OnActionEvent=e.OnActionEvent,E.OnAttributeUpdateEvent=e.OnAttributeUpdateEvent,E.OnBubbleTipsEvent=e.OnBubbleTipsEvent,E.OnBuffActiveEvent=e.OnBuffActiveEvent,E.OnBuffHookEvent=e.OnBuffHookEvent,E.OnBuffResistEvent=e.OnBuffResistEvent,E.OnDamageEvent=e.OnDamageEvent,E.OnDisposedBuffEvent=e.OnDisposedBuffEvent,E.OnForceDeadEvent=e.OnForceDeadEvent,E.OnReadyToAddHpEvent=e.OnReadyToAddHpEvent,E.OnReadyToSubHpEvent=e.OnReadyToSubHpEvent,E.OnShieldBreakEvent=e.OnShieldBreakEvent,E.OnUnitDeadEvent=e.OnUnitDeadEvent,E.OnXXXEvent=e.OnXXXEvent,E.TryActiveBuffEvent=e.TryActiveBuffEvent,E.TryDisposedBuffEvent=e.TryDisposedBuffEvent,E.XXXTryEvent=e.XXXTryEvent,t(E)},function(e){t("LifecycleMod",e.LifecycleMod)},function(e){t("MovementMod",e.MovementMod)},function(e){t("AbstractProjectile",e.AbstractProjectile)},function(e){var E={};E.ProjectileState=e.ProjectileState,E.ProjectileType=e.ProjectileType,t(E)},function(e){t("ProjectileMod",e.ProjectileMod)},function(e){var E={};E.DAMAGE_MAX_FACTOR=e.DAMAGE_MAX_FACTOR,E.DAMAGE_MIN_FACTOR=e.DAMAGE_MIN_FACTOR,E.DEFAULT_AOE_RADIUS=e.DEFAULT_AOE_RADIUS,E.DEFAULT_ATTACK_COOLDOWN=e.DEFAULT_ATTACK_COOLDOWN,E.DEFAULT_BACKSWING_TIME=e.DEFAULT_BACKSWING_TIME,E.DEFAULT_CAST_TIME=e.DEFAULT_CAST_TIME,E.DEFAULT_GLOBAL_COOLDOWN=e.DEFAULT_GLOBAL_COOLDOWN,E.DEFAULT_HIT_CHANCE=e.DEFAULT_HIT_CHANCE,E.DEFAULT_MELEE_RANGE=e.DEFAULT_MELEE_RANGE,E.DEFAULT_MP_COST=e.DEFAULT_MP_COST,E.DEFAULT_RANGED_RANGE=e.DEFAULT_RANGED_RANGE,E.DEFAULT_SKILL_COOLDOWN=e.DEFAULT_SKILL_COOLDOWN,E.HEAL_SKILL_MULTIPLIER=e.HEAL_SKILL_MULTIPLIER,E.HIGH_HIT_CHANCE=e.HIGH_HIT_CHANCE,E.HIGH_MP_COST=e.HIGH_MP_COST,E.LOW_HIT_CHANCE=e.LOW_HIT_CHANCE,E.LOW_MP_COST=e.LOW_MP_COST,E.MAX_ALL_TARGETS=e.MAX_ALL_TARGETS,E.MAX_LARGE_AOE_TARGETS=e.MAX_LARGE_AOE_TARGETS,E.MAX_MEDIUM_AOE_TARGETS=e.MAX_MEDIUM_AOE_TARGETS,E.MAX_SINGLE_TARGET=e.MAX_SINGLE_TARGET,E.MAX_SKILL_LEVEL=e.MAX_SKILL_LEVEL,E.MAX_SMALL_AOE_TARGETS=e.MAX_SMALL_AOE_TARGETS,E.MEDIUM_HIT_CHANCE=e.MEDIUM_HIT_CHANCE,E.MEDIUM_MP_COST=e.MEDIUM_MP_COST,E.NORMAL_ATTACK_MULTIPLIER=e.NORMAL_ATTACK_MULTIPLIER,E.NORMAL_CAST_TIME=e.NORMAL_CAST_TIME,E.NO_BACKSWING_TIME=e.NO_BACKSWING_TIME,E.QUICK_BACKSWING_TIME=e.QUICK_BACKSWING_TIME,E.QUICK_CAST_TIME=e.QUICK_CAST_TIME,E.SELF_HEAL_MULTIPLIER=e.SELF_HEAL_MULTIPLIER,E.SKILL_DAMAGE_MULTIPLIER=e.SKILL_DAMAGE_MULTIPLIER,E.SKILL_ID_NORMAL_ATTACK=e.SKILL_ID_NORMAL_ATTACK,E.SKILL_ID_PASSIVE=e.SKILL_ID_PASSIVE,E.SKILL_ID_SKILL_1=e.SKILL_ID_SKILL_1,E.SKILL_ID_SKILL_2=e.SKILL_ID_SKILL_2,E.SKILL_ID_ULTIMATE=e.SKILL_ID_ULTIMATE,E.SKILL_LEVEL_COOLDOWN_REDUCTION=e.SKILL_LEVEL_COOLDOWN_REDUCTION,E.SKILL_LEVEL_DAMAGE_BONUS=e.SKILL_LEVEL_DAMAGE_BONUS,E.SLOW_CAST_TIME=e.SLOW_CAST_TIME,E.ULTIMATE_DAMAGE_MULTIPLIER=e.ULTIMATE_DAMAGE_MULTIPLIER,E.ULTIMATE_MP_COST=e.ULTIMATE_MP_COST,t(E)},function(e){var E={};E.ESkillEffectType=e.ESkillEffectType,E.ESkillReleaseConditionType=e.ESkillReleaseConditionType,E.ESkillState=e.ESkillState,E.ESkillTargetType=e.ESkillTargetType,E.ESkillType=e.ESkillType,t(E)},function(e){t("SkillMod",e.SkillMod)},function(e){t("StatsMod",e.StatsMod)},function(e){t("BattleUnit",e.BattleUnit)},function(e){t("UnitsMod",e.UnitsMod)}],execute:function(){e._RF.push({},"4c70bO3d0tPlaBnCDyq9j3f","index",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"24c31nz8f9OarKNSeolDj/E","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces2.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"3fff5aVdaJAn7UmeoBg0yWB","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces3.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"587demlm1tMFoAgTMuekSvM","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces4.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"5d609Lo8QRNnKCvw5cJWKwx","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces5.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"73f8d1SablC1L82DC1/+x8U","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces6.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"a7f26L2UJJED4hZVWhzdOyq","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces7.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"ae64ecXxK9GroZSY4IJaly5","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces8.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"d6b8dWzz5hB76b/vhxY2SOO","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/interfaces9.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"fb00fBb9UtJ1IeYtNUQn9/j","interfaces",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/JsonUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,r,t;return{setters:[function(e){n=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){t=e.cclegacy}],execute:function(){function c(){return(c=n(r().mark((function e(n){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"==typeof window||!window.fetch){e.next=7;break}return e.next=3,fetch(n);case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("HTTP "+t.status);case 6:return e.abrupt("return",t.json());case 7:if("undefined"==typeof cc||!cc.resources){e.next=9;break}return e.abrupt("return",new Promise((function(e,r){cc.resources.load(n,cc.JsonAsset,(function(n,t){n?r(n):e(t.json)}))})));case 9:throw new Error("当前环境不支持读取 JSON 文件");case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e("readInJson",(function(e){return c.apply(this,arguments)})),t._RF.push({},"2030dELxlpC4YcVQa5ntLIt","JsonUtils",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/LifecycleMod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index26.ts","./EventListener.ts","./index21.ts","./index24.ts","./index8.ts","./index19.ts","./BuffEffect_7_CannotCure.ts","./DamageResult.ts","./BuffEffect_13_SharedDamage.ts","./BuffEffect_11_Shield.ts","./CollectionUtils.ts","./constants2.ts","./constants5.ts","./event.ts","./enums7.ts","./enums3.ts","./enums2.ts"],(function(e){var t,n,i,r,a,o,s,f,u,c,d,v,l,E,h,w,g,p,A,_,R,S;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy},null,function(e){r=e.AbstractEventListener},null,null,null,null,function(e){a=e.BuffEffect_7_CannotCure},function(e){o=e.DamageResult},function(e){s=e.BuffEffect_13_SharedDamage},function(e){f=e.BuffEffect_11_Shield},function(e){u=e.singleMap},function(e){c=e.RECOVER_INTERNAL,d=e.MAX_RATE},function(e){v=e.AttrKey},function(e){l=e.OnReadyToAddHpEvent,E=e.OnBubbleTipsEvent,h=e.OnReadyToSubHpEvent,w=e.OnShieldBreakEvent,g=e.OnAttributeUpdateEvent,p=e.OnDamageEvent,A=e.OnUnitDeadEvent},function(e){_=e.BuffAffectType},function(e){R=e.TipsType},function(e){S=e.DamageSource}],execute:function(){i._RF.push({},"efca6XmQZlBzLdTlSIn+MXU","LifecycleMod",void 0);e("LifecycleMod",function(e){function i(t){var n;return(n=e.call(this)||this).owner=void 0,n.recoverTimer=0,n.owner=t,n}t(i,e);var r=i.prototype;return r.update=function(e){this.recoverTimer+=e;var t=this.owner.context.eventBus,n=this.owner.attrMod;this.owner.buffMod;if(this.recoverTimer>c){var i=n.getFinalAttr(v.HP_LIMIT),r=n.getFinalAttr(v.HP);if(r<i){var a=n.getFinalAttr(v.HP_RECOVER),o=Math.min(i-r,a);0!==o&&t.postEvent(new l(this.owner.id,this.owner.id,o))}this.recoverTimer=0}},r.onEvent=function(e){var t=this.owner.context.eventBus,i=this.owner.attrMod,r=this.owner.buffMod,u=i.getFinalAttr(v.HP);switch(e.name){case"OnForceDeadEvent":if(!e.deadList.includes(this.owner.id))return;this.unitDead();break;case"OnDamageEvent":if(!e.damageMap.get(this.owner.id))return;var c=i.getFinalAttr(v.HP);if(!c||c<=0){if(r.checkBuffAffect(_.IMMORTAL))return i.setCurHp(1),void t.postEvent(new E(R.IMMORTAL_TIPS,this.owner.id));i.dead()}break;case"OnAttributeUpdateEvent":if(e.generateHeroId!==this.owner.id)return;i.calcFinalAttr();break;case"OnReadyToAddHpEvent":var l=e;if(l.targetId!==this.owner.id)break;var p=l.value;if(0===p)break;var A=r.getBuffEffectList(a);if(A&&A.length>0)t.postEvent(new E(R.CANNOT_CURE,this.owner.id));else{i.addHp(p);var m=new g(l.generatorId,this.owner.id,v.HP,u,p,!0);t.postEvent(m)}break;case"OnReadyToSubHpEvent":var H=e,M=H.damageMap.get(this.owner.id);if(!M||!M.isValid())return;if(r.checkBuffAffect(_.IGNORE_ALL_DAMAGE))return void t.postEvent(new E(R.IGNORE_ALL_DAMAGE_TIPS,this.owner.id));if(H.damageSource!==S.SHARED_SOURCE){for(var D,L=new Map,O=0,T=r.getBuffEffectList(s),b=n(T);!(D=b()).done;){var B=D.value,I=B.getRate();(O+=I)>d&&(I-=O-d,O=d);var C=M.sharedDamage(I);if(C>0){var P=B.buffBox.generatorId;L.set(P,new o(C,M.critical)),t.postEvent(new E(R.SHARED_DAMAGE_TIPS,P))}if(O>=100)break}t.postEvent(new h(this.owner.id,L,S.SHARED_SOURCE))}if(!M.isValid())return;for(var y,k=r.getBuffEffectList(f),F=n(k);!(y=F()).done;){var x=y.value.getOngoing2Value();if(null!=x){var U=x.costValue;if(!(U<=0)){var N=M.shieldDamage(U);if(!(N<=0)){t.postEvent(new E(R.SHIELD_BLOCK_TIPS,this.owner.id)),x.changeCost(U-N);break}t.postEvent(new w),t.postEvent(new E(R.SHIELD_BREAK_TIPS,this.owner.id))}}}this.handleSubHp(H.generatorId,H.damageSource,M)}},r.handleSubHp=function(e,t,n){var i=this.owner.context.eventBus,r=this.owner.attrMod,a=(this.owner.buffMod,r.getFinalAttr(v.HP)),o=n.getFinalDamage();r.subHp(o);var s=new g(e,this.owner.id,v.HP,a,-o,!1);i.postEvent(s),i.postEvent(new p(e,u(this.owner.id,n),t)),this.owner.isDead()&&this.unitDead()},r.unitDead=function(){this.owner.context.eventBus.postEvent(new A(this.owner.id))},i}(r));i._RF.pop()}}}));

System.register("chunks:///_virtual/LinearProjectile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractProjectile.ts"],(function(t){var n,e,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.AbstractProjectile}],execute:function(){e._RF.push({},"69f7bHK0XlMDJinHU5zVh5V","LinearProjectile",void 0);t("LinearProjectile",function(t){function e(n,e,i){return t.call(this,n,e,i)||this}n(e,t);var i=e.prototype;return i.onInit=function(){},i.onUpdate=function(t){},i.onHit=function(t){},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/Log.ts",["cc"],(function(n){var r;return{setters:[function(n){r=n.cclegacy}],execute:function(){r._RF.push({},"c0ec5cVamRLsbKh2Yc+vRx8","Log",void 0);var e=n("Log",{info:function(){return e.info.apply(e,arguments)},error:function(){return e.error.apply(e,arguments)},debug:function(){var n;return(n=console).debug.apply(n,arguments)},warn:function(){var n;return(n=console).warn.apply(n,arguments)}});r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./HoverButton.ts","./index4.ts","./DrawDebugBorder.ts","./index22.ts","./index13.ts","./HexagonLayout.ts","./NineGridLayout.ts","./index5.ts","./GameManager.ts","./Player.ts","./Event2.ts","./EventBus.ts","./EventListener.ts","./index11.ts","./interfaces8.ts","./Exceptions.ts","./index18.ts","./index27.ts","./ResourceManager.ts","./Helpers.ts","./TemplateHelper.ts","./TemplateManager.ts","./Templates.ts","./index.ts","./interfaces9.ts","./constants3.ts","./datas.ts","./enums5.ts","./index25.ts","./interfaces.ts","./index17.ts","./BattleManager.ts","./AbstractAction.ts","./Action_1_Attack.ts","./enums4.ts","./index20.ts","./interfaces2.ts","./utils3.ts","./BehaviorTreeMod.ts","./StateMachineMod.ts","./constants6.ts","./enums9.ts","./index3.ts","./interfaces5.ts","./AnimMod.ts","./AttrMod.ts","./constants5.ts","./enums8.ts","./index8.ts","./BuffBox.ts","./BuffMod.ts","./AbstractCondition.ts","./AbstractEventCondition.ts","./AbstractOngoingCondition.ts","./Condition_10_UnitDead.ts","./Event_0_Direct.ts","./Ongoing_1_Time.ts","./Ongoing_2_Value.ts","./constants.ts","./BuffEffect.ts","./BuffEffect_0_Default.ts","./BuffEffect_10_Resist.ts","./BuffEffect_11_Shield.ts","./BuffEffect_13_SharedDamage.ts","./BuffEffect_7_CannotCure.ts","./enums7.ts","./index21.ts","./interfaces7.ts","./utils2.ts","./CalcMod.ts","./DamageResult.ts","./enums2.ts","./index24.ts","./BattleContext.ts","./constants2.ts","./enums3.ts","./index26.ts","./interfaces3.ts","./event.ts","./index19.ts","./index9.ts","./LifecycleMod.ts","./index12.ts","./MovementMod.ts","./index14.ts","./AbstractProjectile.ts","./LinearProjectile.ts","./ProjectileMod.ts","./TrackingProjectile.ts","./enums6.ts","./index16.ts","./interfaces4.ts","./SkillMod.ts","./UnitSkill.ts","./constants4.ts","./enums.ts","./index2.ts","./interfaces6.ts","./utils.ts","./StatsMod.ts","./index10.ts","./BattleUnit.ts","./UnitsMod.ts","./index15.ts","./index6.ts","./SpineAnimator.ts","./SpineMove.ts","./index7.ts","./CollectionUtils.ts","./FileUtils.ts","./FunctionUtils.ts","./JsonUtils.ts","./Log.ts","./MathUtils.ts","./NumberUtils.ts","./ObjectUtils.ts","./RandomUtils.ts","./RecordUtils.ts","./StorageUtils.ts","./StringUtils.ts","./UuidUtils.ts","./index23.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MathUtils.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"2c237aTMb1PVKFTKquEr6ah","MathUtils",void 0);t("MathUtils",function(){function t(){}return t.vectorLength=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/MovementMod.ts",["cc"],(function(t){var o,i,s;return{setters:[function(t){o=t.cclegacy,i=t.Vec3,s=t.Vec2}],execute:function(){o._RF.push({},"61593StZtpPibf/tsaHC3Qx","MovementMod",void 0);t("MovementMod",function(){function t(t){this.owner=void 0,this.pos=new s(0,0),this.dir=0,this.targetPos=null,this.isAttacking=!1,this.isMoving=!1,this.moveSpeed=.2,this.owner=t}var o=t.prototype;return o.update=function(t){if(this.canMove())if(this.targetPos){var o=this.targetPos.clone().normalize().multiplyScalar(this.moveSpeed*t);this.owner.node.position=this.owner.node.position.add(o),0!==this.targetPos.x&&(this.dir=this.targetPos.x>0?1:-1,this.owner.node.scale=new i(this.dir,1,1)),"move"!==this.owner.animMod.curAnim&&this.owner.animMod.playAnim("move",!0)}else this.isAttacking||"wait"===this.owner.animMod.curAnim||this.owner.animMod.playAnim("wait",!0)},o.init=function(){},o.destroy=function(){},o.distanceTo=function(t){var o=this.pos.x-t.movementMod.pos.x,i=this.pos.y-t.movementMod.pos.y;return Math.sqrt(o*o+i*i)},o.moveTowards=function(t,o){this.targetPos=t.movementMod.pos.clone(),this.update(o)},o.moveAwayFrom=function(t,o){var i=this.pos.x-t.movementMod.pos.x,s=this.pos.y-t.movementMod.pos.y;if(!(Math.sqrt(i*i+s*s)<.01)){var e=Math.atan2(s,i),n=this.moveSpeed*o;this.pos.x+=Math.cos(e)*n,this.pos.y+=Math.sin(e)*n,this.dir=e,this.isMoving=!0}},o.randomMove=function(t){if(!this.targetPos){var o=100*Math.random()+50,i=Math.random()*Math.PI*2;this.targetPos=this.pos.clone(),this.targetPos.x+=Math.cos(i)*o,this.targetPos.y+=Math.sin(i)*o}},o.canMove=function(){return!this.isAttacking},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/NineGridLayout.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,r,n,o,l,u,a,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,u=t.Node,a=t.UITransform,c=t.Component}],execute:function(){var s,h,p,f,b,g,d,y,m,w,z,L,N,R,T,v,B,C,G,H,_,x,D,P,W;o._RF.push({},"c96bao4bL9ExZjw9xpUMdv+","NineGridLayout",void 0);var j=l.ccclass,F=l.property;t("NineGridLayout",(s=j("NineGridLayout"),h=F(u),p=F(u),f=F(u),b=F(u),g=F(u),d=F(u),y=F(u),m=F(u),w=F(u),s((N=e((L=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,r(e,"TopLeft",N,n(e)),r(e,"TopRight",R,n(e)),r(e,"BottomLeft",T,n(e)),r(e,"BottomRight",v,n(e)),r(e,"Top",B,n(e)),r(e,"Bottom",C,n(e)),r(e,"Left",G,n(e)),r(e,"Right",H,n(e)),r(e,"Center",_,n(e)),r(e,"width",x,n(e)),r(e,"height",D,n(e)),r(e,"cornerWidth",P,n(e)),r(e,"cornerHeight",W,n(e)),e.anchor=.5,e}i(e,t);var o=e.prototype;return o.start=function(){this.layout()},o.layout=function(){var t=this.width,e=this.height,i=this.cornerWidth,r=this.cornerHeight,n=t-2*i,o=e-2*r;this.setNode(this.TopLeft,-t/2+i/2,e/2-r/2,i,r),this.setNode(this.TopRight,t/2-i/2,e/2-r/2,i,r),this.setNode(this.BottomLeft,-t/2+i/2,-e/2+r/2,i,r),this.setNode(this.BottomRight,t/2-i/2,-e/2+r/2,i,r),this.setNode(this.Top,0,e/2-r/2,n,r),this.setNode(this.Bottom,0,-e/2+r/2,n,r),this.setNode(this.Left,-t/2+i/2,0,i,o),this.setNode(this.Right,t/2-i/2,0,i,o),this.setNode(this.Center,0,0,n,o)},o.setNode=function(t,e,i,r,n){t.setPosition(e,i);var o=t.getComponent(a);o&&o.setContentSize(r,n)},e}(c)).prototype,"TopLeft",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(L.prototype,"TopRight",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(L.prototype,"BottomLeft",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(L.prototype,"BottomRight",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(L.prototype,"Top",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(L.prototype,"Bottom",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(L.prototype,"Left",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(L.prototype,"Right",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(L.prototype,"Center",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(L.prototype,"width",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1130}}),D=e(L.prototype,"height",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 760}}),P=e(L.prototype,"cornerWidth",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),W=e(L.prototype,"cornerHeight",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),z=L))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/NumberUtils.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"ab3b7ZJ8wVJDJf/n76Fv8xY","NumberUtils",void 0);n("NumberUtils",function(){function n(){}return n.randomInt=function(n,t){return Math.floor(Math.random()*(t-n+1))+n},n.randomFloat=function(n,t){return Math.random()*(t-n)+n},n.clamp=function(n,t,r){return Math.min(Math.max(n,t),r)},n.lerp=function(n,t,r){return n+(t-n)*r},n.toFixed=function(n,t){return void 0===t&&(t=2),n.toFixed(t)},n.toThousands=function(n,t){return void 0===t&&(t=","),n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t)},n.toShortForm=function(n,t){void 0===t&&(t=1);for(var r=["","K","M","B","T"],o=0,e=Math.abs(n);e>=1e3&&o<r.length-1;)e/=1e3,o++;return""+(n<0?"-":"")+e.toFixed(t)+r[o]},n.inRange=function(n,t,r){return n>=t&&n<=r},n.degreesToRadians=function(n){return n*(Math.PI/180)},n.radiansToDegrees=function(n){return n*(180/Math.PI)},n.distance=function(n,t,r,o){var e=r-n,u=o-t;return Math.sqrt(e*e+u*u)},n.isEven=function(n){return n%2==0},n.isOdd=function(n){return n%2!=0},n.roundToMultiple=function(n,t){return Math.round(n/t)*t},n.randomBoolean=function(n){return void 0===n&&(n=.5),Math.random()<n},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n;return{setters:[function(e){t=e.createForOfIteratorHelperLoose,r=e.extends},function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"917a4qCD8dLnYq/DadkDRbU","ObjectUtils",void 0);var i=e("ObjectUtils",{deepClone:function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array)return e.map((function(e){return i.deepClone(e)}));if("object"==typeof e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=i.deepClone(e[r]));return t}return e},deepMerge:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!r.length)return e;var o=r.shift();if(i.isObject(e)&&i.isObject(o))for(var a in o){var c,f;if(i.isObject(o[a]))e[a]||Object.assign(e,((c={})[a]={},c)),i.deepMerge(e[a],o[a]);else Object.assign(e,((f={})[a]=o[a],f))}return i.deepMerge.apply(i,[e].concat(r))},isObject:function(e){return e&&"object"==typeof e&&!Array.isArray(e)},isEmpty:function(e){return null==e||(Array.isArray(e)||"string"==typeof e?0===e.length:e instanceof Map||e instanceof Set?0===e.size:0===Object.keys(e).length)},get:function(e,r,n){for(var i,o=r.split("."),a=e,c=t(o);!(i=c()).done;){var f=i.value;if(null==a||"object"!=typeof a)return n;a=a[f]}return void 0!==a?a:n},set:function(e,t,r){for(var n=t.split("."),o=e,a=0;a<n.length-1;a++){var c=n[a];c in o&&i.isObject(o[c])||(o[c]={}),o=o[c]}o[n[n.length-1]]=r},pick:function(e,t){var r={};return t.forEach((function(t){t in e&&(r[t]=e[t])})),r},omit:function(e,t){var n=r({},e);return t.forEach((function(e){delete n[e]})),n},flatten:function(e,t){void 0===t&&(t="");var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var o=t?t+"."+n:n;i.isObject(e[n])?Object.assign(r,i.flatten(e[n],o)):r[o]=e[n]}return r},deepEqual:function(e,t){if(e===t)return!0;if(null==e||null==t)return e===t;if(typeof e!=typeof t)return!1;if("object"!=typeof e)return e===t;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=0,a=r;o<a.length;o++){var c=a[o];if(!n.includes(c))return!1;if(!i.deepEqual(e[c],t[c]))return!1}return!0},mapKeys:function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[t(n)]=e[n]);return r},mapValues:function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=t(e[n],n));return r}});n._RF.pop()}}}));

System.register("chunks:///_virtual/Ongoing_1_Time.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractOngoingCondition.ts"],(function(t){var i,n,o;return{setters:[function(t){i=t.inheritsLoose},function(t){n=t.cclegacy},function(t){o=t.AbstractOngoingCondition}],execute:function(){n._RF.push({},"fc5f9pgVfJCIYx8quXnNwut","Ongoing_1_Time",void 0);t("Ongoing_1_Time",function(t){function n(i,n,o){var r,u;return(u=t.call(this,i,n)||this).duration=void 0,u.extraDuration=void 0,u.costTime=void 0,u.duration=Number(null!=(r=o.param)?r:0),u}i(n,t);var o=n.prototype;return o.isMatch=function(){return this.costTime>=this.duration},o.update=function(t){this.costTime+=t},o.changeDuration=function(t){this.extraDuration+=t},o.getDuration=function(){return this.duration+this.extraDuration},o.migrateTo=function(t){this.extraDuration=t.extraDuration,this.costTime=t.costTime},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/Ongoing_2_Value.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractOngoingCondition.ts"],(function(t){var n,e,o,i;return{setters:[function(t){n=t.inheritsLoose,e=t.createClass},function(t){o=t.cclegacy},function(t){i=t.AbstractOngoingCondition}],execute:function(){o._RF.push({},"e12fdbmLpNHSoZHsNFnZ/Ni","Ongoing_2_Value",void 0);t("Ongoing2Value",function(t){function o(n,e,o){var i,u;return(u=t.call(this,n,e)||this).value=void 0,u._costValue=void 0,u.value=Number(null!=(i=o.param)?i:0),u}n(o,t);var i=o.prototype;return i.isMatch=function(){return this._costValue>=this.value},i.update=function(t){},i.changeCost=function(t){this._costValue+=t},e(o,[{key:"costValue",get:function(){return this._costValue}}]),o}(i));o._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["cc"],(function(i){var e;return{setters:[function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"cae93LDfMRNb7vYCMaEQrBM","Player",void 0);i("Player",(function(i){this.uid=void 0,this.saveName=void 0,this.chooseId=void 0,this.seed=void 0,this.poolId=void 0,this.version=void 0,this.templateName=void 0,this.uid=i}));e._RF.pop()}}}));

System.register("chunks:///_virtual/ProjectileMod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enums6.ts","./index23.ts","./EventListener.ts","./index27.ts","./LinearProjectile.ts","./TrackingProjectile.ts","./Log.ts","./TemplateManager.ts","./Helpers.ts"],(function(e){var t,r,o,n,i,c,a,l,s,u,p;return{setters:[function(e){t=e.inheritsLoose,r=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy},function(e){n=e.ProjectileState,i=e.ProjectileType},null,function(e){c=e.AbstractEventListener},null,function(e){a=e.LinearProjectile},function(e){l=e.TrackingProjectile},function(e){s=e.Log},function(e){u=e.TemplateManager},function(e){p=e.ProjectileHelper}],execute:function(){o._RF.push({},"cb963lrX3dJI7jkpDBO64/N","ProjectileMod",void 0);e("ProjectileMod",function(e){function o(t){var r;return(r=e.call(this)||this).context=void 0,r.projectileMap=new Map,r.context=t,r}t(o,e);var c=o.prototype;return c.update=function(e){this.context.currentTime;for(var t,o=[],i=r(this.projectileMap.values());!(t=i()).done;){var c=t.value;try{c.update(e),c.projectileState===n.DESTROYED&&o.push(c.id)}catch(e){s.error("弹射物更新失败, ",c.id),o.push(c.id)}for(var a,l=r(o);!(a=l()).done;){var u=a.value;this.destroyProjectile(u)}}},c.init=function(){},c.destroy=function(){},c.onEvent=function(e){},c.createProjectile=function(e,t,r){var o,n=u.inst().helper(p.name).getTemplate(e);if(null!=n)try{switch(n.type){case i.LINEAR:o=new a(this.context,n,t);break;case i.TRACK:o=new l(this.context,n,t,r);break;default:return void s.error("未知类型弹射物, ",n.type)}this.projectileMap.set(o.id,o)}catch(t){s.error("创建射弹失败, ",e,t)}else s.error("templateProjectile is null, ",e)},c.batchCreateProjectile=function(e,t,o){for(var n,i=r(o);!(n=i()).done;){var c=n.value;this.createProjectile(e,t,c)}},c.destroyProjectile=function(e){var t=this.projectileMap.get(e);return!!t&&(t.destroy(),this.projectileMap.delete(e),!0)},c.destroyProjectilesOwner=function(e){for(var t,o=0,n=[],i=r(this.projectileMap.values());!(t=i()).done;){var c=t.value;c.ownerId===e&&n.push(c.id)}for(var a=0,l=n;a<l.length;a++){var s=l[a];this.destroyProjectile(s)&&o++}return o},o}(c));o._RF.pop()}}}));

System.register("chunks:///_virtual/RandomUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var n,e;return{setters:[function(t){n=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"f1848DGwkBE3aoywgQku+hN","RandomUtils",void 0);var r=t("RandomCore",function(){function t(t){this.seed=void 0,this.multiplier=0x5DEECE66Dn,this.addend=0xBn,this.mask=(1n<<48n)-1n,this.initialSeed=void 0,this.seed=void 0!==t?this.hashSeed(BigInt(t)):this.createRandomSeed(),this.initialSeed=this.seed}var n=t.prototype;return n.setSeed=function(t){this.seed=this.hashSeed(BigInt(t))},n.getSeed=function(){return this.seed},n.reset=function(){this.seed=this.initialSeed},n.saveState=function(){return this.seed},n.restoreState=function(t){this.seed=t},n.hashSeed=function(t){return(t^this.multiplier)&this.mask},n.createRandomSeed=function(){return BigInt(Math.floor(4294967295*Math.random()))^BigInt(Date.now())},n.next=function(){return this.seed=this.seed*this.multiplier+this.addend&this.mask,Number(this.seed>>16n)/65536},n.randomInt=function(t,n){if(t>n){var e=[n,t];t=e[0],n=e[1]}return Math.floor(this.next()*(n-t+1))+t},n.randomFloat=function(t,n){if(t>n){var e=[n,t];t=e[0],n=e[1]}return this.next()*(n-t)+t},n.randomBool=function(t){return void 0===t&&(t=.5),this.next()<t},n.randomChoice=function(t){if(0===t.length)throw new Error("Array cannot be empty");return t[this.randomInt(0,t.length-1)]},n.randomChoices=function(t,n){if(n>t.length)throw new Error("Count cannot be greater than array length");var e=[].concat(t);return this.shuffleArray(e),e.slice(0,n)},n.shuffleArray=function(t){for(var n=t.length-1;n>0;n--){var e=this.randomInt(0,n),r=[t[e],t[n]];t[n]=r[0],t[e]=r[1]}},t}());t("RandomUtils",function(){function t(t,n){if(this.randomCore=void 0,this.seed=void 0,this.count=0,this.seed=t,this.randomCore=new r(t),this.count=0,n&&n>0)for(var e=0;e<n;e++)this.randomCore.randomInt(0,1),this.count++}var e=t.prototype;return e.getCount=function(){return this.count},e.getSeed=function(){return this.seed},e.gaiLvTo=function(t){return this.randomCore.randomFloat(0,1)<t},e.nextInt=function(t,n){return this.count++,this.randomCore.randomInt(t,n)},e.nextIntMax=function(t){return this.nextInt(0,t)},e.getRanNumByIntervalDouble=function(t,n){return this.count++,this.randomCore.randomFloat(t,n)},e.getRanListByInterval=function(t,n,e){var r=Array.from({length:n-t+1},(function(n,e){return e+t}));return this.randomCore.shuffleArray(r),new Set(r.slice(0,e))},e.randomIndexByWeight=function(t){for(var n=t.reduce((function(t,n){return t+n}),0),e=this.randomCore.randomFloat(0,n),r=0;r<t.length;r++){if(e<t[r])return r;e-=t[r]}return t.length-1},e.random=function(t,n){if(n){var e=t.map(n);return t[this.randomIndexByWeight(e)]}return this.randomCore.randomChoice(t)},e.randoms=function(t,n,e){if(e){for(var r=[],i=[].concat(t),o=0;o<n;o++){var a=this.random(i,e);r.push(a),i.splice(i.indexOf(a),1)}return r}return this.randomCore.randomChoices(t,n)},e.getRandomByWeight=function(t){if(Array.isArray(t))return this.randomIndexByWeight(t);for(var e,r=Object.entries(t).map((function(t){var n=t[0],e=t[1];return[parseInt(n),e]})),i=r.reduce((function(t,n){return t+n[1]}),0),o=this.randomCore.randomFloat(0,i),a=n(r);!(e=a()).done;){var s=e.value,u=s[0],h=s[1];if(o<h)return u;o-=h}return r[r.length-1][0]},e.getRandomByWeightString=function(t,n){void 0===n&&(n=",");var e=t.split(n).map(Number);return this.randomIndexByWeight(e)},e.getRandomManyByWeight=function(t,n,e){void 0===e&&(e=",");for(var r=t.split(e).map(Number),i=new Set;i.size<n;)i.add(this.randomIndexByWeight(r));return i},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/RecordUtils.ts",["cc"],(function(){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"01e56y74jxL+LqnEOK6LRTf","RecordUtils",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var n,e,t,a,o;return{setters:[function(r){n=r.asyncToGenerator,e=r.regeneratorRuntime},function(r){t=r.cclegacy,a=r.resources,o=r.SpriteFrame}],execute:function(){t._RF.push({},"b45e9g2qeVPDJSrqZaUYOmd","ResourceManager",void 0),r("ResourceManager",function(){function r(){this.headIconMap=new Map,this.heroCardMap=new Map,this.borderMap=new Map,this.skillMap=new Map}r.inst=function(){return this._instance||(this._instance=new r),this._instance};var t=r.prototype;return t.loadAllResources=function(){var r=n(e().mark((function r(){var n;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([this.loadHeadIcon(),this.loadBorder(),this.loadHeroCard(),this.loadSkill()]);case 2:return n=r.sent,r.abrupt("return",n.every((function(r){return!0===r})));case 4:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),t.loadHeadIcon=function(){var r=n(e().mark((function r(){var n=this;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,e){a.loadDir("icon/head",o,(function(e,t){e?r(!1):(t.forEach((function(r){return n.headIconMap.set(r.name,r)})),r(!0))}))})));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),t.loadHeroCard=function(){var r=n(e().mark((function r(){var n=this;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,e){a.loadDir("hero",o,(function(e,t){e?r(!1):(t.forEach((function(r){return n.heroCardMap.set(r.name,r)})),r(!0))}))})));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),t.loadBorder=function(){var r=n(e().mark((function r(){var n=this;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,e){a.loadDir("border",o,(function(e,t){e?r(!1):(t.forEach((function(r){return n.borderMap.set(r.name,r)})),r(!0))}))})));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),t.loadSkill=function(){var r=n(e().mark((function r(){var n=this;return e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",new Promise((function(r,e){a.loadDir("icon/skill",o,(function(e,t){e?r(!1):(t.forEach((function(r){return n.skillMap.set(r.name,r)})),r(!0))}))})));case 1:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),t.getHeadIcon=function(r){return this.headIconMap.get(r)},t.getHeroCard=function(r){return this.heroCardMap.get(r)},t.getBorder=function(r){return this.borderMap.get(r)},t.getSkill=function(r){return this.skillMap.get(r)},r}())._instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/SkillMod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enums.ts","./index27.ts","./index23.ts","./utils.ts","./TemplateManager.ts","./Helpers.ts","./Log.ts"],(function(t){var i,l,n,s,u,e,r;return{setters:[function(t){i=t.createClass},function(t){l=t.cclegacy},function(t){n=t.ESkillState},null,null,function(t){s=t.SkillFactory},function(t){u=t.TemplateManager},function(t){e=t.SkillHelper},function(t){r=t.Log}],execute:function(){l._RF.push({},"12ae0etD2lMu7Vx7m1EWL6W","SkillMod",void 0);t("SkillMod",function(){function t(t){this.owner=void 0,this.skillMap=new Map,this._curCastingSkill=null,this.owner=t}var l=t.prototype;return l.init=function(){var t=this,i=this.owner.templateUnit,l=u.inst().helper(e.name);i.skill.forEach((function(i){var n=l.getTemplate(i);if(null!=n){var u=s.createSkill(n);t.skillMap.set(n.type,u)}else r.error("Skill "+i+" not found")}))},l.update=function(t){(this.skillMap.forEach((function(i){return i.update(t)})),this._curCastingSkill)&&(0===this._curCastingSkill.curState()&&(this._curCastingSkill=null))},l.destroy=function(){this.skillMap.clear(),this._curCastingSkill=null},l.castSkill=function(t,i,l){if(this.canCastSkill()){var s=this.skillMap.get(t);s&&(this._curCastingSkill&&this._curCastingSkill.curState()===n.CASTING&&this._curCastingSkill.interrupt(),this._curCastingSkill=s,s.cast(i,l))}},l.interrupt=function(){this._curCastingSkill&&(this._curCastingSkill.interrupt(),this._curCastingSkill=null)},l.canCastSkill=function(){return!this._curCastingSkill||this._curCastingSkill.curState()!==n.CASTING},l.isCasting=function(){return null!=this._curCastingSkill},i(t,[{key:"curCastingSkill",get:function(){return this._curCastingSkill}}]),t}());l._RF.pop()}}}));

System.register("chunks:///_virtual/SpineAnimator.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,o,i,e,r,a,s,p,l,u,c,d,m,h;return{setters:[function(n){t=n.applyDecoratedDescriptor,o=n.inheritsLoose,i=n.initializerDefineProperty,e=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,s=n.sp,p=n.Node,l=n.Label,u=n.Button,c=n.Sprite,d=n.UITransform,m=n.Color,h=n.Component}],execute:function(){var f,g,A,w,y,C,b,S,L,v,D,k,B;r._RF.push({},"b1d4fZgKdNMTqIDx0DksM65","SpineAnimator",void 0);var z=a.ccclass,O=a.property;a.menu,n("SpineAnimator",(f=z("SpineAnimator"),g=O(s.Skeleton),A=O(p),w=O({type:l,tooltip:"显示当前选中动画名称的标签"}),y=O({type:p,tooltip:"下拉选项列表容器"}),C=O({type:u,tooltip:"下拉框按钮"}),f((L=t((S=function(n){function t(){for(var t,o=arguments.length,r=new Array(o),a=0;a<o;a++)r[a]=arguments[a];return t=n.call.apply(n,[this].concat(r))||this,i(t,"skeleton",L,e(t)),i(t,"dropdownNode",v,e(t)),i(t,"currentAnimLabel",D,e(t)),i(t,"optionsContainer",k,e(t)),i(t,"dropdownButton",B,e(t)),t.animations=[],t.isDropdownOpen=!1,t.optionButtons=[],t}o(t,n);var r=t.prototype;return r.start=function(){this.initializeAnimations(),this.setupDropdown()},r.initializeAnimations=function(){if(this.skeleton)if(this.skeleton.skeletonData){var n=this.skeleton.skeletonData;this.animations=Object.keys(n.getAnimsEnum())}else Log.error("[SpineAnimator] Skeleton data is not loaded");else Log.error("[SpineAnimator] Skeleton component is not assigned")},r.setupDropdown=function(){0!==this.animations.length?(this.dropdownButton&&this.dropdownButton.node.on(u.EventType.CLICK,this.toggleDropdown,this),this.createOptionButtons(),this.optionsContainer&&(this.optionsContainer.active=!1)):console.warn("[SpineAnimator] No animations to setup dropdown")},r.createOptionButtons=function(){var n=this;this.optionsContainer?(this.optionsContainer.removeAllChildren(),this.optionButtons=[],this.animations.forEach((function(t,o){var i=new p("Option_"+o),e=i.addComponent(u),r=(i.addComponent(c),new p("Label")),a=r.addComponent(l);i.addComponent(d).setContentSize(200,30),a.string=t,a.fontSize=20,a.color=new m(0,0,0,255),r.parent=i,e.node.on(u.EventType.CLICK,(function(){n.onAnimationSelected(t)}),n),i.parent=n.optionsContainer,n.optionButtons.push(e)}))):Log.error("[SpineAnimator] Options container is not assigned")},r.toggleDropdown=function(){this.optionsContainer&&(this.isDropdownOpen=!this.isDropdownOpen,this.optionsContainer.active=this.isDropdownOpen)},r.onAnimationSelected=function(n){this.playAnimation(n),this.updateCurrentAnimLabel(n),this.toggleDropdown()},r.playAnimation=function(n,t){if(void 0===t&&(t=!0),this.skeleton)if(n)try{this.skeleton.setAnimation(0,n,t),Log.info("[SpineAnimator] Playing animation: "+n)}catch(t){Log.error("[SpineAnimator] Failed to play animation: "+n,t)}else Log.error("[SpineAnimator] Animation name is empty");else Log.error("[SpineAnimator] Skeleton is not assigned")},r.updateCurrentAnimLabel=function(n){this.currentAnimLabel&&(this.currentAnimLabel.string=n)},r.getAnimations=function(){return[].concat(this.animations)},r.onDestroy=function(){this.dropdownButton&&this.dropdownButton.node.off(u.EventType.CLICK,this.toggleDropdown,this),this.optionButtons.forEach((function(n){n.node.off(u.EventType.CLICK)}))},t}(h)).prototype,"skeleton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(S.prototype,"dropdownNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(S.prototype,"currentAnimLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(S.prototype,"optionsContainer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(S.prototype,"dropdownButton",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=S))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/SpineMove.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,s,o,a,r,c,l,h,p,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,r=e.sp,c=e.Vec3,l=e.input,h=e.Input,p=e.KeyCode,m=e.Component}],execute:function(){var u,y,v,k,A,D;o._RF.push({},"c90943E8yNNkrQsqFTB/hmS","SpineMove",void 0);var f=a.ccclass,_=a.property;e("SpineMove",(u=f("SpineMove"),y=_(r.Skeleton),u((A=t((k=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"skeleton",A,s(t)),n(t,"moveSpeed",D,s(t)),t.moveDir=new c,t.currentAnim="wait",t.isAttacking=!1,t.attackHold=!1,t.lastScaleX=1,t}i(t,e);var o=t.prototype;return o.start=function(){l.on(h.EventType.KEY_DOWN,this.onKeyDown,this),l.on(h.EventType.KEY_UP,this.onKeyUp,this),this.lastScaleX=this.node.scale.x,this.playAnim("wait",!0)},o.update=function(e){if(!this.isAttacking){if(this.moveDir.length()>0){var t=this.moveDir.clone().normalize().multiplyScalar(this.moveSpeed*e);this.node.position=this.node.position.add(t),0!==this.moveDir.x&&(this.lastScaleX=this.moveDir.x>0?1:-1,this.node.scale=new c(this.lastScaleX,1,1)),"move"!==this.currentAnim&&this.playAnim("move",!0)}else this.isAttacking||"wait"===this.currentAnim||this.playAnim("wait",!0);this.attackHold&&!this.isAttacking&&this.playAttack()}},o.onKeyDown=function(e){switch(e.keyCode){case p.ARROW_UP:case p.KEY_W:this.moveDir.y=1;break;case p.ARROW_DOWN:case p.KEY_S:this.moveDir.y=-1;break;case p.ARROW_LEFT:case p.KEY_A:this.moveDir.x=-1;break;case p.ARROW_RIGHT:case p.KEY_D:this.moveDir.x=1;break;case p.SPACE:this.attackHold=!0}},o.onKeyUp=function(e){switch(e.keyCode){case p.ARROW_UP:case p.KEY_W:1===this.moveDir.y&&(this.moveDir.y=0);break;case p.ARROW_DOWN:case p.KEY_S:-1===this.moveDir.y&&(this.moveDir.y=0);break;case p.ARROW_LEFT:case p.KEY_A:-1===this.moveDir.x&&(this.moveDir.x=0);break;case p.ARROW_RIGHT:case p.KEY_D:1===this.moveDir.x&&(this.moveDir.x=0);break;case p.SPACE:this.attackHold=!1}},o.playAttack=function(){var e=this;this.skeleton&&!this.isAttacking&&(this.isAttacking=!0,this.playAnim("attack",!1,(function(){e.isAttacking=!1,e.attackHold?e.playAttack():e.moveDir.length()>0?e.playAnim("move",!0):e.playAnim("wait",!0)})))},o.playAnim=function(e,t,i){this.skeleton&&(this.currentAnim===e&&t||(this.currentAnim=e,this.skeleton.setCompleteListener(null),this.skeleton.setAnimation(0,e,t),!t&&i&&this.skeleton.setCompleteListener((function(t){t.animation.name===e&&i()}))))},o.onDestroy=function(){l.off(h.EventType.KEY_DOWN,this.onKeyDown,this),l.off(h.EventType.KEY_UP,this.onKeyUp,this),this.skeleton&&this.skeleton.setCompleteListener(null)},t}(m)).prototype,"skeleton",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(k.prototype,"moveSpeed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),v=k))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/StateMachineMod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enums9.ts","./index23.ts","./index2.ts","./Log.ts","./enums.ts"],(function(t){var e,n,i,r,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy},function(t){i=t.StateType},null,null,function(t){r=t.Log},function(t){a=t.ESkillType}],execute:function(){n._RF.push({},"d6665YGdMJEO7XohiWbmf0k","StateMachineMod",void 0);t("StateMachineMod",function(){function t(t){this.owner=void 0,this.curState=null,this.stateCache=new Map,this.currentTarget=null,this.nextTickTime=0,this.nextActionTime=0,this.owner=t}var e=t.prototype;return e.update=function(t){this.curState&&this.curState.update(this,t)},e.init=function(){},e.destroy=function(){},e.getCurTarget=function(){return this.currentTarget},e.EnterNewState=function(t){var e=this.stateCache.get(t);if(!e){if(!(e=this.createNewState(t)))return;this.stateCache.set(t,e)}this.curState&&this.curState.exit(this),this.curState=e,this.curState.enter(this)},e.createNewState=function(t){var e=null;switch(t){case i.BORN:e=new s;break;case i.IDLE:e=new u;break;case i.CHASE:e=new c;break;case i.ACTION:e=new h;break;case i.FLEE:e=new f;break;case i.WANDER:e=new l;break;case i.DEAD:e=new m}return e},t}());var o=t("BasicState",function(){function t(t){this.stateType=void 0,this.stateType=t}var e=t.prototype;return e.enter=function(t){},e.exit=function(t){},e.update=function(t,e){},t}()),s=t("BornState",function(t){function n(){return t.call(this,i.BORN)||this}e(n,t);var a=n.prototype;return a.enter=function(t){r.info("AI进入出生状态")},a.update=function(t){t.EnterNewState(i.IDLE)},n}(o)),u=t("IdleState",function(t){function n(){var e;return(e=t.call(this,i.IDLE)||this).waitTime=0,e.timer=0,e}e(n,t);var a=n.prototype;return a.enter=function(t){this.waitTime=2*Math.random()+1,this.timer=0,r.info("AI进入等待状态 等待时间:",this.waitTime)},a.update=function(t,e){this.timer+=e,this.timer>=this.waitTime&&t.EnterNewState(i.WANDER)},n}(o)),c=t("ChaseState",function(t){function n(){return t.call(this,i.CHASE)||this}return e(n,t),n.prototype.update=function(t,e){var n=t.owner.stateMachineMod.getCurTarget();n?t.owner.movementMod.distanceTo(n)<1.5?t.EnterNewState(i.ACTION):t.owner.movementMod.moveTowards(n,e):t.EnterNewState(i.IDLE)},n}(o)),h=t("ActionState",function(t){function n(){var e;return(e=t.call(this,i.ACTION)||this).casting=!1,e}e(n,t);var o=n.prototype;return o.enter=function(t){r.info("AI进入行动状态")},o.update=function(t,e){if(this.casting){if(t.owner.skillMod.isCasting())return;this.casting=!1,t.EnterNewState(i.IDLE)}var n=t.owner.target;n?t.owner.movementMod.distanceTo(n)>2.5?t.EnterNewState(i.CHASE):(t.owner.skillMod.castSkill(a.COMMON,n),this.casting=!0):t.EnterNewState(i.IDLE)},n}(o)),f=t("FleeState",function(t){function n(){var e;return(e=t.call(this,i.FLEE)||this).fleeTime=0,e.timer=0,e}e(n,t);var a=n.prototype;return a.enter=function(t){r.info("AI进入逃离状态"),this.fleeTime=2*Math.random()+2,this.timer=0},a.update=function(t,e){var n=t.owner.target;this.timer+=e,n&&t.owner.movementMod.moveAwayFrom(n,e),this.timer>=this.fleeTime&&t.EnterNewState(i.IDLE)},n}(o)),m=t("DeadState",function(t){function n(){return t.call(this,i.DEAD)||this}e(n,t);var r=n.prototype;return r.enter=function(t){},r.update=function(t,e){},n}(o)),l=t("WanderState",function(t){function n(){var e;return(e=t.call(this,i.WANDER)||this).wanderTime=0,e.timer=0,e}e(n,t);var a=n.prototype;return a.enter=function(t){r.info("AI进入徘徊状态"),this.wanderTime=1e3*(10*Math.random()+1),this.timer=0},a.update=function(t,e){this.timer+=e,t.owner.movementMod.randomMove(e),t.owner.checkEnemyInRange()?t.EnterNewState(i.CHASE):this.timer>=this.wanderTime&&t.EnterNewState(i.IDLE)},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/StatsMod.ts",["cc"],(function(t){var i;return{setters:[function(t){i=t.cclegacy}],execute:function(){i._RF.push({},"1a347UE0i9Fx5Qtiv2hxa5+","StatsMod",void 0);t("StatsMod",function(){function t(t){this.owner=void 0,this.totalDamageDealt=void 0,this.totalDamageTaken=void 0,this.totalHealing=void 0,this.skillsUsed=void 0,this.criticalHits=void 0,this.dodges=void 0,this.killCount=void 0,this.survivalTime=void 0,this.owner=t}var i=t.prototype;return i.update=function(t){this.survivalTime+=t},i.init=function(){},i.destroy=function(){},t}());i._RF.pop()}}}));

System.register("chunks:///_virtual/StorageUtils.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,r,n;return{setters:[function(t){e=t.asyncToGenerator,r=t.regeneratorRuntime},function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"b65c69FgX1AA6naODYZwljB","StorageUtils",void 0);var o,s=function(t){var e=function(t){return"local"===t?localStorage:sessionStorage}(t),r="local"===t?"localStorage":"sessionStorage";return{set:function(t,n){try{var o=JSON.stringify(n);e.setItem(t,o)}catch(t){console.warn("[StorageUtils] 设置"+r+"失败:",t)}},get:function(t,n){try{var o=e.getItem(t);return null===o?n:JSON.parse(o)}catch(t){return console.warn("[StorageUtils] 获取"+r+"失败:",t),n}},remove:function(t){try{e.removeItem(t)}catch(t){console.warn("[StorageUtils] 移除"+r+"失败:",t)}},clear:function(){try{e.clear()}catch(t){console.warn("[StorageUtils] 清空"+r+"失败:",t)}},has:function(t){try{return null!==e.getItem(t)}catch(t){return console.warn("[StorageUtils] 检查"+r+"键存在性失败:",t),!1}},keys:function(){try{for(var t=[],n=0;n<e.length;n++){var o=e.key(n);o&&t.push(o)}return t}catch(t){return console.warn("[StorageUtils] 获取"+r+"键列表失败:",t),[]}},size:function(){try{var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t+=e[n].length+n.length);return t}catch(t){return console.warn("[StorageUtils] 计算"+r+"大小失败:",t),0}}}};t("StorageUtils",{setLocal:function(t,e){return s("local").set(t,e)},getLocal:function(t,e){return s("local").get(t,e)},removeLocal:function(t){return s("local").remove(t)},clearLocal:function(){return s("local").clear()},hasLocal:function(t){return s("local").has(t)},getLocalKeys:function(){return s("local").keys()},getLocalSize:function(){return s("local").size()},setSession:function(t,e){return s("session").set(t,e)},getSession:function(t,e){return s("session").get(t,e)},removeSession:function(t){return s("session").remove(t)},clearSession:function(){return s("session").clear()},hasSession:function(t){return s("session").has(t)},getSessionKeys:function(){return s("session").keys()},getSessionSize:function(){return s("session").size()},createNamespaced:function(t,e){return void 0===e&&(e=!1),function(t,e){void 0===e&&(e=!1);var r=s(e?"session":"local"),n=t+":";return{set:function(t,e){r.set(n+t,e)},get:function(t,e){return r.get(n+t,e)},remove:function(t){r.remove(n+t)},clear:function(){r.keys().forEach((function(t){t.startsWith(n)&&r.remove(t)}))},has:function(t){return r.has(n+t)},keys:function(){return r.keys().filter((function(t){return t.startsWith(n)})).map((function(t){return t.substring(n.length)}))},getAll:function(){var t=this,e={};return this.keys().forEach((function(r){e[r]=t.get(r)})),e},setAll:function(t){var e=this;Object.entries(t).forEach((function(t){var r=t[0],n=t[1];e.set(r,n)}))}}}(t,e)},isLocalStorageSupported:function(){try{var t="__test__";return localStorage.setItem(t,"test"),localStorage.removeItem(t),!0}catch(t){return!1}},isSessionStorageSupported:function(){try{var t="__test__";return sessionStorage.setItem(t,"test"),sessionStorage.removeItem(t),!0}catch(t){return!1}},getStorageEstimate:(o=e(r().mark((function t(){return r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!("storage"in navigator)||!("estimate"in navigator.storage)){t.next=5;break}return t.next=4,navigator.storage.estimate();case 4:return t.abrupt("return",t.sent);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn("[StorageUtils] 获取存储配额信息失败:",t.t0);case 10:return t.abrupt("return",null);case 11:case"end":return t.stop()}}),t,null,[[0,7]])}))),function(){return o.apply(this,arguments)})});n._RF.pop()}}}));

System.register("chunks:///_virtual/StringUtils.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"06d1aJvovBIHYCaYWKL6RmF","StringUtils",void 0);t("StringUtils",{formatBytes:function(t,e){if(void 0===e&&(e=2),0===t)return"0 Bytes";var r=e<0?0:e,n=Math.floor(Math.log(t)/Math.log(1024));return parseFloat((t/Math.pow(1024,n)).toFixed(r))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]},generateId:function(t){var e=Date.now().toString(36)+Math.random().toString(36).substring(2);return t?t+"_"+e:e},generateSimpleId:function(){return Math.random().toString(36).substr(2,9)},capitalize:function(t){return t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():t},toCamelCase:function(t){return t.replace(/-([a-z])/g,(function(t,e){return e.toUpperCase()}))},toKebabCase:function(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^-/,"")},toSnakeCase:function(t){return t.replace(/([A-Z])/g,"_$1").toLowerCase().replace(/^_/,"")},truncate:function(t,e,r){return void 0===r&&(r="..."),t.length<=e?t:t.substring(0,e-r.length)+r},stripHtml:function(t){var e=document.createElement("div");return e.innerHTML=t,e.textContent||e.innerText||""},escapeHtml:function(t){var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"};return t.replace(/[&<>"']/g,(function(t){return e[t]}))},randomString:function(t,e){void 0===t&&(t=8),void 0===e&&(e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789");for(var r="",n=0;n<t;n++)r+=e.charAt(Math.floor(Math.random()*e.length));return r},formatNum:function(t){if(!t)return 0;var e=10;return"string"==typeof t&&(t=parseFloat(t)),t<Math.pow(e,5)?t.toLocaleString("en-US",{useGrouping:!0}):t<Math.pow(e,7)?Math.round(t/Math.pow(e,3)*10)/10+"K":t<Math.pow(e,10)?Math.floor(t/Math.pow(e,6)*10)/10+"M":t<Math.pow(e,13)?Math.floor(t/Math.pow(e,9)*10)/10+"B":Math.floor(t/Math.pow(e,12)*10)/10+"T"},stringToBytes:function(t){return(new TextEncoder).encode(t)},bytesToString:function(t){return(new TextDecoder).decode(t)}});e._RF.pop()}}}));

System.register("chunks:///_virtual/TemplateHelper.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index23.ts","./Log.ts","./JsonUtils.ts"],(function(e){var t,r,n,a,i,u;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime,n=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy},null,function(e){i=e.Log},function(e){u=e.readInJson}],execute:function(){a._RF.push({},"9f775RXVH1ECYOrm7dPDOb+","TemplateHelper",void 0);e("TemplateHelper",function(){function e(e){this.fileName=void 0,this.dataMap=new Map,this.fileName=e}var a=e.prototype;return a.getTemplate=function(e){return this.dataMap.get(e)},a.getAll=function(){return this.dataMap.values()},a.load=function(){var e=t(r().mark((function e(t){var a,o,s,c;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u(t);case 3:if(a=e.sent,Array.isArray(a)){e.next=7;break}return i.error("配置文件 "+t+" 格式错误"),e.abrupt("return",!1);case 7:for(this.dataMap.clear(),o=n(a);!(s=o()).done;)c=s.value,this.dataMap.has(c.id)&&i.warn("重复的配置 id: "+c.id+" in "+t),this.dataMap.set(c.id,c);if(this.configCheck()){e.next=12;break}return i.error("配置检查失败: "+t),e.abrupt("return",!1);case 12:return e.abrupt("return",!0);case 15:return e.prev=15,e.t0=e.catch(0),i.error("加载配置失败: "+t,e.t0),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(t){return e.apply(this,arguments)}}(),e}());a._RF.pop()}}}));

System.register("chunks:///_virtual/TemplateManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,a;return{setters:[function(e){t=e.asyncToGenerator,n=e.regeneratorRuntime,r=e.createForOfIteratorHelperLoose},function(e){a=e.cclegacy}],execute:function(){e("templateHelper",(function(e){return i.push(e),e})),a._RF.push({},"14766qHx2FJdLUPfohpP0Sn","TemplateManager",void 0),e("TemplateManager",function(){function e(){this._data=new Map}e.inst=function(){return this._instance||(this._instance=new e,this._instance.init()),this._instance};var a=e.prototype;return a.init=function(){},a.load=function(){var e=t(n().mark((function e(){var t,a,u,c;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i.map((function(e){return new e})),a=r(t);case 2:if((u=a()).done){e.next=11;break}return c=u.value,e.next=6,c.load(c.fileName);case 6:if(e.sent){e.next=8;break}return e.abrupt("return",!1);case 8:this._data.set(c.constructor.name,c);case 9:e.next=2;break;case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.helper=function(e){return this._data.get(e)},e}())._instance=void 0;var i=[];a._RF.pop()}}}));

System.register("chunks:///_virtual/Templates.ts",["cc"],(function(i){var t;return{setters:[function(i){t=i.cclegacy}],execute:function(){t._RF.push({},"625d0/UCWdM94whu6I71Nic","Templates",void 0);i("TemplateConst",(function(){this.id=void 0,this.params=void 0,this.des=void 0})),i("TemplateBattle",(function(){this.id=void 0,this.battleType=void 0,this.fightType=void 0,this.limitedTime=void 0,this.isAutoXpSkill=void 0,this.isVertical=void 0,this.headless=void 0,this.recordReplay=void 0,this.remainingTime=void 0,this.maxLifeTime=void 0})),i("TemplateUnit",(function(){this.id=void 0,this.name=void 0,this.quality=void 0,this.ad=void 0,this.ap=void 0,this.adArmor=void 0,this.apArmor=void 0,this.hp=void 0,this.hpRecover=void 0,this.atkSpeed=void 0,this.moveSpeed=void 0,this.adUp=void 0,this.apUp=void 0,this.adArmorUp=void 0,this.apArmorUp=void 0,this.hpUp=void 0,this.hpRecoverUp=void 0,this.skill=void 0,this.label=void 0,this.desc=void 0})),i("TemplateSkill",(function(){this.id=void 0,this.name=void 0,this.type=void 0,this.castTime=void 0,this.recoveryTime=void 0,this.toSelfImpacts=void 0,this.toOtherImpacts=void 0,this.coldDown=void 0,this.skillSelector=void 0,this.des=void 0})),i("TemplateBuff",(function(){this.id=void 0,this.effect=void 0,this.purpose=void 0,this.disposedRule=void 0,this.priority=void 0,this.bubbleTipsId=void 0,this.maxStack=void 0,this.visible=void 0,this.canBreak=void 0,this.des=void 0,this.replaceRule=void 0,this.mutes=void 0})),i("TemplateBuffEffect",(function(){this.id=void 0,this.effectId=void 0,this.activeCondition=void 0,this.disposedCondition=void 0,this.param1=void 0,this.param2=void 0,this.param3=void 0,this.param4=void 0,this.param5=void 0,this.param11=void 0,this.param12=void 0,this.param13=void 0,this.modifyName=void 0,this.des=void 0})),i("TemplateAction",(function(){this.id=void 0,this.actionId=void 0,this.probability=void 0,this.selector=void 0,this.param1=void 0,this.param2=void 0,this.param3=void 0,this.param4=void 0,this.param5=void 0,this.modifyName=void 0,this.des=void 0})),i("TemplateProjectile",(function(){this.id=void 0,this.name=void 0,this.type=void 0,this.speed=void 0,this.range=void 0,this.hitRadius=void 0,this.lifeTime=void 0,this.hitCount=void 0,this.hitActionIds=void 0,this.modelId=void 0,this.hitSoundId=void 0})),i("TemplateAnimation",(function(){this.id=void 0,this.clip=void 0,this.loop=void 0,this.speed=void 0,this.priority=void 0})),i("TemplateEquip",(function(){this.id=void 0,this.effects=void 0})),i("TemplateAward",(function(){this.id=void 0,this.random=void 0,this.weight=void 0,this.must=void 0})),i("TemplateItem",(function(){this.id=void 0,this.type=void 0,this.quality=void 0,this.name=void 0,this.desc=void 0})),i("TemplateLabel",(function(){this.id=void 0,this.label=void 0,this.desc=void 0})),i("TemplateProduct",(function(){this.id=void 0,this.rewardId=void 0,this.slot=void 0,this.weight=void 0,this.name=void 0,this.desc=void 0})),i("TemplateRoutine",(function(){this.id=void 0,this.desc=void 0})),i("TemplateSuit",(function(){this.id=void 0,this.suitId=void 0,this.name=void 0,this.nameKey=void 0,this.pieces2=void 0,this.pieces4=void 0,this.desc=void 0,this.descKey=void 0})),i("TemplateTips",(function(){this.id=void 0,this.type=void 0,this.key=void 0}));t._RF.pop()}}}));

System.register("chunks:///_virtual/TrackingProjectile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AbstractProjectile.ts"],(function(t){var e,i,o,n;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,o=t.Vec2},function(t){n=t.AbstractProjectile}],execute:function(){i._RF.push({},"1207eBRAc9JTJLc4O2ceQ3X","TrackingProjectile",void 0);t("TrackingProjectile",function(t){function i(e,i,o,n){var r;return(r=t.call(this,e,i,o)||this).target=void 0,r.target=n,r}e(i,t);var n=i.prototype;return n.onInit=function(){},n.onUpdate=function(t){if(this.target&&!this.target.isDead()){var e=new o(this.target.movementMod.pos.x-this.pos.x,this.target.movementMod.pos.y-this.pos.y);this.direction=e.normalize(),this.velocity=new o(this.direction.x*this.templateProjectile.speed,this.direction.y*this.templateProjectile.speed)}},n.onHit=function(t){},i}(n));i._RF.pop()}}}));

System.register("chunks:///_virtual/UnitSkill.ts",["./rollupPluginModLoBabelHelpers.js","cc","./enums.ts"],(function(t){var i,e,s,n;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy},function(t){s=t.ESkillState,n=t.ESkillType}],execute:function(){e._RF.push({},"ba639iuOhxBRaGRt76A0Qun","UnitSkill",void 0);var l=t("CastSkill",function(){function t(t,i){this.templateSkill=void 0,this.skillType=void 0,this.state=s.READY,this.castTimer=0,this.cooldownTimer=0,this.templateSkill=i,this.skillType=t}var i=t.prototype;return i.curState=function(){return this.state},i.cast=function(t,i){this.state===s.READY&&(this.state=s.CASTING,this.castTimer=this.templateSkill.castTime)},i.interrupt=function(){this.state!==s.READY&&(this.state=s.INTERRUPTED,this.castTimer=0,this.cooldownTimer=0)},i.update=function(t){switch(this.state){case s.CASTING:this.castTimer-=t,this.castTimer<=0&&(this.hit(),this.state=s.COOLDOWN,this.cooldownTimer=this.templateSkill.recoveryTime);break;case s.COOLDOWN:this.cooldownTimer-=t,this.cooldownTimer<=0&&(this.state=s.READY);break;case s.INTERRUPTED:this.state=s.READY}},i.hit=function(){},t}());t("CommonSkill",function(t){function e(i){return t.call(this,n.COMMON,i)||this}return i(e,t),e.prototype.update=function(i){t.prototype.update.call(this,i)},e}(l)),t("UltimateSkill",function(t){function e(i){return t.call(this,n.ULTIMATE,i)||this}return i(e,t),e.prototype.update=function(i){t.prototype.update.call(this,i)},e}(l)),t("PassiveSkill",function(){function t(t){this.skillType=void 0,this.templateSkill=void 0,this.skillType=n.PASSIVE,this.templateSkill=t}return t.prototype.update=function(t){},t}());e._RF.pop()}}}));

System.register("chunks:///_virtual/UnitsMod.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index26.ts","./EventListener.ts","./enums3.ts"],(function(t){var n,e,i,a;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},null,function(t){i=t.AbstractEventListener},function(t){a=t.UnitCamp}],execute:function(){e._RF.push({},"a5bddEe/mBGUIhRpDzR16dD","UnitsMod",void 0);t("UnitsMod",function(t){function e(n){var e;return(e=t.call(this)||this).context=void 0,e.unitsMap=new Map,e.deathMap=new Map,e.playerUnitsMap=new Map,e.enemyUnitsMap=new Map,e.context=n,e}n(e,t);var i=e.prototype;return i.update=function(t){this.unitsMap.forEach((function(n){n.update(t)})),this.cleanupDeadUnits()},i.init=function(){},i.destroy=function(){},i.onEvent=function(t){},i.addBattleUnit=function(t){t&&(this.unitsMap.set(t.id,t),t.unitCamp===a.PLAYER?this.playerUnitsMap.set(t.id,t):t.unitCamp===a.ENEMY&&this.enemyUnitsMap.set(t.id,t))},i.getBattleUnit=function(t){return this.unitsMap.get(t)||null},i.removeBattleUnit=function(t){var n=this.unitsMap.get(t);n&&(this.unitsMap.delete(t),n.unitCamp===a.PLAYER?this.playerUnitsMap.delete(t):n.unitCamp===a.ENEMY&&this.enemyUnitsMap.delete(t),this.deathMap.set(t,n))},i.getCampUnitsMap=function(t){switch(t){case a.PLAYER:return this.playerUnitsMap;case a.ENEMY:return this.enemyUnitsMap;default:return this.unitsMap}},i.findUnitsInRange=function(t,n,e){var i=this.getCampUnitsMap(e),a=[];if(!i||n<=0)return a;var s=n*n;return i.forEach((function(n){var e=n.movementMod.pos,i=e.x-t.x,u=e.y-t.y;i*i+u*u<=s&&a.push(n)})),a},i.getNearestEnemy=function(t){var n=this.getEnemyCamp(t.unitCamp),e=this.getCampUnitsMap(n),i=null,a=Number.MAX_VALUE;return e.forEach((function(n){var e=Number.MAX_VALUE;if(n&&t&&t.movementMod&&"function"==typeof t.movementMod.distanceTo)try{e=t.movementMod.distanceTo(n)}catch(t){e=Number.MAX_VALUE}else{var s=t.position||t.getPosition&&t.getPosition(),u=n.position||n.getPosition&&n.getPosition();if(s&&u){var o=s.x-u.x,p=s.y-u.y;e=Math.sqrt(o*o+p*p)}}e<a&&(a=e,i=n)})),i},i.getEnemyCamp=function(t){return t===a.PLAYER?a.ENEMY:a.PLAYER},i.cleanupDeadUnits=function(){var t=this,n=[];this.unitsMap.forEach((function(t,e){var i=!1;!0===t.isDead?i=!0:"function"==typeof t.isAlive?i=!t.isAlive():"boolean"==typeof t.isAlive?i=!t.isAlive:"number"==typeof t.hp&&(i=t.hp<=0),i&&n.push(e)})),n.forEach((function(n){var e=t.unitsMap.get(n);if(e&&(t.unitsMap.delete(n),t.deathMap.set(n,e),e.unitCamp===a.PLAYER?t.playerUnitsMap.delete(n):e.unitCamp===a.ENEMY&&t.enemyUnitsMap.delete(n),"function"==typeof e.onDeath))try{e.onDeath()}catch(t){}}))},i.getUnitsMap=function(){return this.unitsMap},i.pause=function(){this.unitsMap.forEach((function(t){if("function"==typeof t.pause)try{t.pause()}catch(t){}}))},i.resume=function(){this.unitsMap.forEach((function(t){if("function"==typeof t.resume)try{t.resume()}catch(t){}}))},i.getEnemyMap=function(t){var n=this.unitsMap.get(t);return null==n?Map.prototype:this.getCampUnitsMap(this.getEnemyCamp(n.unitCamp))},e}(i));e._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc","./enums.ts","./UnitSkill.ts"],(function(t){var n,e,i,c,l;return{setters:[function(t){n=t.cclegacy},function(t){e=t.ESkillType},function(t){i=t.UltimateSkill,c=t.PassiveSkill,l=t.CommonSkill}],execute:function(){n._RF.push({},"0977eYYG4xODJKsRD6OcnSJ","utils",void 0);t("SkillFactory",function(){function t(){}return t.createSkill=function(t){var n=t.type;switch(n){case e.COMMON:return new l(t);case e.PASSIVE:return new c(t);case e.ULTIMATE:return new i(t);default:throw new Error("Unknown skill type: "+n)}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/utils2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./index26.ts","./BuffBox.ts","./UuidUtils.ts","./index23.ts","./BuffEffect_0_Default.ts","./Event_0_Direct.ts","./Ongoing_1_Time.ts","./Log.ts","./constants2.ts"],(function(t){var e,n,r,o,u,i,c,f,a,s;return{setters:[function(t){e=t.createForOfIteratorHelperLoose},function(t){n=t.cclegacy},null,function(t){r=t.BuffBox},function(t){o=t.UuIdUtils},null,function(t){u=t.BuffEffect_0_Default},function(t){i=t.Event_0_Direct},function(t){c=t.Ongoing_1_Time},function(t){f=t.Log},function(t){a=t.SEMICOLON,s=t.ASTERISK}],execute:function(){n._RF.push({},"4a9ccHY7VBEi4PODW1eNJSt","utils",void 0);t("BuffFactory",function(){function t(){}return t.createBuffBox=function(t){return this.createBuffBoxByParams(t.context,t.ownerId,t.generatorId,t.templateBuff)},t.createBuffBoxByParams=function(t,e,n,u){try{return r.createBuffBox(t,o.getNextId(),e,n,u)}catch(t){return f.error("createBuffBoxImpl, error",t),null}},t.createBuffEffect=function(t,e,n){var r;switch(n.effectId){case 0:r=new u(t,n,e);break;default:return f.error("BuffEffect未实现, effectId, ",n.effectId),null}return r},t}()),t("ConditionFactory",function(){function t(){}return t.createEventConditionList=function(t,n,r){for(var o,u=[],i=r.split(a),c=e(i);!(o=c()).done;){var f=o.value,s=this.createEventCondition(t,n,f);s&&u.push(s)}return u},t.createEventCondition=function(t,e,n){var r=n.split(s),o=0,u=null;r.length>0&&(o=parseInt(r[0])),r.length>1&&(u=r[1]);var i={param:u};return this.createEventConditionById(t,e,o,i)},t.createEventConditionListFromBinary=function(t,n,r){for(var o,u=[],i=e(r.entries());!(o=i()).done;){var c=o.value,f=c[0],a=c[1],s=this.createEventConditionById(t,n,f,a);s&&u.push(s)}return u},t.createEventConditionById=function(t,e,n,r){try{switch(n){case 0:return new i(t,e);case 1:return new c(t,e,r)}}catch(t){return console.error("ConditionEnum创建失败, error=",t.message),null}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/utils3.ts",["cc","./index23.ts","./Action_1_Attack.ts","./Log.ts"],(function(t){var n,c,e;return{setters:[function(t){n=t.cclegacy},null,function(t){c=t.Action_1_Attack},function(t){e=t.Log}],execute:function(){n._RF.push({},"ed267udttJL+LCeJVaHi/j3","utils",void 0);t("ActionFactory",function(){function t(){}return t.createAction=function(t,n,i,u,r){try{var o;switch(u.actionId){case 1:o=new c(t,n,u.actionId,i,u,r);break;default:return null}return o.init(),o.paramCheck()?o:null}catch(t){return e.error("action创建出错 e="+t.message),null}},t}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UuidUtils.ts",["cc"],(function(t){var s;return{setters:[function(t){s=t.cclegacy}],execute:function(){s._RF.push({},"7c485GaLVFMvp8CvhstXU3k","UuidUtils",void 0),t("UuIdUtils",function(){function t(){}return t.getNextId=function(){return this._lastId++,this._lastId>Number.MAX_SAFE_INTEGER&&(this._lastId=1),this._lastId},t.reset=function(){this._lastId=0},t}())._lastId=0,s._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});